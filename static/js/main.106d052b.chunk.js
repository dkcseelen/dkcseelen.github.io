(this.webpackJsonpdseoefen=this.webpackJsonpdseoefen||[]).push([[0],{29:function(e,t,n){e.exports=n(42)},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),o=n(20),c=n.n(o),s=n(4),u=n(13),l=n(28),d=n(2),h=n(3),p=n(8),C=n(6),f=n(12),m=n(7);!function(e){e.Green="green",e.Red="red",e.Blue="blue",e.Yellow="yellow"}(r||(r={}));var b=n(16),v=n(18),y=Object(v.a)((function(e,t){switch(t.type){case"UpdateShowAnimations":e.ShowAnimations=t.show;break;case"UpdateStepTime":e.StepTime=t.stepTime;break;case"SetComputing":e.Computing=t.computing}}),{ShowAnimations:!0,StepTime:5,Computing:!1}),O=n(5),g=n(19),k={AllowedMachines:[0,5,6,7,8,9,10,11,12],Description:"The machine should append the length of the input string to the string",Name:"AppendLength",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"four"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"four4"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aabccd"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"aabccd6"}]},{inputs:[{Order:0,Channel:r.Green,Content:"1"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"11"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"0"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This is hard"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"This is hard12"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This might even be harder"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"This might even be harder25"}]}]},I={AllowedMachines:[0,5,6,7,8,9,10,11,12],Description:"The machine should return the length of the input string",Name:"GetLength",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"four"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"4"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aabccd"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"6"}]},{inputs:[{Order:0,Channel:r.Green,Content:"1"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"1"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"0"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This is hard"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"12"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This might even be harder"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"25"}]}]},w={AllowedMachines:[0,5,6,7,8,9,10,11,12],Description:"The machine should exit green is the first character is a number, exit red if it is a letter and exit blue otherwise",Name:"GetType",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"42"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"42"}]},{inputs:[{Order:0,Channel:r.Green,Content:"this starts with a letter"}],expectedOutputs:[{Order:0,Channel:r.Red,Content:"this starts with a letter"}]},{inputs:[{Order:0,Channel:r.Green,Content:",#@%!"}],expectedOutputs:[{Order:0,Channel:r.Blue,Content:",#@%!"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Blue,Content:""}]}]},S={AllowedMachines:[0,5,6,7,8,9,10],Description:"The machine should exit green if the message is empty, otherwise exit red",Name:"IsEmpty",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Red,Content:"abc"}]}]},D={AllowedMachines:[0,5,6,7,8,9,10,11,12],Description:"The machine should keep all numbers in the input string, and remove all other characters",Name:"KeepNumbers",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"42"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"42"}]},{inputs:[{Order:0,Channel:r.Green,Content:"fortytwo"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"1 and 1 is"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"11"}]}]},x={AllowedMachines:[0,5,6,7,8,9,10,11,12],Description:"The machine should increase the input number by 1. Input only contains digits",Name:"PlusOne",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"4"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"5"}]},{inputs:[{Order:0,Channel:r.Green,Content:"0"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"1"}]},{inputs:[{Order:0,Channel:r.Green,Content:"42"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"43"}]},{inputs:[{Order:0,Channel:r.Green,Content:"9"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"10"}]},{inputs:[{Order:0,Channel:r.Green,Content:"39"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"40"}]},{inputs:[{Order:0,Channel:r.Green,Content:"23999999"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"24000000"}]}]},M={AllowedMachines:[0,5,6,7,8,9,10],Description:"The machine should remove all repeating characters from the input string",Name:"RemoveAllRepeats",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"aabc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aaaabccc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:"hhhhhhhhhiiiii wwwworllllldddddddd"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"hi world"}]}]},A={AllowedMachines:[0,5,6,7,8,9,10,11,12],Description:"The machine should put the last character in front of the string",Name:"RotateBackwards",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"cab"}]},{inputs:[{Order:0,Channel:r.Green,Content:"otater"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"rotate"}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"ello world!H"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"Hello world!"}]}]},T={AllowedMachines:[0,1,5,6,7,8,9,10,11,12,13,14],Description:"Sandbox level, no specific goals",Name:"Sandbox",Tests:[]},E={AllowedMachines:[0,5,6,7,8,9,10,11,12],Description:"The machine should reverse the characters from the string. Input are only lowercase letters. With limited number of machines at your disposal, this is VERY HARD",Name:"ReverseLimited",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"cba"}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"esrever"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"reverse"}]}]},G={AllowedMachines:[0,5,6,7,8,9,10,11,12,13,14],Description:"The machine should reverse the characters from the string.",Name:"Reverse",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"cba"}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"desrever saw sihT"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"This was reversed"}]}]},F={AllowedMachines:[0,5,6,7,8,9,10,11,12,13,14],Description:"The machine should exit the input both to green and red",Name:"CopyAll",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""},{Order:0,Channel:r.Red,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"},{Order:0,Channel:r.Red,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"},{Order:0,Channel:r.Red,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aabcc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"aabcc"},{Order:0,Channel:r.Red,Content:"aabcc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"Copied"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"Copied"},{Order:0,Channel:r.Red,Content:"Copied"}]}]},R=function(){function e(){Object(d.a)(this,e),this.levels=void 0,this.levels=[],this.init()}return Object(h.a)(e,[{key:"init",value:function(){this.levels.push(S),this.levels.push(M),this.levels.push(w),this.levels.push(D),this.levels.push(I),this.levels.push(k),this.levels.push(A),this.levels.push(x),this.levels.push(E),this.levels.push(G),this.levels.push(F),this.levels.push(T)}},{key:"GetAllLevels",value:function(){return this.levels}}],[{key:"GetStore",value:function(){return void 0===e.levelStore&&(e.levelStore=new e),e.levelStore}}]),e}();R.levelStore=void 0;var j,B=L("IsEmpty"),N=Object(v.a)((function(e,t){switch(t.type){case"LoadLevelActionType":return L(t.name);case"AddTestActionType":var n={actualOutputs:[],expectedOutputs:[],inputs:[{Channel:r.Green,Content:"",Order:0}],editable:!0,id:Math.max.apply(Math,Object(g.a)(e.Tests.map((function(e){return e.id}))).concat([-1]))+1};return void e.Tests.push(n);case"RemoveTestActionType":return void(e.Tests=e.Tests.filter((function(e){return e.id!==t.testId})));case"ReportOutputActionType":case"ClearTestOutputActionType":case"AddInputActionType":case"RemoveInputActionType":case"UpdateInputActionType":case"UpdateOutputActionType":case"RemoveOutputActionType":case"AddOutputActionType":var a=e.Tests.map((function(e){return e.id===t.testId?function(e,t){switch(t.type){case"ReportOutputActionType":var n=e.actualOutputs.slice();return n.push(t.outputMessage),Object(O.a)({},e,{actualOutputs:n});case"ClearTestOutputActionType":return Object(O.a)({},e,{actualOutputs:[]});case"AddInputActionType":var a=Math.max.apply(Math,Object(g.a)(e.inputs.map((function(e){return e.Order}))).concat([-1]))+1,i={Channel:r.Green,Content:"",Order:a};return Object(O.a)({},e,{inputs:e.inputs.concat(i)});case"RemoveInputActionType":var o=e.inputs.filter((function(e){return e.Order!==t.order})).map((function(e,t){return Object(O.a)({},e,{order:t})})),c=e.expectedOutputs.filter((function(e){return e.Order!==t.order})).map((function(e){return Object(O.a)({},e,{Order:e.Order>t.order?e.Order-1:e.Order})}));return Object(O.a)({},e,{inputs:o,expectedOutputs:c,actualOutputs:e.actualOutputs.filter((function(e){return e.Order<t.order}))});case"UpdateInputActionType":var s=e.inputs.map((function(e){return e.Order===t.input.Order?t.input:e}));return Object(O.a)({},e,{inputs:s,actualOutputs:e.actualOutputs.filter((function(e){return e.Order<t.input.Order}))});case"UpdateOutputActionType":var u=e.expectedOutputs.filter((function(e){return e.Order===t.output.Order})).map((function(e,n){return n===t.index?t.output:e}));return Object(O.a)({},e,{expectedOutputs:u});case"RemoveOutputActionType":var l=e.expectedOutputs.filter((function(e){return e.Order===t.order})).filter((function(e,n){return n!==t.index}));return Object(O.a)({},e,{expectedOutputs:l});case"AddOutputActionType":var d=e.expectedOutputs.slice(),h=0,p=!0,C=!1,f=void 0;try{for(var m,b=d[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){if(m.value.Order>t.order)break;h++}}catch(v){C=!0,f=v}finally{try{p||null==b.return||b.return()}finally{if(C)throw f}}return d.splice(h,0,{Order:t.order,Content:"",Channel:r.Green}),Object(O.a)({},e,{expectedOutputs:d});default:return e}}(e,t):e}));return void(e.Tests=a);default:return}}),B);function L(e){var t=R.GetStore().GetAllLevels().find((function(t){return t.Name===e})),n=t.Tests.length>0?t.Tests.map((function(e,t){return Object(O.a)({},e,{actualOutputs:[],id:t,editable:!1})})):[{actualOutputs:[],inputs:[{Channel:r.Green,Content:"",Order:0}],expectedOutputs:[],id:0,editable:!0}];return{AllowedMachines:t.AllowedMachines,Description:t.Description,Name:t.Name,Tests:n}}function P(e){var t=[],n=[],r=j.Up,a=!0,i=!1,o=void 0;try{for(var c,s=e.OutputChannels[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value;t.push({Channel:u,Direction:r,Status:"Valid"}),r++}}catch(m){i=!0,o=m}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}if(e.InputChannels.length>1){r=0;var l=!0,d=!1,h=void 0;try{for(var p,C=e.InputChannels[Symbol.iterator]();!(l=(p=C.next()).done);l=!0){var f=p.value;n.push({Channel:f,Direction:r,Status:"Valid"}),r++}}catch(m){d=!0,h=m}finally{try{l||null==C.return||C.return()}finally{if(d)throw h}}for(;r<4;r++)n.push({Channel:e.InputChannels[0],Direction:r,Status:"Valid"})}return{inputChannels:n,outputChannels:t}}function U(e,t){if(void 0===e)return e;switch(t.type){case"SetColumnNumberActionType":return e.Setup.NumberOfColumns=t.columns,e;case"SetRowNumberActionType":return e.Setup.NumberOfRows=t.rows,e;case"SetMessagesActionType":return e.Messages=t.messages,e;case"SetColorActionType":return e.Style.Color=t.color,e;case"SetBorderColorActionType":return e.Style.BorderColor=t.backgroundColor,e;case"SetNameActionType":return e.Style.Name=t.name,e;case"SetDescriptionActionType":return e.Style.Description=t.description,e;default:return e.Setup.MachineInstances=function(e,t){switch(t.type){case"ChannelChangedActionType":return e.find((function(e){return e.Id===t.machineInstanceId})).Channels[t.channelIndex]=t.channel,e;case"InputChannelChangedActionType":var n=e.find((function(e){return e.Id===t.machineInstanceId}));return n.InputChannels.find((function(e){return e.Direction===t.channel.Direction})).Direction=n.InputChannels[t.channelIndex].Direction,n.InputChannels[t.channelIndex]=t.channel,e;case"MachineRemovedActionType":return e.filter((function(e){return e.Id!==t.machineInstanceId}));case"MachineAddedActionType":var r=P(t.api),a=r.outputChannels,i=r.inputChannels,o=0===e.length?0:Math.max.apply(Math,Object(g.a)(e.map((function(e){return e.Id})))),c={Cell:t.cell,MachineId:t.machineId,Channels:a,InputChannels:i,Id:o+1,Status:"Valid"};return e.push(c),e;case"MachineMovedActionType":return e.find((function(e){return e.Id===t.machineInstanceId})).Cell=t.newCell,e;case"FixMachineActionType":var s=e.find((function(e){return e.Id===t.machineInstanceId}));return"Deleted"===s.Status?e.filter((function(e){return e.Id!==t.machineInstanceId})):("ChannelsInvalid"===s.Status&&(s.Channels=s.Channels.filter((function(e){return"ShouldNotExist"!==e.Status})).map((function(e){return"ShouldExist"===e.Status?Object(O.a)({},e,{Status:"Valid"}):e})),s.Status="Valid"),e);default:return e}}(e.Setup.MachineInstances,t),e}}function z(e,t){return e.Id===t.Id&&e.Type===t.Type}!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(j||(j={}));var V=n(10),q=n(11),W=n.n(q),H=function(e,t){if(-1!==t)for(var n="<"+t+">",r=n.length,a=0,i=e.indexOf(n),o=e.indexOf("*");-1!==i||-1!==o;)-1!==i&&(-1===o||i<o)?(e=e.substring(0,i)+"*"+e.substring(i+r),a=i+1):(e=e.substring(0,o)+n+e.substring(o+1),a=o+r),i=e.indexOf(n,a),o=e.indexOf("*",a);return e},Y=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[],n="*"+e.Content;return t.push({Content:n,Channel:r.Green}),Promise.resolve(t)}},this.Id={Id:10,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"blue",Color:"grey",Name:"Add *",Description:"Puts a star in front of the string. There is guaranteed not to be a star in the input"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),_=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[],n="0"+e.Content;return t.push({Content:n,Channel:r.Green}),Promise.resolve(t)}},this.Id={Id:11,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"yellow",Color:"darkorange",Name:"Add 0",Description:"Puts a zero in front of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),K=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[],n=r.Green;if(e.Content.length<2)n=r.Red;else if("<"!==e.Content[0])e.Content[0]!==e.Content[1]&&(n=r.Red);else{var a=e.Content.indexOf(">"),i=e.Content.substring(0,a+1);if(e.Content.length<2*i.length)n=r.Red;else e.Content.substring(a+1,a+i.length+1)!==i&&(n=r.Red)}return t.push({Content:e.Content,Channel:n}),Promise.resolve(t)}},this.Id={Id:9,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"red",Color:"green",Name:"Compare",Description:"Compares the first two characters in the string. If they are the same, exits green. If they are different exits red"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green,r.Red]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),J=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t,n=[];if(e.Content.length<1)t="";else if("<"!==e.Content[0])t=e.Content[0]+e.Content;else{var a=e.Content.indexOf(">");t=e.Content.substring(0,a+1)+e.Content}return n.push({Content:t,Channel:r.Green}),Promise.resolve(n)}},this.Id={Id:6,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"green",Color:"yellow",Name:"Copy",Description:"Copies the first character of the string and puts it in front of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),X=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t,n=[];if(e.Content.length<1)t="";else if("<"!==e.Content[0])t=e.Content.substring(1);else{var a=e.Content.indexOf(">");t=e.Content.substring(a+1)}return n.push({Content:t,Channel:r.Green}),Promise.resolve(n)}},this.Id={Id:7,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"red",Color:"red",Name:"Delete",Description:"Deletes the first character of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),Z=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.Id={Id:0,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"white",BorderColor:"green",Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),Q=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[],n="";if(e.Content.length>0){var a=e.Content[0];n=a>="0"&&a<="8"||a>="a"&&a<"z"||a>="A"&&a<"Z"?String.fromCharCode(a.charCodeAt(0)+1)+e.Content.slice(1):"9"===a?"0"+e.Content.slice(1):"z"===a?"a"+e.Content.slice(1):"Z"===a?"A"+e.Content.slice(1):e.Content}return t.push({Content:n,Channel:r.Green}),Promise.resolve(t)}},this.Id={Id:12,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"DodgerBlue",Color:"MediumVioletRed",Name:"Increment",Description:"Increases a number in front of the string by 1, makes as letter the next letter in the alphabet. 9 becomes 0, z becomes a. All other starting characters are not changed"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),$=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.Id={Id:5,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"green",BorderColor:"lightgreen",Name:"Move",Description:"Does nothing with the string, only used to get the message to the right place"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),ee=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.Id={Id:1,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"white",BorderColor:"red",Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),te=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t,n=[];if(e.Content.length<2)t=e.Content;else if("<"!==e.Content[0])t=e.Content.substring(1)+e.Content.substring(0,1);else{var a=e.Content.indexOf(">");t=e.Content.substring(a+1)+e.Content.substring(0,a+1)}return n.push({Content:t,Channel:r.Green}),Promise.resolve(n)}},this.Id={Id:8,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"blue",Color:"cyan",Name:"Rotate",Description:"Removes the first character of the string, and adds it to the end of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),ne=function(){function e(){Object(d.a)(this,e),this.greenInput=void 0,this.redInput=void 0}return Object(h.a)(e,[{key:"Act",value:function(e){switch(e.Channel){case r.Green:this.greenInput=e.Content;break;case r.Red:this.redInput=e.Content;break;default:throw Error("Machine does not have inputchannel "+e.Channel)}if(void 0===this.greenInput||void 0===this.redInput)return Promise.resolve([]);var t=this.greenInput.concat(this.redInput);this.greenInput=void 0,this.redInput=void 0;var n=[{Channel:r.Green,Content:t}];return Promise.resolve(n)}}]),e}(),re=function(){function e(){Object(d.a)(this,e),this.Id={Id:14,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return new ne}},{key:"GetType",value:function(){return{Style:{BorderColor:"Orange",Color:"Grey",Name:"Join",Description:"Exits with the input from the green channel before the red channel"},Api:{InputChannels:[r.Green,r.Red],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),ae=function(){function e(){Object(d.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content.slice(0,1),Channel:r.Green}),t.push({Content:e.Content.slice(1),Channel:r.Red}),Promise.resolve(t)}},this.Id={Id:13,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"Orange",Color:"Black",Name:"Split",Description:"The first character exits green, the other characters exit red"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green,r.Red]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),ie=function(){function e(){Object(d.a)(this,e),this.machines=void 0,this.machines=[],this.init()}return Object(h.a)(e,[{key:"init",value:function(){this.machines=[],this.machines.push(new Z),this.machines.push(new ee),this.machines.push(new $),this.machines.push(new J),this.machines.push(new X),this.machines.push(new te),this.machines.push(new K),this.machines.push(new Y),this.machines.push(new _),this.machines.push(new Q),this.machines.push(new ae),this.machines.push(new re)}},{key:"FindMachine",value:function(e){var t=this.machines.find((function(t){return t.Id.Id===e.Id&&t.Id.Type===e.Type}));if(void 0===t)throw new Error("No default machine found with id "+e.Id);return t}},{key:"GetActor",value:function(e){if("Default"===e.Type)return this.FindMachine(e).GetActor();var t=be().CustomMachines.machines.find((function(t){return t.Id===e.Id}));if(void 0===t)throw new Error("No custom machine found with id "+e.Id);return this.CreateCustomActor(t.Setup)}},{key:"GetMachineType",value:function(e){if("Default"===e.Type)return this.FindMachine(e).GetType();var t=be().CustomMachines.machines.find((function(t){return t.Id===e.Id}));if(void 0===t)throw new Error("No custom machine found with id "+e.Id);return t}},{key:"GetAllMachines",value:function(){return this.machines.map((function(e){return e.Id}))}},{key:"CreateCustomActor",value:function(e){return{Act:function(t){var n=function(e){var t=e.indexOf("*");if(-1!==t){var n=function(){for(var n=[],r=0;-1!==(r=e.indexOf("<",r));){var a=e.indexOf(">",r),i=e.substring(r+1,a);n.push(parseInt(i,10)),r=a}for(var o=0;n.some((function(e){return e===o}));)o++;var c=e;do{c=c.substring(0,t)+"<"+o+">"+c.substring(t+1),t=c.indexOf("*")}while(-1!==t);return{v:[c,o]}}();if("object"===typeof n)return n.v}return[e,-1]}(t.Content),r=Object(V.a)(n,2),a=r[0],i=r[1],o={Content:a,Channel:t.Channel};return new se(e,!1).RunInput(o).then((function(e){return e.map((function(e){return{Channel:e.Channel,Content:H(e.Content,i)}}))}))}}}}],[{key:"GetStore",value:function(){return void 0===e.machineStore&&(e.machineStore=new e),e.machineStore}}]),e}();ie.machineStore=void 0;function oe(e){return{type:"ClearTestOutputActionType",testId:e}}function ce(e){return{type:"SetMessagesActionType",messages:e}}var se=function(){function e(t,n){Object(d.a)(this,e),this.setup=void 0,this.machines=[],this.store=void 0,this.outputs=[],this.activeSetup=void 0,this.setup=t,this.activeSetup=n,this.store=ie.GetStore(),this.HandleNextMessages=this.HandleNextMessages.bind(this),this.CalculateNextMessages=this.CalculateNextMessages.bind(this),this.RunInput=this.RunInput.bind(this),this.RunComputation=this.RunComputation.bind(this),this.SetDelay=this.SetDelay.bind(this)}return Object(h.a)(e,[{key:"NewSetup",value:function(e){this.setup=e}},{key:"GetStartMachines",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,i=this.setup.MachineInstances[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.MachineId.Id<4&&"Default"===o.MachineId.Type&&e.push(o)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"GetStartMachine",value:function(e){var t=0;switch(e){case r.Green:t=0;break;case r.Red:t=1;break;case r.Blue:t=2;break;case r.Yellow:t=3}return this.setup.MachineInstances.find((function(e){return e.MachineId.Id===t&&"Default"===e.MachineId.Type}))}},{key:"CalculateExits",value:function(){var e=this,t=[],n=[],r=this.GetStartMachines();n=n.concat(r.map((function(e){return{Cell:e.Cell,Direction:e.Channels[0].Direction}})));for(var a=function(r){for(var a=n[r].Cell,i=void 0,o=void 0;void 0===i&&void 0!==(o=e.Move(a,n[r].Direction));)a=o,i=e.setup.MachineInstances.find((function(e){return e.Cell.Column===a.Column&&e.Cell.Row===a.Row}));if(void 0===o)return t.push({Direction:n[r].Direction,Cell:a}),"continue";n.some((function(e){return e.Cell.Column===a.Column&&e.Cell.Row===a.Row}))||(n=n.concat(i.Channels.filter((function(e){return"ShouldExist"!==e.Status})).map((function(e){return{Cell:a,Direction:e.Direction}}))))},i=0;i<n.length;i++)a(i);return t}},{key:"RunComputation",value:function(t,n){var r,a,i,o,c,s,u,l,d=this;return W.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(e.StopComputation(),this.machines=[],n.dispatch(oe(t)),void 0!==(r=n.getState().Level.Tests.find((function(e){return e.id===t})))){h.next=8;break}return h.abrupt("return",Promise.resolve([]));case 8:a=[],i=!0,o=!1,c=void 0,h.prev=12,s=function(){var e,r;return W.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=l.value,i.next=3,W.a.awrap(d.RunInput(e,n,t,e.Order).catch((function(e){return Promise.reject(e)})));case 3:r=i.sent,a=a.concat(r.map((function(t){return{Content:t.Content,Channel:t.Channel,Order:e.Order}})));case 5:case"end":return i.stop()}}))},u=r.inputs[Symbol.iterator]();case 15:if(i=(l=u.next()).done){h.next=21;break}return h.next=18,W.a.awrap(s());case 18:i=!0,h.next=15;break;case 21:h.next=27;break;case 23:h.prev=23,h.t0=h.catch(12),o=!0,c=h.t0;case 27:h.prev=27,h.prev=28,i||null==u.return||u.return();case 30:if(h.prev=30,!o){h.next=33;break}throw c;case 33:return h.finish(30);case 34:return h.finish(27);case 35:return h.abrupt("return",Promise.resolve(a));case 36:case"end":return h.stop()}}),null,this,[[12,23,27,35],[28,,30,34]])}},{key:"RunInput",value:function(e,t,n,r){var a=[],i=this.GetStartMachine(e.Channel);if(void 0!==i){var o=i.Channels[0].Direction,c={Content:e.Content,Direction:o,Cell:i.Cell};a.push(c)}return void 0!==t&&this.activeSetup&&t.getState().PlaySettings.ShowAnimations&&t.dispatch(ce(a)),this.OrderNewCalculation({messageLocations:a,store:t,testId:n,order:r})}},{key:"SetDelay",value:function(t,n,r){return new Promise((function(a,i){var o=window.setTimeout((function(){return t(n).then(a).catch(i)}),r);e.cancelComputation=function(){window.clearTimeout(o),i("Computation cancelled")}}))}},{key:"HandleNextMessages",value:function(e){var t,n,r,a,i,o,c,s,u,l;return W.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,W.a.awrap(this.CalculateNextMessages(e.messageLocations));case 2:if(t=d.sent,n=Object(V.a)(t,2),r=n[0],(a=n[1]).length>0&&(this.outputs=this.outputs.concat(a)),void 0===e.store){d.next=27;break}for(i=!0,o=!1,c=void 0,d.prev=11,s=a[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)l=u.value,e.store.dispatch((h={Channel:l.Channel,Content:l.Content,Order:e.order},p=e.testId,{type:"ReportOutputActionType",outputMessage:h,testId:p}));d.next=19;break;case 15:d.prev=15,d.t0=d.catch(11),o=!0,c=d.t0;case 19:d.prev=19,d.prev=20,i||null==s.return||s.return();case 22:if(d.prev=22,!o){d.next=25;break}throw c;case 25:return d.finish(22);case 26:return d.finish(19);case 27:if(void 0!==e.store&&this.activeSetup&&e.store.getState().PlaySettings.ShowAnimations&&e.store.dispatch(ce(r)),!(r.length>0)){d.next=32;break}return d.abrupt("return",this.OrderNewCalculation(Object(O.a)({},e,{messageLocations:r})));case 32:return d.abrupt("return",Promise.resolve(this.outputs));case 33:case"end":return d.stop()}var h,p}),null,this,[[11,15,19,27],[20,,22,26]])}},{key:"OrderNewCalculation",value:function(t){if(e.stepCount++,this.activeSetup||e.stepCount%1e5===0){var n=void 0!==t.store&&t.store.getState().PlaySettings.ShowAnimations?100*t.store.getState().PlaySettings.StepTime:0;return this.SetDelay(this.HandleNextMessages,t,n)}return this.HandleNextMessages(t)}},{key:"CalculateNextMessages",value:function(e){var t,n,a,i,o,c,s,u,l,d,h,p,C,f=this;return W.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:t=[],n=[],a=!0,i=!1,o=void 0,m.prev=5,c=function(){var e,a,i,o,c,s,l,d,h,p,C,m,b,v,y;return W.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:e=u.value,a=void 0,i=e.Cell;case 3:if(void 0!==a){O.next=10;break}if(void 0!==(i=f.Move(i,e.Direction))){O.next=7;break}return O.abrupt("break",10);case 7:a=f.setup.MachineInstances.find((function(e){return e.Cell.Column===i.Column&&e.Cell.Row===i.Row})),O.next=3;break;case 10:if(void 0!==i){O.next=13;break}return t.push({Cell:void 0,Direction:e.Direction,Content:e.Content}),O.abrupt("return","continue");case 13:if("Valid"===a.Status){O.next=15;break}return O.abrupt("return",{v:Promise.reject("Encountered invalid machine, check your machines")});case 15:return o=r.Green,void 0!==(c=a.InputChannels.find((function(t){return t.Direction===e.Direction})))&&(o=c.Channel),void 0===(s=f.machines.find((function(e){return e.id===a.Id})))&&(l=f.setup.MachineInstances.find((function(e){return e.Id===a.Id})),s={id:l.Id,actor:f.store.GetActor(l.MachineId)},f.machines.push(s)),d=s.actor,O.next=23,W.a.awrap(d.Act({Content:e.Content,Channel:o}));case 23:for(h=O.sent,p=!0,C=!1,m=void 0,O.prev=27,b=function(){var e=y.value,t=a.Channels.find((function(t){return t.Channel===e.Channel}));if(void 0===t)throw Error("Channelmap "+e.Channel+"undefined");var r={Cell:a.Cell,Content:e.Content,Direction:t.Direction};n.push(r)},v=h[Symbol.iterator]();!(p=(y=v.next()).done);p=!0)b();O.next=36;break;case 32:O.prev=32,O.t0=O.catch(27),C=!0,m=O.t0;case 36:O.prev=36,O.prev=37,p||null==v.return||v.return();case 39:if(O.prev=39,!C){O.next=42;break}throw m;case 42:return O.finish(39);case 43:return O.finish(36);case 44:case"end":return O.stop()}}),null,null,[[27,32,36,44],[37,,39,43]])},s=e[Symbol.iterator]();case 8:if(a=(u=s.next()).done){m.next=21;break}return m.next=11,W.a.awrap(c());case 11:l=m.sent,m.t0=l,m.next="continue"===m.t0?15:16;break;case 15:return m.abrupt("continue",18);case 16:if("object"!==typeof l){m.next=18;break}return m.abrupt("return",l.v);case 18:a=!0,m.next=8;break;case 21:m.next=27;break;case 23:m.prev=23,m.t1=m.catch(5),i=!0,o=m.t1;case 27:m.prev=27,m.prev=28,a||null==s.return||s.return();case 30:if(m.prev=30,!i){m.next=33;break}throw o;case 33:return m.finish(30);case 34:return m.finish(27);case 35:d=[],h=0,p=t;case 37:if(!(h<p.length)){m.next=53;break}C=p[h],m.t2=C.Direction,m.next=m.t2===j.Up?42:m.t2===j.Down?44:m.t2===j.Right?46:m.t2===j.Left?48:50;break;case 42:return d.push({Content:C.Content,Channel:r.Green}),m.abrupt("break",50);case 44:return d.push({Content:C.Content,Channel:r.Red}),m.abrupt("break",50);case 46:return d.push({Content:C.Content,Channel:r.Blue}),m.abrupt("break",50);case 48:return d.push({Content:C.Content,Channel:r.Yellow}),m.abrupt("break",50);case 50:h++,m.next=37;break;case 53:return m.abrupt("return",[n,d]);case 54:case"end":return m.stop()}}),null,null,[[5,23,27,35],[28,,30,34]])}},{key:"Move",value:function(e,t){switch(t){case j.Down:if(e.Row===this.setup.NumberOfRows-1)return;return{Column:e.Column,Row:e.Row+1};case j.Up:if(0===e.Row)return;return{Column:e.Column,Row:e.Row-1};case j.Right:if(e.Column===this.setup.NumberOfColumns-1)return;return{Column:e.Column+1,Row:e.Row};case j.Left:if(0===e.Column)return;return{Column:e.Column-1,Row:e.Row}}}}],[{key:"StopComputation",value:function(){e.cancelComputation&&(e.cancelComputation(),e.cancelComputation=void 0),e.stepCount=0}}]),e}();function ue(e,t){e.startsWith("#")||(e=function(e){var t="#FFFFFF";switch(e.toLowerCase()){case"aliceblue":t="#F0F8FF";break;case"antiquewhite":t="#FAEBD7";break;case"aqua":t="#00FFFF";break;case"aquamarine":t="#7FFFD4";break;case"azure":t="#F0FFFF";break;case"beige":t="#F5F5DC";break;case"bisque":t="#FFE4C4";break;case"black":t="#000000";break;case"blanchedalmond":t="#FFEBCD";break;case"blue":t="#0000FF";break;case"blueviolet":t="#8A2BE2";break;case"brown":t="#A52A2A";break;case"burlywood":t="#DEB887";break;case"cadetblue":t="#5F9EA0";break;case"chartreuse":t="#7FFF00";break;case"chocolate":t="#D2691E";break;case"coral":t="#FF7F50";break;case"cornflowerblue":t="#6495ED";break;case"cornsilk":t="#FFF8DC";break;case"crimson":t="#DC143C";break;case"cyan":t="#00FFFF";break;case"darkblue":t="#00008B";break;case"darkcyan":t="#008B8B";break;case"darkgoldenrod":t="#B8860B";break;case"darkgray":case"darkgrey":t="#A9A9A9";break;case"darkgreen":t="#006400";break;case"darkkhaki":t="#BDB76B";break;case"darkmagenta":t="#8B008B";break;case"darkolivegreen":t="#556B2F";break;case"darkorange":t="#FF8C00";break;case"darkorchid":t="#9932CC";break;case"darkred":t="#8B0000";break;case"darksalmon":t="#E9967A";break;case"darkseagreen":t="#8FBC8F";break;case"darkslateblue":t="#483D8B";break;case"darkslategray":case"darkslategrey":t="#2F4F4F";break;case"darkturquoise":t="#00CED1";break;case"darkviolet":t="#9400D3";break;case"deeppink":t="#FF1493";break;case"deepskyblue":t="#00BFFF";break;case"dimgray":case"dimgrey":t="#696969";break;case"dodgerblue":t="#1E90FF";break;case"firebrick":t="#B22222";break;case"floralwhite":t="#FFFAF0";break;case"forestgreen":t="#228B22";break;case"fuchsia":t="#FF00FF";break;case"gainsboro":t="#DCDCDC";break;case"ghostwhite":t="#F8F8FF";break;case"gold":t="#FFD700";break;case"goldenrod":t="#DAA520";break;case"gray":case"grey":t="#808080";break;case"green":t="#008000";break;case"greenyellow":t="#ADFF2F";break;case"honeydew":t="#F0FFF0";break;case"hotpink":t="#FF69B4";break;case"indianred\xa0":t="#CD5C5C";break;case"indigo\xa0":t="#4B0082";break;case"ivory":t="#FFFFF0";break;case"khaki":t="#F0E68C";break;case"lavender":t="#E6E6FA";break;case"lavenderblush":t="#FFF0F5";break;case"lawngreen":t="#7CFC00";break;case"lemonchiffon":t="#FFFACD";break;case"lightblue":t="#ADD8E6";break;case"lightcoral":t="#F08080";break;case"lightcyan":t="#E0FFFF";break;case"lightgoldenrodyellow":t="#FAFAD2";break;case"lightgray":case"lightgrey":t="#D3D3D3";break;case"lightgreen":t="#90EE90";break;case"lightpink":t="#FFB6C1";break;case"lightsalmon":t="#FFA07A";break;case"lightseagreen":t="#20B2AA";break;case"lightskyblue":t="#87CEFA";break;case"lightslategray":case"lightslategrey":t="#778899";break;case"lightsteelblue":t="#B0C4DE";break;case"lightyellow":t="#FFFFE0";break;case"lime":t="#00FF00";break;case"limegreen":t="#32CD32";break;case"linen":t="#FAF0E6";break;case"magenta":t="#FF00FF";break;case"maroon":t="#800000";break;case"mediumaquamarine":t="#66CDAA";break;case"mediumblue":t="#0000CD";break;case"mediumorchid":t="#BA55D3";break;case"mediumpurple":t="#9370DB";break;case"mediumseagreen":t="#3CB371";break;case"mediumslateblue":t="#7B68EE";break;case"mediumspringgreen":t="#00FA9A";break;case"mediumturquoise":t="#48D1CC";break;case"mediumvioletred":t="#C71585";break;case"midnightblue":t="#191970";break;case"mintcream":t="#F5FFFA";break;case"mistyrose":t="#FFE4E1";break;case"moccasin":t="#FFE4B5";break;case"navajowhite":t="#FFDEAD";break;case"navy":t="#000080";break;case"oldlace":t="#FDF5E6";break;case"olive":t="#808000";break;case"olivedrab":t="#6B8E23";break;case"orange":t="#FFA500";break;case"orangered":t="#FF4500";break;case"orchid":t="#DA70D6";break;case"palegoldenrod":t="#EEE8AA";break;case"palegreen":t="#98FB98";break;case"paleturquoise":t="#AFEEEE";break;case"palevioletred":t="#DB7093";break;case"papayawhip":t="#FFEFD5";break;case"peachpuff":t="#FFDAB9";break;case"peru":t="#CD853F";break;case"pink":t="#FFC0CB";break;case"plum":t="#DDA0DD";break;case"powderblue":t="#B0E0E6";break;case"purple":t="#800080";break;case"rebeccapurple":t="#663399";break;case"red":t="#FF0000";break;case"rosybrown":t="#BC8F8F";break;case"royalblue":t="#4169E1";break;case"saddlebrown":t="#8B4513";break;case"salmon":t="#FA8072";break;case"sandybrown":t="#F4A460";break;case"seagreen":t="#2E8B57";break;case"seashell":t="#FFF5EE";break;case"sienna":t="#A0522D";break;case"silver":t="#C0C0C0";break;case"skyblue":t="#87CEEB";break;case"slateblue":t="#6A5ACD";break;case"slategray":case"slategrey":t="#708090";break;case"snow":t="#FFFAFA";break;case"springgreen":t="#00FF7F";break;case"steelblue":t="#4682B4";break;case"tan":t="#D2B48C";break;case"teal":t="#008080";break;case"thistle":t="#D8BFD8";break;case"tomato":t="#FF6347";break;case"turquoise":t="#40E0D0";break;case"violet":t="#EE82EE";break;case"wheat":t="#F5DEB3";break;case"white":t="#FFFFFF";break;case"whitesmoke":t="#F5F5F5";break;case"yellow":t="#FFFF00";break;case"yellowgreen":t="#9ACD32"}return t}(e));try{var n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(5,7),16),a=parseInt(e.substring(3,5),16);return"rgba(".concat(n,",").concat(a,",").concat(r,",").concat(t,")")}catch(i){return"white"}}function le(){switch(Math.floor(148*Math.random())){case 0:return"AliceBlue";case 1:return"AntiqueWhite";case 2:return"Aqua";case 3:return"Aquamarine";case 4:return"Azure";case 5:return"Beige";case 6:return"Bisque";case 7:return"Black";case 8:return"BlanchedAlmond";case 9:return"Blue";case 10:return"BlueViolet";case 11:return"Brown";case 12:return"BurlyWood";case 13:return"CadetBlue";case 14:return"Chartreuse";case 15:return"Chocolate";case 16:return"Coral";case 17:return"CornflowerBlue";case 18:return"Cornsilk";case 19:return"Crimson";case 20:return"Cyan";case 21:return"DarkBlue";case 22:return"DarkCyan";case 23:return"DarkGoldenRod";case 24:return"DarkGray";case 25:return"DarkGrey";case 26:return"DarkGreen";case 27:return"DarkKhaki";case 28:return"DarkMagenta";case 29:return"DarkOliveGreen";case 30:return"DarkOrange";case 31:return"DarkOrchid";case 32:return"DarkRed";case 33:return"DarkSalmon";case 34:return"DarkSeaGreen";case 35:return"DarkSlateBlue";case 36:return"DarkSlateGray";case 37:return"DarkSlateGrey";case 38:return"DarkTurquoise";case 39:return"DarkViolet";case 40:return"DeepPink";case 41:return"DeepSkyBlue";case 42:return"DimGray";case 43:return"DimGrey";case 44:return"DodgerBlue";case 45:return"FireBrick";case 46:return"FloralWhite";case 47:return"ForestGreen";case 48:return"Fuchsia";case 49:return"Gainsboro";case 50:return"GhostWhite";case 51:return"Gold";case 52:return"GoldenRod";case 53:return"Gray";case 54:return"Grey";case 55:return"Green";case 56:return"GreenYellow";case 57:return"HoneyDew";case 58:return"HotPink";case 59:return"IndianRed\xa0";case 60:return"Indigo\xa0";case 61:return"Ivory";case 62:return"Khaki";case 63:return"Lavender";case 64:return"LavenderBlush";case 65:return"LawnGreen";case 66:return"LemonChiffon";case 67:return"LightBlue";case 68:return"LightCoral";case 69:return"LightCyan";case 70:return"LightGoldenRodYellow";case 71:return"LightGray";case 72:return"LightGrey";case 73:return"LightGreen";case 74:return"LightPink";case 75:return"LightSalmon";case 76:return"LightSeaGreen";case 77:return"LightSkyBlue";case 78:return"LightSlateGray";case 79:return"LightSlateGrey";case 80:return"LightSteelBlue";case 81:return"LightYellow";case 82:return"Lime";case 83:return"LimeGreen";case 84:return"Linen";case 85:return"Magenta";case 86:return"Maroon";case 87:return"MediumAquaMarine";case 88:return"MediumBlue";case 89:return"MediumOrchid";case 90:return"MediumPurple";case 91:return"MediumSeaGreen";case 92:return"MediumSlateBlue";case 93:return"MediumSpringGreen";case 94:return"MediumTurquoise";case 95:return"MediumVioletRed";case 96:return"MidnightBlue";case 97:return"MintCream";case 98:return"MistyRose";case 99:return"Moccasin";case 100:return"NavajoWhite";case 101:return"Navy";case 102:return"OldLace";case 103:return"Olive";case 104:return"OliveDrab";case 105:return"Orange";case 106:return"OrangeRed";case 107:return"Orchid";case 108:return"PaleGoldenRod";case 109:return"PaleGreen";case 110:return"PaleTurquoise";case 111:return"PaleVioletRed";case 112:return"PapayaWhip";case 113:return"PeachPuff";case 114:return"Peru";case 115:return"Pink";case 116:return"Plum";case 117:return"PowderBlue";case 118:return"Purple";case 119:return"RebeccaPurple";case 120:return"Red";case 121:return"RosyBrown";case 122:return"RoyalBlue";case 123:return"SaddleBrown";case 124:return"Salmon";case 125:return"SandyBrown";case 126:return"SeaGreen";case 127:return"SeaShell";case 128:return"Sienna";case 129:return"Silver";case 130:return"SkyBlue";case 131:return"SlateBlue";case 132:return"SlateGray";case 133:return"SlateGrey";case 134:return"Snow";case 135:return"SpringGreen";case 136:return"SteelBlue";case 137:return"Tan";case 138:return"Teal";case 139:return"Thistle";case 140:return"Tomato";case 141:return"Turquoise";case 142:return"Violet";case 143:return"Wheat";case 144:return"White";case 145:return"WhiteSmoke";case 146:return"Yellow";case 147:return"YellowGreen";default:return"White"}}se.cancelComputation=void 0,se.stepCount=void 0;var de={machines:[],idSeed:0,activeMachineId:void 0,deletedMachines:[]},he=Object(v.a)((function(e,t){switch(t.type){case"AddNewMachineActionType":e.idSeed++;var n={Id:e.idSeed,DirectlyDependingOn:[],Style:{BorderColor:le(),Color:le(),Name:"NewMachine",Description:"Enter your description here"},Api:{InputChannels:[r.Green],OutputChannels:[]},Setup:{NumberOfRows:5,NumberOfColumns:6,MachineInstances:[{MachineId:{Id:0,Type:"Default"},Channels:[{Direction:j.Right,Channel:r.Green,Status:"Valid"}],InputChannels:[],Id:1,Cell:{Row:2,Column:0},Status:"Valid"}]},ExitCells:[{Cell:{Row:2,Column:5},Direction:j.Right}],Messages:[],DependingOn:[{Id:0,Type:"Default"}],DependingOnDeleted:[],Status:"Valid"};e.machines.push(n),e.activeMachineId=e.idSeed;break;case"LoadCustomMachineActionType":if(void 0===e.machines.find((function(e){return e.Id===t.machineId})))throw Error("Loading an unknown machine, with id "+t.machineId);return void(e.activeMachineId=t.machineId);case"DeleteMachineActionType":e.deletedMachines.push(e.machines.find((function(e){return e.Id===t.id}))),e.machines=e.machines.filter((function(e){return e.Id!==t.id})),e.activeMachineId===t.id&&(e.activeMachineId=void 0);var a=e.machines.filter((function(e){return e.DirectlyDependingOn.some((function(e){return e===t.id}))})),i=!0,o=!1,c=void 0;try{for(var s,u=a[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,d=l.Setup.MachineInstances.map((function(e){return z(e.MachineId,{Id:t.id,Type:"Custom"})?Object(O.a)({},e,{Status:"Deleted"}):e}));l.Setup.MachineInstances=d,l.DirectlyDependingOn=l.DirectlyDependingOn.filter((function(e){return e!==t.id}))}}catch(y){o=!0,c=y}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}var h=e.machines.filter((function(e){return e.DependingOn.some((function(e){return e.Id===t.id}))})),p=!0,C=!1,f=void 0;try{for(var m,b=h[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var v=m.value;v.DependingOn=v.DependingOn.filter((function(e){return!z(e,{Id:t.id,Type:"Custom"})})),v.DependingOnDeleted.push(t.id)}}catch(y){C=!0,f=y}finally{try{p||null==b.return||b.return()}finally{if(C)throw f}}break;case"LoadLevelActionType":return e.activeMachineId=void 0,e;default:if(void 0===e.activeMachineId)return e;U(e.machines.find((function(t){return t.Id===e.activeMachineId})),t)}switch(t.type){case"AddNewMachineActionType":case"ChannelChangedActionType":case"DeleteMachineActionType":case"FixMachineActionType":case"MachineAddedActionType":case"MachineMovedActionType":case"MachineRemovedActionType":case"SetColumnNumberActionType":case"SetRowNumberActionType":void 0!==e.activeMachineId&&pe(e)}}),de),pe=function(e){return function(e){var t=[],n=[],r=[],a=e.machines.find((function(t){return t.Id===e.activeMachineId})),i=!0,o=!1,c=void 0;try{for(var s,u=function(){var a=s.value;if("Deleted"===a.Status)return r.push(a.MachineId.Id),"continue";if("Custom"===a.MachineId.Type&&(t.some((function(e){return e===a.MachineId.Id}))||t.push(a.MachineId.Id)),!n.some((function(e){return e.Id===a.MachineId.Id&&e.Type===a.MachineId.Type}))&&(n.push(a.MachineId),"Custom"===a.MachineId.Type)){var i=e.machines.find((function(e){return e.Id===a.MachineId.Id})),o=!0,c=!1,u=void 0;try{for(var l,d=function(){var e=l.value;n.some((function(t){return t.Id===e.Id&&t.Type===e.Type}))||n.push(e)},h=i.DependingOn[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)d()}catch(p){c=!0,u=p}finally{try{o||null==h.return||h.return()}finally{if(c)throw u}}}},l=a.Setup.MachineInstances[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(d){o=!0,c=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw c}}a.DependingOn=n,a.DirectlyDependingOn=t}(e),function(e){var t=e.machines.find((function(t){return t.Id===e.activeMachineId})),n=new se(t.Setup,!0);t.ExitCells=n.CalculateExits();var a=t.ExitCells.map((function(e){switch(e.Direction){case j.Right:return r.Blue;case j.Up:return r.Green;case j.Down:return r.Red;case j.Left:return r.Yellow;default:throw Error("Invalid value for direction")}})),i=[],o=!0,c=!1,s=void 0;try{for(var u,l=function(){var e=u.value;i.some((function(t){return t===e}))||i.push(e)},d=a[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)l()}catch(f){c=!0,s=f}finally{try{o||null==d.return||d.return()}finally{if(c)throw s}}var h={InputChannels:n.GetStartMachines().map((function(e){switch(e.MachineId.Id){case 0:return r.Green;case 1:return r.Red;case 2:return r.Blue;case 3:return r.Yellow;default:throw Error("Unknown startmachine "+e.MachineId.Id)}})),OutputChannels:i};p=h,C=t.Api,(p.InputChannels.length!==C.InputChannels.length||p.OutputChannels.length!==C.OutputChannels.length||p.InputChannels.some((function(e){return!C.InputChannels.some((function(t){return e===t}))}))||p.OutputChannels.some((function(e){return!C.OutputChannels.some((function(t){return e===t}))})))&&function(e,t){var n=e.activeMachineId,r=e.machines.filter((function(e){return e.DirectlyDependingOn.some((function(e){return e===n}))})),a=!0,i=!1,o=void 0;try{for(var c,s=r[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,l=u.Setup.MachineInstances.filter((function(e){return z(e.MachineId,{Id:n,Type:"Custom"})})),d=!0,h=!1,p=void 0;try{for(var C,m=l.filter((function(e){return"Deleted"!==e.Status}))[Symbol.iterator]();!(d=(C=m.next()).done);d=!0){var b=C.value,v=!0,y=!1,O=void 0;try{for(var g,k=function(){var e=g.value,t=b.Channels.find((function(t){return t.Channel===e}));void 0===t?b.Channels.push({Channel:e,Direction:j.Up,Status:"ShouldExist"}):"ShouldNotExist"===t.Status&&(t.Status="Valid")},I=t.OutputChannels[Symbol.iterator]();!(v=(g=I.next()).done);v=!0)k()}catch(f){y=!0,O=f}finally{try{v||null==I.return||I.return()}finally{if(y)throw O}}for(var w=function(e){var n=b.Channels[e];t.OutputChannels.some((function(e){return e===n.Channel}))||("Valid"===n.Status?n.Status="ShouldNotExist":"ShouldExist"===n.Status&&(b.Channels.splice(e,1),e--)),S=e},S=0;S<b.Channels.length;S++)w(S);b.Status=b.Channels.every((function(e){return"Valid"===e.Status}))?"Valid":"ChannelsInvalid"}}catch(f){h=!0,p=f}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}Ce(u)}}catch(f){i=!0,o=f}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}}(e,h);var p,C;t.Api=h,Ce(t)}(e),e};function Ce(e){e.Setup.MachineInstances.some((function(e){return"Valid"!==e.Status}))?e.Status="Invalid":e.Status="Valid"}var fe=Object(b.b)({PlaySettings:y,CustomMachines:he,Level:N});var me=Object(b.c)((function(e,t){var n=fe(e,t);return window.localStorage.setItem("State",JSON.stringify(n)),n}),function(){var e=window.localStorage.getItem("State");return null===e||""===e?void 0:JSON.parse(e)}(),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),be=function(){return me.getState()};function ve(e){if(void 0!==e.CustomMachines.activeMachineId){var t=e.CustomMachines.machines.find((function(t){return t.Id===e.CustomMachines.activeMachineId}));if(void 0===t)throw Error("Getting an unknown machine, with id "+e.CustomMachines.activeMachineId);return t}}var ye=function(e){var t={marginLeft:5,marginRight:5};return i.a.createElement("div",null,i.a.createElement("button",{style:t,onClick:function(){e.valueChanged(e.value-1)}},"-"),i.a.createElement("label",null,e.value),i.a.createElement("button",{style:t,onClick:function(){e.valueChanged(e.value+1)}},"+"))},Oe=Object(s.b)((function(e){return{ShowAnimations:e.PlaySettings.ShowAnimations,StepTime:e.PlaySettings.StepTime}}),{UpdateStepTime:function(e){return{type:"UpdateStepTime",stepTime:e}},UpdateShowAnimations:function(e){return{type:"UpdateShowAnimations",show:e}}})((function(e){return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("label",{title:"Show animations, will calculate as fast as possible when turned of"},"Show animations"),i.a.createElement("button",{onClick:function(){e.UpdateShowAnimations(!e.ShowAnimations)}},e.ShowAnimations?"On":"Off")),e.ShowAnimations&&i.a.createElement("div",null,i.a.createElement("label",{title:"Step time in tenths of seconds, lower for faster animations"},"Step Time"),i.a.createElement(ye,{value:e.StepTime,valueChanged:e.UpdateStepTime})))}));function ge(e,t){return e.Column===t.Column&&e.Row===t.Row}var ke=function e(){Object(d.a)(this,e)};ke.CellSize=100;var Ie="MachineInstance",we="NewMachine",Se=function(e){var t;if(""===e)t="<Empty>";else{t=e;for(var n=0;-1!==(n=t.indexOf("<",n));){var r=t.indexOf(">",n);t=t.substring(0,n)+"?"+t.substring(r+1)}}return t},De=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(C.a)(t).call(this,e))).onClicked=n.onClicked.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=ke.CellSize-2,t={position:"absolute",height:e/50*4,width:e/50*19,marginLeft:e/50*27.02,marginTop:e/50*22.98,backgroundColor:this.props.ChannelMap.Channel,borderStyle:"solid",borderWidth:"0.04px",pointerEvents:"visible"};switch(this.props.ChannelMap.Status){case"ShouldExist":t.opacity=.5,t.backgroundColor="white";break;case"ShouldNotExist":t.opacity=.4}var n="";switch(this.props.ChannelMap.Direction){case j.Down:n="rotate(90deg)";break;case j.Left:n="rotate(180deg)";break;case j.Up:n="rotate(270deg)";break;case j.Right:n="rotate(0deg)"}var r={transform:n,height:e,width:e,position:"absolute",pointerEvents:"none"};return i.a.createElement("div",{style:r},i.a.createElement("div",{style:t,onClick:this.onClicked}))}},{key:"onClicked",value:function(e){if(void 0!==this.props.OnChanged){var t=j.Left;switch(this.props.ChannelMap.Direction){case j.Down:t=j.Left;break;case j.Left:t=j.Up;break;case j.Up:t=j.Right;break;case j.Right:t=j.Down}this.props.OnChanged({Direction:t,Channel:this.props.ChannelMap.Channel,Status:this.props.ChannelMap.Status})}}}]),t}(i.a.Component),xe=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=ke.CellSize/5*3,t=e/10,n={height:this.props.IsDefault?e:.9*e,width:this.props.IsDefault?e:.9*e,backgroundColor:this.props.MachineStyle.Color,borderStyle:"solid",borderColor:this.props.MachineStyle.BorderColor,borderWidth:t,borderRadius:this.props.IsDefault?"50%":"0%"};return i.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:ke.CellSize-2,width:ke.CellSize-2,pointerEvents:"none"}},i.a.createElement("div",{style:n}))}}]),t}(i.a.Component),Me=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(C.a)(t).call(this,e))).onClicked=n.onClicked.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=ke.CellSize-2,t={position:"absolute",backgroundColor:"rgba(0,0,0,0)",pointerEvents:"visible"};switch(this.props.ChannelMap.Status){case"ShouldExist":t.opacity=.5,t.backgroundColor="white";break;case"ShouldNotExist":t.opacity=.4}var n="solid "+.2*e+"px "+this.props.ChannelMap.Channel,r="solid "+.2*e+"px rgba(0,0,0,0)",a="solid 0px rgba(0,0,0,0)";t.borderBottom=a,t.borderLeft=a,t.borderTop=a,t.borderRight=a;var o=.25*e,c=.05*e,s=.75*e;switch(this.props.ChannelMap.Direction){case j.Up:t.borderBottom=n,t.borderLeft=r,t.borderTop=a,t.borderRight=r,t.marginLeft=o,t.marginTop=s,t.height=0,t.width=.1*e;break;case j.Right:t.borderBottom=r,t.borderLeft=n,t.borderTop=r,t.borderRight=a,t.marginLeft=c,t.marginTop=o,t.height=.1*e,t.width=0;break;case j.Down:t.borderBottom=a,t.borderLeft=r,t.borderTop=n,t.borderRight=r,t.marginLeft=o,t.marginTop=c,t.height=0,t.width=.1*e;break;case j.Left:t.borderBottom=r,t.borderLeft=a,t.borderTop=r,t.borderRight=n,t.marginLeft=s,t.marginTop=o,t.height=.1*e,t.width=0}return i.a.createElement("div",{style:t,onClick:this.onClicked})}},{key:"onClicked",value:function(e){if(void 0!==this.props.OnChanged){var t=j.Left;switch(this.props.ChannelMap.Direction){case j.Down:t=j.Left;break;case j.Left:t=j.Up;break;case j.Up:t=j.Right;break;case j.Right:t=j.Down}this.props.OnChanged({Direction:t,Channel:this.props.ChannelMap.Channel,Status:this.props.ChannelMap.Status})}}}]),t}(i.a.Component),Ae=Object(s.b)((function(e,t){var n=ve(e).Setup.MachineInstances.find((function(e){return e.Id===t.machineInstanceId})),r="Default"===n.MachineId.Type?void 0:"Deleted"===n.Status?e.CustomMachines.deletedMachines.find((function(e){return e.Id===n.MachineId.Id})).Style:e.CustomMachines.machines.find((function(e){return e.Id===n.MachineId.Id})).Style;return{MachineInstance:n,MachineInstanceId:t.machineInstanceId,MachineStyle:r}}),(function(e,t){return{ChangeChannel:function(n,r){return e(function(e,t,n){return{type:"ChannelChangedActionType",machineInstanceId:e,channelIndex:t,channel:n}}(t.machineInstanceId,n,r))},ChangeInputChannel:function(n,r){return e(function(e,t,n){return{type:"InputChannelChangedActionType",machineInstanceId:e,channelIndex:t,channel:n}}(t.machineInstanceId,n,r))},OnRemoved:function(){return e({type:"MachineRemovedActionType",machineInstanceId:t.machineInstanceId})},FixMachine:function(){return e({type:"FixMachineActionType",machineInstanceId:t.machineInstanceId})}}}))((function(e){var t,n=Object(u.c)({item:{type:Ie,id:e.MachineInstanceId},end:function(t,n){n.didDrop()||e.OnRemoved()},collect:function(e){return{isDragging:!!e.isDragging()}}}),r=Object(V.a)(n,2)[1],a=e.MachineInstance.Channels.map((function(t,n){return i.a.createElement("div",{key:n},i.a.createElement(De,{OnChanged:function(t){return e.ChangeChannel(n,t)},ChannelMap:t}))})),o=[];e.MachineInstance.InputChannels.length>1&&(o=e.MachineInstance.InputChannels.map((function(t,n){return i.a.createElement("div",{key:n},i.a.createElement(Me,{OnChanged:function(t){return e.ChangeInputChannel(n,t)},ChannelMap:t,IsDefault:"Default"===e.MachineInstance.MachineId.Type}))})));var c={height:ke.CellSize-2,width:ke.CellSize-2,margin:1};switch(e.MachineInstance.Status){case"Deleted":c.borderBottom=ke.CellSize/18+"px dotted red",c.boxSizing="border-box",c.opacity=.4;break;case"ChannelsInvalid":c.borderBottom=ke.CellSize/18+"px dotted orange",c.boxSizing="border-box"}var s=null!==(t=e.MachineStyle)&&void 0!==t?t:ie.GetStore().GetMachineType(e.MachineInstance.MachineId).Style;return i.a.createElement("div",{ref:r,style:c,onClick:function(){"Valid"!==e.MachineInstance.Status&&e.FixMachine()}},o,i.a.createElement("div",{style:{position:"absolute",pointerEvents:"none"}},i.a.createElement(xe,{MachineStyle:s,IsDefault:"Default"===e.MachineInstance.MachineId.Type})),a)})),Te=Object(s.b)((function(e,t){var n=ve(e),r=n.Setup.MachineInstances.find((function(e){return ge(e.Cell,t.cellId)})),a=n.ExitCells.find((function(e){return ge(e.Cell,t.cellId)})),i=n.Messages.find((function(e){return ge(e.Cell,t.cellId)}));return{Exit:void 0===a?void 0:a.Direction,Message:void 0===i?void 0:i.Content,MachineInstanceId:void 0===r?void 0:r.Id}}),{OnNewMachine:function(e,t,n){return{type:"MachineAddedActionType",machineId:e,cell:n,api:t}},OnMovedMachine:function(e,t){return{type:"MachineMovedActionType",machineInstanceId:e,newCell:t}}})((function(e){var t,n=Object(u.d)({accept:[Ie,we],drop:function(t,n){switch(t.type){case Ie:e.OnMovedMachine(n.getItem().id,e.cellId);break;case we:var r=n.getItem(),a=ie.GetStore().GetMachineType(r.id);e.OnNewMachine(r.id,a.Api,e.cellId)}}}),r=Object(V.a)(n,2)[1],a={height:ke.CellSize,width:ke.CellSize,border:"1px solid black",float:"left",marginTop:-1,marginLeft:-1,position:"relative"},o=ke.CellSize/100*20;if(void 0!==e.Exit)switch(e.Exit){case j.Up:a.borderRight="1px solid black",a.borderBottom="1px solid black",a.borderLeft="1px solid black",a.borderTop=o+"px solid green",a.marginTop=-o;break;case j.Down:a.borderRight="1px solid black",a.borderTop="1px solid black",a.borderLeft="1px solid black",a.borderBottom=o+"px solid red",a.marginBottom=1-o;break;case j.Right:a.borderTop="1px solid black",a.borderBottom="1px solid black",a.borderLeft="1px solid black",a.borderRight=o+"px solid blue",a.marginRight=1-o;break;case j.Left:a.borderRight="1px solid black",a.borderBottom="1px solid black",a.borderTop="1px solid black",a.borderLeft=o+"px solid yellow",a.marginLeft=-o}else a.borderRight="1px solid black",a.borderBottom="1px solid black",a.borderLeft="1px solid black",a.borderTop="1px solid black";return void 0!==e.Message&&(t=Se(e.Message)),i.a.createElement("div",{style:a,ref:r},void 0!==t&&t,void 0!==e.MachineInstanceId?i.a.createElement(Ae,{machineInstanceId:e.MachineInstanceId}):"")})),Ee=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.Rows;t++){for(var n=[],r=0;r<this.props.Columns;r++)n.push(i.a.createElement(Te,{key:r,cellId:{Row:t,Column:r}}));e.push(i.a.createElement("div",{key:t,style:{display:"flex",flexDirection:"row",opacity:1}},n))}return i.a.createElement("div",{style:{borderColor:ue(this.props.Style.BorderColor,.4),borderWidth:.2*ke.CellSize,borderStyle:"solid",marginBottom:0}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",backgroundColor:ue(this.props.Style.Color,.3)}},e))}}]),t}(i.a.Component);var Ge,Fe=Object(s.b)((function(e){var t=ve(e);return{Rows:t.Setup.NumberOfRows,Columns:t.Setup.NumberOfColumns,Style:t.Style}}),{})(Ee);!function(e){e[e.NotChecked=0]="NotChecked",e[e.NotFullfilled=1]="NotFullfilled",e[e.Fullfilled=2]="Fullfilled",e[e.NotMatched=3]="NotMatched"}(Ge||(Ge={}));var Re=function(e){var t=function(t){void 0!==e.OnMessageChanged&&e.OnMessageChanged({Content:e.Message.Content,Channel:t.target.value})},n={display:"flex",flexFlow:"row",justifyContent:e.Input?"flex-start":"flex-end",marginBottom:1},r={display:"flex",flexFlow:"row"};switch(e.Status){case Ge.Fullfilled:r.backgroundColor="#d9ffb3",e.Editable&&(r.borderRight="solid green",r.borderBottom="solid green");break;case Ge.NotFullfilled:r.backgroundColor="#ffb3b3";break;case Ge.NotMatched:r.border="solid red",r.backgroundColor="#ffb3b3"}return i.a.createElement("div",{style:n},i.a.createElement("div",{style:r},e.Input&&e.Editable&&i.a.createElement("button",{onClick:e.Remove},"-"),e.Input&&(e.Editable&&e.AllowedInputColors.length>1?i.a.createElement("select",{value:e.Message.Channel,style:{backgroundColor:e.Message.Channel},onChange:t},e.AllowedInputColors.map((function(e,t){return i.a.createElement("option",{value:e,key:t,style:{backgroundColor:e}})}))):i.a.createElement("div",{style:{backgroundColor:e.Message.Channel,width:10}})),e.Editable?i.a.createElement("input",{value:e.Message.Content,onChange:function(t){void 0!==e.OnMessageChanged&&e.OnMessageChanged({Content:t.target.value,Channel:e.Message.Channel})}}):i.a.createElement("label",null,Se(e.Message.Content)),!e.Input&&(e.Editable&&e.AllowedInputColors.length>1?i.a.createElement("select",{value:e.Message.Channel,style:{backgroundColor:e.Message.Channel},onChange:t},e.AllowedInputColors.map((function(e,t){return i.a.createElement("option",{value:e,key:t,style:{backgroundColor:e}})}))):i.a.createElement("div",{style:{backgroundColor:e.Message.Channel,width:10}})),!e.Input&&e.Editable&&i.a.createElement("button",{onClick:e.Remove},"-")))},je=Object(s.b)(void 0,{RemoveTest:function(e){return{type:"RemoveTestActionType",testId:e}},RemoveInput:function(e,t){return{type:"RemoveInputActionType",testId:e,order:t}},RemoveOutput:function(e,t,n){return{type:"RemoveOutputActionType",testId:e,order:t,index:n}},UpdateInput:function(e,t){return{type:"UpdateInputActionType",input:e,testId:t}},UpdateOutput:function(e,t,n){return{type:"UpdateOutputActionType",output:e,testId:t,index:n}},AddInput:function(e){return{type:"AddInputActionType",testId:e}},AddOutput:function(e,t){return{type:"AddOutputActionType",testId:e,order:t}}})((function(e){for(var t=Object(a.useState)(void 0),n=Object(V.a)(t,2),o=n[0],c=n[1],s=e.Test.inputs,u=e.Test.expectedOutputs,l=[],d=0,h=function(t){l.push(i.a.createElement("div",{key:d++,style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement(Re,{Message:s[t],Input:!0,Status:Ge.NotChecked,Editable:e.Test.editable,AllowedInputColors:[r.Green,r.Blue,r.Red,r.Yellow],Remove:function(){return e.RemoveInput(e.Test.id,t)},OnMessageChanged:function(n){return e.UpdateInput(Object(O.a)({},n,{Order:t}),e.Test.id)}}),e.Test.editable&&i.a.createElement("button",{onClick:function(){return e.AddOutput(e.Test.id,t)}},"+")));var n=u.filter((function(e){return e.Order===t})),a=void 0;a=e.Test.actualOutputs.filter((function(e){return e.Order===t}));for(var o=function(o){var c=n[o],s=Ge.NotChecked;if(void 0!==a){var u=a.findIndex((function(e){return e.Channel===c.Channel&&e.Content===c.Content}));u>-1?(s=Ge.Fullfilled,a.splice(u,1)):s=Ge.NotFullfilled}l=l.concat(i.a.createElement(Re,{Message:n[o],Input:!1,key:d++,Status:s,Editable:e.Test.editable,AllowedInputColors:[r.Green,r.Blue,r.Red,r.Yellow],Remove:function(){return e.RemoveOutput(e.Test.id,t,o)},OnMessageChanged:function(n){return e.UpdateOutput(Object(O.a)({},n,{Order:t}),e.Test.id,o)}}))},c=0;c<n.length;c++)o(c);l=l.concat(a.map((function(e){return i.a.createElement(Re,{Message:e,Input:!1,key:d++,Status:Ge.NotMatched,AllowedInputColors:[r.Green],Editable:!1})})))},p=0;p<s.length;p++)h(p);return i.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:0,borderBottom:"solid 0.5px",margin:5}},e.Test.editable&&i.a.createElement("button",{onClick:function(){return e.RemoveTest(e.Test.id)}},"-"),i.a.createElement("button",{onClick:function(){c(void 0);var t=ve(be());void 0!==t&&new se(t.Setup,!0).RunComputation(e.Test.id,me).catch((function(e){c(e.toString())}))}},"Play"),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},void 0!==o&&i.a.createElement("div",{style:{backgroundColor:"red",color:"white"}},i.a.createElement("label",null,o)),l,e.Test.editable&&i.a.createElement("button",{style:{alignSelf:"start"},onClick:function(){return e.AddInput(e.Test.id)}},"+")))})),Be=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.Level.Tests.map((function(e,t){return i.a.createElement(je,{Test:e,key:t})}));return i.a.createElement("div",{style:{padding:10}},i.a.createElement("div",null,i.a.createElement("b",null,this.props.Level.Name),i.a.createElement("br",null),i.a.createElement("i",null,this.props.Level.Description)),e,i.a.createElement("button",{onClick:this.props.AddTest},"Add custom test"))}}]),t}(i.a.Component),Ne=Object(s.b)((function(e){return{Level:e.Level}}),{AddTest:function(){return{type:"AddTestActionType"}}})(Be),Le=Object(s.b)(void 0,{LoadLevel:function(e){return{type:"LoadLevelActionType",name:e}}})((function(e){return i.a.createElement("div",{onClick:function(){return e.LoadLevel(e.Level.Name)}},i.a.createElement("label",{title:e.Level.Description},e.Level.Name))})),Pe=function(){var e=R.GetStore().GetAllLevels().map((function(e,t){return i.a.createElement(Le,{Level:e,key:t})}));return i.a.createElement("div",null,i.a.createElement("b",null,"Challenges:"),e)},Ue=function(e){var t=P(e.MachineType.Api),n=t.inputChannels,r=t.outputChannels.map((function(e,t){return i.a.createElement(De,{key:t,ChannelMap:e})})),a=n.map((function(t,n){return i.a.createElement("div",{key:n},i.a.createElement(Me,{ChannelMap:t,IsDefault:e.IsDefault}))})),o={position:"absolute"},c={height:ke.CellSize,width:ke.CellSize};return i.a.createElement("div",null,i.a.createElement("label",null,e.MachineType.Style.Name),i.a.createElement("div",{style:c},a,i.a.createElement("div",{style:o},i.a.createElement(xe,{MachineStyle:e.MachineType.Style,IsDefault:e.IsDefault})),i.a.createElement("div",{style:o},r)))};function ze(){return{type:"AddNewMachineActionType"}}var Ve=Object(s.b)((function(e,t){return{status:"Default"===t.machine.Type?"Valid":e.CustomMachines.machines.find((function(e){return e.Id===t.machine.Id})).Status}}),{LoadCustomMachine:function(e){return{type:"LoadCustomMachineActionType",machineId:e}},DeleteMachine:function(e){return{type:"DeleteMachineActionType",id:e}}})((function(e){var t=Object(u.c)({item:{type:we,id:e.machine},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(V.a)(t,2)[1],r=Object(a.useState)(!1),o=Object(V.a)(r,2),c=o[0],s=o[1],l=ie.GetStore().GetMachineType(e.machine),d="Default"===e.machine.Type,h="Invalid"===e.status?{borderBottom:ke.CellSize/18+"px dotted orange",boxSizing:"border-box"}:{};return i.a.createElement("div",{ref:n,title:l.Style.Description,onClick:function(){return s(!c)}},i.a.createElement("div",{style:h},i.a.createElement(Ue,{MachineType:l,IsDefault:d})),!d&&c&&i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{onClick:function(t){return e.LoadCustomMachine(e.machine.Id)}},"Edit"),i.a.createElement("button",{onClick:function(t){t.stopPropagation(),e.DeleteMachine(e.machine.Id)}},"Delete")))})),qe=Object(s.b)((function(e){var t=ie.GetStore().GetAllMachines(),n=[],r=[],a=!0,i=!1,o=void 0;try{for(var c,s=function(){var t=c.value;e.Level.AllowedMachines.some((function(e){return t.Id===e}))?n.push(t):r.push(t)},u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)s()}catch(p){i=!0,o=p}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}var l=ve(e);if(void 0!==l){var d=l.Setup.MachineInstances.filter((function(e){return e.MachineId.Id<5&&"Default"===e.MachineId.Type}));n=n.filter((function(e){return!d.some((function(t){return t.MachineId.Id===e.Id&&t.MachineId.Type===e.Type}))}))}var h=e.CustomMachines.machines.filter((function(e){return!e.DependingOn.some((function(e){return"Default"===e.Type&&r.some((function(t){return t.Id===e.Id}))}))})).map((function(e){return{Id:e.Id,Type:"Custom"}}));return{allowedMachines:n=n.concat(h)}}),{AddNewMachine:ze})((function(e){var t=e.allowedMachines.map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement(Ve,{machine:e}))}));return i.a.createElement("div",{style:{display:"flex",flexFlow:"column"}},i.a.createElement("button",{onClick:e.AddNewMachine},"Create new machine"),i.a.createElement("div",{style:{display:"flex",flexFlow:"column wrap",height:8*ke.CellSize}},t))})),We=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"Name"),i.a.createElement("input",{onChange:function(t){return e.props.SetName(t.target.value)},value:this.props.MachineStyle.Name})),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"Description"),i.a.createElement("input",{onChange:function(t){return e.props.SetDescription(t.target.value)},value:this.props.MachineStyle.Description}))),i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"Color"),i.a.createElement("input",{onChange:function(t){return e.props.SetColor(t.target.value)},value:this.props.MachineStyle.Color})),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"BorderColor"),i.a.createElement("input",{onChange:function(t){return e.props.SetBorderColor(t.target.value)},value:this.props.MachineStyle.BorderColor}))))}}]),t}(i.a.Component),He=Object(s.b)((function(e){return{MachineStyle:ve(e).Style}}),{SetName:function(e){return{type:"SetNameActionType",name:e}},SetDescription:function(e){return{type:"SetDescriptionActionType",description:e}},SetColor:function(e){return{type:"SetColorActionType",color:e}},SetBorderColor:function(e){return{type:"SetBorderColorActionType",backgroundColor:e}}})(We),Ye=Object(s.b)((function(e){return{MachineType:ve(e)}}),{})((function(e){return i.a.createElement("div",null,void 0!==e.MachineType&&i.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},i.a.createElement(Ue,{MachineType:e.MachineType,IsDefault:!1}),i.a.createElement(He,null)))})),_e=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(C.a)(t).call(this,e))).showItem=n.showItem.bind(Object(f.a)(n)),n.state={Showing:!1},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"showItem",value:function(){this.setState({Showing:!this.state.Showing})}},{key:"render",value:function(){return i.a.createElement("div",{style:{marginLeft:10}},i.a.createElement("button",{onClick:this.showItem},this.state.Showing?"Hide "+this.props.ItemName:"Show "+this.props.ItemName),this.state.Showing&&i.a.createElement("div",{style:{borderLeft:"solid 0.5px",marginLeft:10,padding:10}},this.props.children))}}]),t}(i.a.Component),Ke=Object(s.b)((function(e){var t=ve(e);return{Rows:t.Setup.NumberOfRows,Columns:t.Setup.NumberOfColumns}}),{SetRowNumber:function(e){return{type:"SetRowNumberActionType",rows:e}},SetColumnNumber:function(e){return{type:"SetColumnNumberActionType",columns:e}}})((function(e){return i.a.createElement("div",null,i.a.createElement("label",null,"Rows:"),i.a.createElement(ye,{value:e.Rows,valueChanged:e.SetRowNumber}),i.a.createElement("label",null,"Columns:"),i.a.createElement(ye,{value:e.Columns,valueChanged:e.SetColumnNumber}))})),Je=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,this.props.HasActiveMachine&&i.a.createElement(Ke,null)))}}]),t}(i.a.Component),Xe=Object(s.b)((function(e){return{HasActiveMachine:void 0!==e.CustomMachines.activeMachineId}}),{})(Je),Ze=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(C.a)(t).call(this,e))).handleKeyPress=n.handleKeyPress.bind(Object(f.a)(n)),n.state={Computing:!1,ShowingSetup:!1},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",(function(t){return e.handleKeyPress(t)}),!1)}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("keyup",(function(t){return e.handleKeyPress(t)}),!1)}},{key:"handleKeyPress",value:function(e){switch(e.key){case" ":se.StopComputation(),this.props.ClearMessages()}}},{key:"render",value:function(){var e=[r.Green];return i.a.createElement("div",{style:{display:"flex",flexFlow:"column wrap"}},i.a.createElement("div",null,i.a.createElement("h2",{style:{textAlign:"center"}},"LogicBoxes")),i.a.createElement("div",{style:{display:"flex",flexFlow:"row wrap"}},i.a.createElement("div",{style:{flex:"1 1 200px"}},i.a.createElement(_e,{ItemName:"Settings"},i.a.createElement(Xe,null)),i.a.createElement(_e,{ItemName:"Challenges"},i.a.createElement(Pe,null)),i.a.createElement(Ne,{MultipleInputsAllowed:!1,AllowedInputs:e})),void 0===be().CustomMachines.activeMachineId?i.a.createElement("div",{style:{display:"flex",flex:"4 1 400px",flexFlow:"column",alignItems:"center"}},i.a.createElement("button",{title:"Add new machine",onClick:this.props.AddNewMachine},"Create new machine")):i.a.createElement("div",{style:{display:"flex",flex:"4 1 400px",flexFlow:"column",alignItems:"center"}},i.a.createElement(Ye,null),i.a.createElement("div",{style:{marginTop:10}},i.a.createElement(Fe,null)),i.a.createElement("div",null,i.a.createElement(Oe,null))),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap",flex:"1 1 200px",marginLeft:30}},i.a.createElement(qe,null))))}}]),t}(i.a.Component),Qe=Object(s.b)((function(e){return{HasActiveMachine:void 0!==e.CustomMachines.activeMachineId}}),{AddNewMachine:ze,ClearMessages:function(){return{type:"SetMessagesActionType",messages:[]}}})(Ze),$e=function(){return i.a.createElement(u.b,{backend:l.a},i.a.createElement(Qe,null))};n(41);c.a.render(i.a.createElement(s.a,{store:me},i.a.createElement($e,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.106d052b.chunk.js.map