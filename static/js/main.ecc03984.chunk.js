(this.webpackJsonpdseoefen=this.webpackJsonpdseoefen||[]).push([[0],{32:function(e,t,n){e.exports=n(45)},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),s=n(22),o=n.n(s),c=n(6),l=n(8),u=n(12),h=n(7),d=n(3);!function(e){e.Green="green",e.Red="red",e.Blue="blue",e.Yellow="#fff020"}(r||(r={}));var C=function(e){var t={marginLeft:5,marginRight:5};return i.a.createElement("div",null,i.a.createElement("button",{style:t,onClick:function(){e.valueChanged(e.value-1)}},"-"),i.a.createElement("label",null,e.value),i.a.createElement("button",{style:t,onClick:function(){e.valueChanged(e.value+1)}},"+"))};function p(e){return e.players.find((function(t){return t.id===e.activePlayerId}))}function f(e){var t=p(e);return t.machines.find((function(e){return e.Id===t.activeMachineId}))}function m(e){return{type:"SwitchScreen",screen:e}}var v=n(10),b=n.n(v),g=n(5),O=n(20),y=n(2),w=n(4),S=function(e,t){if(-1!==t)for(var n="<"+t+">",r=n.length,a=0,i=e.indexOf(n),s=e.indexOf("*");-1!==i||-1!==s;)-1!==i&&(-1===s||i<s)?(e=e.substring(0,i)+"*"+e.substring(i+r),a=i+1):(e=e.substring(0,s)+n+e.substring(s+1),a=s+r),i=e.indexOf(n,a),s=e.indexOf("*",a);return e},k=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[],n="*"+e.Content;return t.push({Content:n,Channel:r.Green}),Promise.resolve(t)}},this.id="10"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"blue",Color:"grey",Name:"Add *",Description:"Puts a star in front of the string. There is guaranteed not to be a star in the input"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),I=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[],n="0"+e.Content;return t.push({Content:n,Channel:r.Green}),Promise.resolve(t)}},this.id="11"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"#fff020",Color:"darkorange",Name:"Add 0",Description:"Puts a zero in front of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),M=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[],n=r.Green;if(e.Content.length<2)n=r.Red;else if("<"!==e.Content[0])e.Content[0]!==e.Content[1]&&(n=r.Red);else{var a=e.Content.indexOf(">"),i=e.Content.substring(0,a+1);if(e.Content.length<2*i.length)n=r.Red;else e.Content.substring(a+1,a+i.length+1)!==i&&(n=r.Red)}return t.push({Content:e.Content,Channel:n}),Promise.resolve(t)}},this.id="9"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"red",Color:"green",Name:"Compare",Description:"Compares the first two characters in the string. If they are the same, exits green. If they are different exits red"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green,r.Red]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),D=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t,n=[];if(e.Content.length<1)t="";else if("<"!==e.Content[0])t=e.Content[0]+e.Content;else{var a=e.Content.indexOf(">");t=e.Content.substring(0,a+1)+e.Content}return n.push({Content:t,Channel:r.Green}),Promise.resolve(n)}},this.id="6"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"green",Color:"yellow",Name:"Copy",Description:"Copies the first character of the string and puts it in front of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),x=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t,n=[];if(e.Content.length<1)t="";else if("<"!==e.Content[0])t=e.Content.substring(1);else{var a=e.Content.indexOf(">");t=e.Content.substring(a+1)}return n.push({Content:t,Channel:r.Green}),Promise.resolve(n)}},this.id="7"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"firebrick",Color:"red",Name:"Delete",Description:"Deletes the first character of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),G=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.id="0"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"white",BorderColor:"green",Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),E=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[],n="";if(e.Content.length>0){var a=e.Content[0];n=a>="0"&&a<="8"||a>="a"&&a<"z"||a>="A"&&a<"Z"?String.fromCharCode(a.charCodeAt(0)+1)+e.Content.slice(1):"9"===a?"0"+e.Content.slice(1):"z"===a?"a"+e.Content.slice(1):"Z"===a?"A"+e.Content.slice(1):e.Content}return t.push({Content:n,Channel:r.Green}),Promise.resolve(t)}},this.id="12"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"DodgerBlue",Color:"MediumVioletRed",Name:"Increment",Description:"Increases a number in front of the string by 1, makes as letter the next letter in the alphabet. 9 becomes 0, z becomes a. All other starting characters are not changed"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),A=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.id="5"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"green",BorderColor:"lightgreen",Name:"Move",Description:"Does nothing with the string, only used to get the message to the right place"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),T=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.id="1"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"white",BorderColor:"red",Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),F=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t,n=[];if(e.Content.length<2)t=e.Content;else if("<"!==e.Content[0])t=e.Content.substring(1)+e.Content.substring(0,1);else{var a=e.Content.indexOf(">");t=e.Content.substring(a+1)+e.Content.substring(0,a+1)}return n.push({Content:t,Channel:r.Green}),Promise.resolve(n)}},this.id="8"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"blue",Color:"cyan",Name:"Rotate",Description:"Removes the first character of the string, and adds it to the end of the string"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}();function j(e){return e.length<6}function R(e){return"0"===e||"1"===e||"2"===e||"3"===e}var L,B=n(16),N=n(31),P=n(11);!function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(L||(L={}));var z,W={AllowedMachines:["0","5","6","7","8","9","10","11","12"],LevelDescription:"The machine should append the length of the input string to the string",MachineDescription:"Appends the length of the input string to the string",Name:"AppendLength",Id:"13",Style:{Color:"Brown",BorderColor:"RebeccaPurple"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"four"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"four4"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aabccd"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"aabccd6"}]},{inputs:[{Order:0,Channel:r.Green,Content:"1"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"11"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"0"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This is hard"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"This is hard12"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This might even be harder"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"This might even be harder25"}]}],Cell:{Row:1,Column:7}},U={AllowedMachines:["0","5","6","7","8","9","10","11","12"],LevelDescription:"The machine should return the length of the input string",MachineDescription:"Returns the length of the input string",Name:"GetLength",Id:"15",Style:{Color:"GoldenRod",BorderColor:"Orchid"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Up,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"four"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"4"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aabccd"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"6"}]},{inputs:[{Order:0,Channel:r.Green,Content:"1"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"1"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"0"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This is hard"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"12"}]},{inputs:[{Order:0,Channel:r.Green,Content:"This might even be harder"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"25"}]}],Cell:{Row:2,Column:7}},q={AllowedMachines:["0","5","6","7","8","9","10","11","12"],LevelDescription:"The machine should exit green if the first character is a number, exit red if it is a letter and exit blue otherwise",MachineDescription:"Exits green if the first character is a number, exits red if it is a letter and exits blue otherwise",Name:"GetType",Id:"16",Style:{Color:"Orange",BorderColor:"LightGoldenRodYellow"},InputChannels:[],OutputChannels:[{Channel:r.Blue,Direction:L.Down,Status:"Exists"},{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"42"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"42"}]},{inputs:[{Order:0,Channel:r.Green,Content:"this starts with a letter"}],expectedOutputs:[{Order:0,Channel:r.Red,Content:"this starts with a letter"}]},{inputs:[{Order:0,Channel:r.Green,Content:",#@%!"}],expectedOutputs:[{Order:0,Channel:r.Blue,Content:",#@%!"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Blue,Content:""}]}],Cell:{Row:2,Column:3}},V={AllowedMachines:["0","5","6","7","9"],LevelDescription:"The machine should exit green if the message is empty, otherwise exit red",MachineDescription:"Exits green if the message is empty, otherwise exits red",Name:"IsEmpty",Id:"1",Style:{Color:"OrangeRed",BorderColor:"ForestGreen"},InputChannels:[{Direction:L.Right,Channel:r.Green,Status:"Exists",UseMachineColor:!0}],OutputChannels:[{Channel:r.Green,Direction:L.Down,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Red,Content:"abc"}]}],Cell:{Row:0,Column:0}},Y={AllowedMachines:["0","5","6","7","8","9","10","11","12"],LevelDescription:"The machine should keep all numbers in the input string, and remove all other characters",MachineDescription:"Keeps all numbers in the input string, and removes all other characters",Name:"KeepNumbers",Id:"6",Style:{Color:"PeachPuff",BorderColor:"DarkOrchid"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Down,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"42"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"42"}]},{inputs:[{Order:0,Channel:r.Green,Content:"fortytwo"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"1 and 1 is"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"11"}]}],Cell:{Row:3,Column:3}},H={AllowedMachines:["0","5","6","7","8","9","10","11","12"],LevelDescription:"The machine should increase the leading input number by 1",MachineDescription:"Increase the input number by 1",Name:"PlusOne",Id:"7",Style:{Color:"Indigo",BorderColor:"DarkTurquoise"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"4"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"5"}]},{inputs:[{Order:0,Channel:r.Green,Content:"0 and some noise 2"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"1 and some noise 2"}]},{inputs:[{Order:0,Channel:r.Green,Content:"42"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"43"}]},{inputs:[{Order:0,Channel:r.Green,Content:"9"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"10"}]},{inputs:[{Order:0,Channel:r.Green,Content:"39"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"40"}]},{inputs:[{Order:0,Channel:r.Green,Content:"23999999 9"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"24000000 9"}]}],Cell:{Row:2,Column:6}},X={AllowedMachines:["0","5","6","7","8","9","10"],LevelDescription:"The machine should remove all repeating characters from the input string",MachineDescription:"Removes all repeating characters from the input string",Name:"RemoveRepeats",Id:"8",Style:{Color:"Brown",BorderColor:"Indigo"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"aabc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aaaabccc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:"hhhhhhhhhiiiii wwwworllllldddddddd"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"hi world"}]}],Cell:{Row:1,Column:1}},_={AllowedMachines:["0","5","6","7","8","9","10","11","12"],LevelDescription:"The machine should put the last character in front of the string",MachineDescription:"Rotates the last character to the front of the string",Name:"RotateBackwards",Id:"11",Style:{Color:"Blue",BorderColor:"Cyan"},InputChannels:[],OutputChannels:[{Channel:r.Red,Direction:L.Right,Status:"Exists"},{Channel:r.Blue,Direction:L.Up,Status:"Exists"},{Channel:r.Green,Direction:L.Down,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"cab"}]},{inputs:[{Order:0,Channel:r.Green,Content:"otater"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"rotate"}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"ello world!H"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"Hello world!"}]}],Cell:{Row:2,Column:5}},J={AllowedMachines:["0","1","2","3","5","6","7","8","9","10","11","12","13","14"],LevelDescription:"Sandbox level, no specific goals",MachineDescription:"",Name:"Sandbox",Id:"12",Style:{Color:"DarkOliveGreen",BorderColor:"Tomato"},InputChannels:[],OutputChannels:[],Tests:[],Cell:{Row:-1,Column:-1}},K={AllowedMachines:["0","5","6","7","8","9","10","11","12"],LevelDescription:"The machine should reverse the characters from the string. Input are only lowercase letters. With limited number of machines at your disposal, this is VERY HARD",MachineDescription:"Reverses the characters from the string. Input can only consist of lowercase letters",Name:"ReverseLimited",Id:"10",Style:{Color:"MediumSlateBlue",BorderColor:"Black"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"cba"}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"esrever"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"reverse"}]}],Cell:{Row:1,Column:9}},Z={AllowedMachines:["0","5","6","7","8","9","10","12","13","14"],LevelDescription:"The machine should reverse the characters from the input string",MachineDescription:"Reverses the characters from the input string",Name:"Reverse",Id:"9",Style:{Color:"MediumSlateBlue",BorderColor:"Aqua"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"cba"}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"desrever saw sihT"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"This was reversed"}]}],Cell:{Row:4,Column:6}},Q={AllowedMachines:["0","1","2","3","5","6","7","8","9","10","11","12","13","14"],LevelDescription:"The machine should exit the input both to green and red",MachineDescription:"Exits the input both to green and red",Name:"CopyAll",Id:"14",Style:{Color:"LightGreen",BorderColor:"Yellow"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Down,Status:"Exists"}],Tests:[{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""},{Order:0,Channel:r.Red,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"},{Order:0,Channel:r.Red,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"},{Order:0,Channel:r.Red,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aabcc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"aabcc"},{Order:0,Channel:r.Red,Content:"aabcc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"Copied"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"Copied"},{Order:0,Channel:r.Red,Content:"Copied"}]}],Cell:{Row:4,Column:8}},$={AllowedMachines:["0","5","6","7","8","9","10","12"],LevelDescription:"The machine should decrement the leading character, turning 0 into 9, a/A into z/Z",MachineDescription:"Decrements the leading character",Name:"Decrement",Id:"20",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"bbc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"0321"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"9321"}]},{inputs:[{Order:0,Channel:r.Green,Content:"@bc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"@bc"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"Iello world"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"Hello world"}]}],Style:{Color:"MediumVioletRed",BorderColor:"Orange"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Cell:{Row:2,Column:4}},ee={AllowedMachines:["0","5","6","7","8","9","10","12"],LevelDescription:"The machine should increment all characters",MachineDescription:"Increments all characters",Name:"IncrementAll",Id:"21",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"bcd"}]},{inputs:[{Order:0,Channel:r.Green,Content:"987"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"098"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"1+1=3"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"2+2=4"}]}],Style:{Color:"Ivory",BorderColor:"MediumVioletRed"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Cell:{Row:2,Column:2}},te={AllowedMachines:["0","5","6","7","8","9","10","12"],LevelDescription:"The machine should increment the first character 0 times, the second character once, the third twice etcetera. Characters that cannot be incremented do not count",MachineDescription:"Increments the first character 0 times, the second character once, the third twice, etcetera. Characters that cannot be incremented do not count",Name:"IncrementIncreasing",Id:"22",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"aaa"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"5432109"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"5555555"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"1-A2@q"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"1-B4@t"}]},{inputs:[{Order:0,Channel:r.Green,Content:"hdjik rikdu!"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"hello world!"}]}],Style:{Color:"Pink",BorderColor:"Purple"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Up,Status:"Exists"}],Cell:{Row:1,Column:5}},ne={AllowedMachines:["0","1","2","3","5","6","7","8","9","10","12","13","14"],LevelDescription:"The machine should store the input from green, appending it to any previously stored message. On red input, it should exit the stored message appended with the input to green, clearing the stored message",MachineDescription:"Stores input from green,appending it to any previously stored message. On red input it exits the stored message appended with the input to green",Name:"JoinAll",Id:"24",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"a"},{Order:1,Channel:r.Green,Content:"b"},{Order:2,Channel:r.Red,Content:"c"}],expectedOutputs:[{Order:2,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Red,Content:""},{Order:1,Channel:r.Green,Content:""},{Order:2,Channel:r.Red,Content:"ab"},{Order:3,Channel:r.Red,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""},{Order:2,Channel:r.Green,Content:"ab"},{Order:3,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"Ma"},{Order:1,Channel:r.Green,Content:"rco"},{Order:2,Channel:r.Red,Content:"?"},{Order:3,Channel:r.Green,Content:"Po"},{Order:4,Channel:r.Green,Content:"lo"},{Order:5,Channel:r.Red,Content:"!"}],expectedOutputs:[{Order:2,Channel:r.Green,Content:"Marco?"},{Order:5,Channel:r.Green,Content:"Polo!"}]}],Style:{Color:"Grey",BorderColor:"YellowGreen"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Cell:{Row:4,Column:7}},re={AllowedMachines:["0","5","6","7","8","9","10"],LevelDescription:"The machine should exit the string with each character repeated once",MachineDescription:"Makes sure that each character is repeated once",Name:"MakeTwins",Id:"18",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"aabbcc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"aaabcc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"aabbcc"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"hello world"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"hheelloo  wwoorrlldd"}]}],Style:{Color:"AntiqueWhite",BorderColor:"GreenYellow"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Down,Status:"Exists"}],Cell:{Row:1,Column:2}},ae={AllowedMachines:["0","5","6","7","9"],LevelDescription:"If the first characters are duplicates, the machine should clear all the duplicates",MachineDescription:"If the first characters are duplicates, clears those duplicates",Name:"RemoveIfDuplicate",Id:"17",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"aabc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"bc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"a"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"a"}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"hhhhhhhello world"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"ello world"}]}],Style:{Color:"MediumAquaMarine",BorderColor:"DeepSkyBlue"},InputChannels:[],OutputChannels:[{Channel:r.Blue,Direction:L.Down,Status:"Exists"},{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Cell:{Row:1,Column:0}},ie={AllowedMachines:["0","5","6","7","9"],LevelDescription:"The machine should delete all characters before the first repeated character",MachineDescription:"Deletes all character before the first repeated character",Name:"RemoveUntilRepeat",Id:"19",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abbc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"bbc"}]},{inputs:[{Order:0,Channel:r.Green,Content:"abca"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"22"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"22"}]},{inputs:[{Order:0,Channel:r.Green,Content:"1"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:"hello world"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"llo world"}]}],Style:{Color:"LawnGreen",BorderColor:"DarkGrey"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Down,Status:"Exists"}],Cell:{Row:2,Column:0}},se={AllowedMachines:["0","5","6","7","8","9","10","12","13"],LevelDescription:"The machine should exit the input to green, and exit an empty message to red",MachineDescription:"Exits the input to green, exits an empty message to red",Name:"Trigger",Id:"23",Tests:[{inputs:[{Order:0,Channel:r.Green,Content:"abc"}],expectedOutputs:[{Order:0,Channel:r.Green,Content:"abc"},{Order:0,Channel:r.Red,Content:""}]},{inputs:[{Order:0,Channel:r.Green,Content:""}],expectedOutputs:[{Order:0,Channel:r.Green,Content:""},{Order:0,Channel:r.Red,Content:""}]}],Style:{Color:"DimGrey",BorderColor:"Thistle"},InputChannels:[],OutputChannels:[{Channel:r.Green,Direction:L.Right,Status:"Exists"}],Cell:{Row:4,Column:5}},oe=function(){function e(){Object(y.a)(this,e),this.levels=void 0,this.levels=[],this.init()}return Object(w.a)(e,[{key:"init",value:function(){this.levels.push(V),this.levels.push(X),this.levels.push(q),this.levels.push(Y),this.levels.push(U),this.levels.push(W),this.levels.push(_),this.levels.push(H),this.levels.push(K),this.levels.push(Z),this.levels.push(Q),this.levels.push(J),this.levels.push($),this.levels.push(ee),this.levels.push(te),this.levels.push(ne),this.levels.push(re),this.levels.push(ae,ie,se)}},{key:"GetAllLevels",value:function(){return this.levels}},{key:"GetLevel",value:function(e){var t=this.levels.find((function(t){return t.Id===e}));if(void 0===t)throw Error("Unable to find level with id '".concat(e,"'"));return t}}],[{key:"GetStore",value:function(){return void 0===e.levelStore&&(e.levelStore=new e),e.levelStore}}]),e}();function ce(e,t){if("LoadLevelActionType"===t.type)return function(e){var t=oe.GetStore().GetLevel(e),n=t.Tests.length>0?t.Tests.map((function(e,t){return Object(h.a)(Object(h.a)({},e),{},{actualOutputs:void 0,id:t,editable:!1})})):[{actualOutputs:void 0,inputs:[{Channel:r.Green,Content:"",Order:0}],expectedOutputs:[],id:0,editable:!0}];return{allowedMachines:t.AllowedMachines,description:t.LevelDescription,name:t.Name,id:t.Id,tests:n}}(t.id);if(void 0!==e){switch(t.type){case"AddTestActionType":var n={actualOutputs:[],expectedOutputs:[],inputs:[{Channel:r.Green,Content:"",Order:0}],editable:!0,id:Math.max.apply(Math,Object(P.a)(e.tests.map((function(e){return e.id}))).concat([-1]))+1};e.tests.push(n);break;case"RemoveTestActionType":e.tests=e.tests.filter((function(e){return e.id!==t.testId}));break;case"ReportOutputActionType":case"ClearTestOutputActionType":case"AddInputActionType":case"RemoveInputActionType":case"UpdateInputActionType":var a=e.tests.map((function(e){return e.id===t.testId?function(e,t){switch(t.type){case"ReportOutputActionType":void 0===e.actualOutputs&&(e.actualOutputs=[]);var n=e.actualOutputs.slice();return n.push(t.outputMessage),Object(h.a)(Object(h.a)({},e),{},{actualOutputs:n});case"ClearTestOutputActionType":return Object(h.a)(Object(h.a)({},e),{},{actualOutputs:[]});case"AddInputActionType":var a=Math.max.apply(Math,Object(P.a)(e.inputs.map((function(e){return e.Order}))).concat([-1]))+1,i={Channel:r.Green,Content:"",Order:a};return Object(h.a)(Object(h.a)({},e),{},{inputs:e.inputs.concat(i)});case"RemoveInputActionType":var s=e.inputs.filter((function(e){return e.Order!==t.order})).map((function(e,t){return Object(h.a)(Object(h.a)({},e),{},{Order:t})})),o=e.expectedOutputs.filter((function(e){return e.Order!==t.order})).map((function(e){return Object(h.a)(Object(h.a)({},e),{},{Order:e.Order>t.order?e.Order-1:e.Order})}));return Object(h.a)(Object(h.a)({},e),{},{inputs:s,expectedOutputs:o,actualOutputs:void 0});case"UpdateInputActionType":var c=e.inputs.map((function(e){return e.Order===t.input.Order?t.input:e}));return Object(h.a)(Object(h.a)({},e),{},{inputs:c});default:return e}}(e,t):e}));e.tests=a;break;case"AddNewMachineActionType":case"ChannelChangedActionType":case"DeleteMachineActionType":case"FixMachineActionType":case"MachineAddedActionType":case"MachineMovedActionType":case"MachineRemovedActionType":e.tests.forEach((function(e){e.actualOutputs=void 0}))}return e}}function le(e,t){var n,r=[],a=[],i=L.Up,s=Object(g.a)(e.OutputChannels);try{for(s.s();!(n=s.n()).done;){var o=n.value;r.push({Channel:o,Direction:i,Status:"Exists"}),i++}}catch(h){s.e(h)}finally{s.f()}if(t&&e.InputChannels.length>1){i=0;var c,l=Object(g.a)(e.InputChannels);try{for(l.s();!(c=l.n()).done;){var u=c.value;a.push({Channel:u,Direction:i,Status:"Exists"}),i++}}catch(h){l.e(h)}finally{l.f()}}return{inputChannels:a,outputChannels:r}}function ue(e){var t,n=le(e,!0),r=n.inputChannels,a=n.outputChannels,i=r.length>1,s=r.map((function(e){return Object(h.a)({UseMachineColor:!i},e)})),o=[],c=Object(g.a)(a);try{var l=function(){var e=t.value,n=o.find((function(t){return t[0].Direction===e.Direction}));void 0===n?o.push([e]):n.push(e)};for(c.s();!(t=c.n()).done;)l()}catch(u){c.e(u)}finally{c.f()}return{inputChannels:s,outputChannels:o}}function he(e,t){return e.Column===t.Column&&e.Row===t.Row}oe.levelStore=void 0,function(e){e[e.NoMachineLinked=0]="NoMachineLinked",e[e.InProgress=1]="InProgress",e[e.NonValidMachineUsed=2]="NonValidMachineUsed",e[e.Completed=3]="Completed"}(z||(z={}));var de=function e(t){Object(y.a)(this,e),this.cellSize=void 0,this.aperture=void 0,this.armLength=void 0,this.armAngle=.05*Math.PI,this.circleRadius=void 0,this.borderWidth=void 0,this.halfSquareSize=void 0,this.shadeOffset=void 0,this.outputSplit=void 0,this.outputLength=void 0,this.outputRadius=void 0,this.outputWidth=void 0,this.outputStartLength=void 0,this.center=void 0,this.apertureAngle=void 0,this.defiatingAngle=void 0,this.protrudingArm=void 0,this.cellSize=t,this.aperture=.23*t,this.armLength=.18*t,this.circleRadius=.28*t,this.borderWidth=.05*t,this.halfSquareSize=.9*this.circleRadius,this.shadeOffset=.008*t,this.outputSplit=.12*t,this.outputLength=.38*t,this.outputRadius=.15*t,this.outputWidth=.06*t,this.outputStartLength=.25*t,this.center=.5*t,this.apertureAngle=Math.asin(.5*this.aperture/this.circleRadius),this.defiatingAngle=this.armAngle-this.apertureAngle,this.protrudingArm=Math.cos(this.defiatingAngle)*this.armLength};function Ce(e,t,n){return function(e,t,n,r){var a=p(Re.getState()).cellSize/2;if(null!==n&&null!==r){return Math.atan2(n.y-r.y+t-a,n.x-r.x+e-a)}return}(t,n,e.getClientOffset(),e.getInitialSourceClientOffset())}function pe(e){switch(e){case L.Up:return.5*Math.PI;case L.Right:return 1*Math.PI;case L.Down:return 1.5*Math.PI;case L.Left:return 2*Math.PI}}function fe(e){if(""===e||void 0===e||null===e)return!1;var t=(new Option).style;return t.color=e,t.color===e.toLowerCase()}function me(e){if(e.startsWith("rgb(")){var t=e.split("(")[1].split(")")[0].split(",");return{red:Number(t[0]),green:Number(t[1]),blue:Number(t[2])}}return e.startsWith("#")||(e=function(e){var t="#FFFFFF";switch(e.toLowerCase()){case"aliceblue":t="#F0F8FF";break;case"antiquewhite":t="#FAEBD7";break;case"aqua":t="#00FFFF";break;case"aquamarine":t="#7FFFD4";break;case"azure":t="#F0FFFF";break;case"beige":t="#F5F5DC";break;case"bisque":t="#FFE4C4";break;case"black":t="#000000";break;case"blanchedalmond":t="#FFEBCD";break;case"blue":t="#0000FF";break;case"blueviolet":t="#8A2BE2";break;case"brown":t="#A52A2A";break;case"burlywood":t="#DEB887";break;case"cadetblue":t="#5F9EA0";break;case"chartreuse":t="#7FFF00";break;case"chocolate":t="#D2691E";break;case"coral":t="#FF7F50";break;case"cornflowerblue":t="#6495ED";break;case"cornsilk":t="#FFF8DC";break;case"crimson":t="#DC143C";break;case"cyan":t="#00FFFF";break;case"darkblue":t="#00008B";break;case"darkcyan":t="#008B8B";break;case"darkgoldenrod":t="#B8860B";break;case"darkgray":case"darkgrey":t="#A9A9A9";break;case"darkgreen":t="#006400";break;case"darkkhaki":t="#BDB76B";break;case"darkmagenta":t="#8B008B";break;case"darkolivegreen":t="#556B2F";break;case"darkorange":t="#FF8C00";break;case"darkorchid":t="#9932CC";break;case"darkred":t="#8B0000";break;case"darksalmon":t="#E9967A";break;case"darkseagreen":t="#8FBC8F";break;case"darkslateblue":t="#483D8B";break;case"darkslategray":case"darkslategrey":t="#2F4F4F";break;case"darkturquoise":t="#00CED1";break;case"darkviolet":t="#9400D3";break;case"deeppink":t="#FF1493";break;case"deepskyblue":t="#00BFFF";break;case"dimgray":case"dimgrey":t="#696969";break;case"dodgerblue":t="#1E90FF";break;case"firebrick":t="#B22222";break;case"floralwhite":t="#FFFAF0";break;case"forestgreen":t="#228B22";break;case"fuchsia":t="#FF00FF";break;case"gainsboro":t="#DCDCDC";break;case"ghostwhite":t="#F8F8FF";break;case"gold":t="#FFD700";break;case"goldenrod":t="#DAA520";break;case"gray":case"grey":t="#808080";break;case"green":t="#008000";break;case"greenyellow":t="#ADFF2F";break;case"honeydew":t="#F0FFF0";break;case"hotpink":t="#FF69B4";break;case"indianred":t="#CD5C5C";break;case"indigo":t="#4B0082";break;case"ivory":t="#FFFFF0";break;case"khaki":t="#F0E68C";break;case"lavender":t="#E6E6FA";break;case"lavenderblush":t="#FFF0F5";break;case"lawngreen":t="#7CFC00";break;case"lemonchiffon":t="#FFFACD";break;case"lightblue":t="#ADD8E6";break;case"lightcoral":t="#F08080";break;case"lightcyan":t="#E0FFFF";break;case"lightgoldenrodyellow":t="#FAFAD2";break;case"lightgray":case"lightgrey":t="#D3D3D3";break;case"lightgreen":t="#90EE90";break;case"lightpink":t="#FFB6C1";break;case"lightsalmon":t="#FFA07A";break;case"lightseagreen":t="#20B2AA";break;case"lightskyblue":t="#87CEFA";break;case"lightslategray":case"lightslategrey":t="#778899";break;case"lightsteelblue":t="#B0C4DE";break;case"lightyellow":t="#FFFFE0";break;case"lime":t="#00FF00";break;case"limegreen":t="#32CD32";break;case"linen":t="#FAF0E6";break;case"magenta":t="#FF00FF";break;case"maroon":t="#800000";break;case"mediumaquamarine":t="#66CDAA";break;case"mediumblue":t="#0000CD";break;case"mediumorchid":t="#BA55D3";break;case"mediumpurple":t="#9370DB";break;case"mediumseagreen":t="#3CB371";break;case"mediumslateblue":t="#7B68EE";break;case"mediumspringgreen":t="#00FA9A";break;case"mediumturquoise":t="#48D1CC";break;case"mediumvioletred":t="#C71585";break;case"midnightblue":t="#191970";break;case"mintcream":t="#F5FFFA";break;case"mistyrose":t="#FFE4E1";break;case"moccasin":t="#FFE4B5";break;case"navajowhite":t="#FFDEAD";break;case"navy":t="#000080";break;case"oldlace":t="#FDF5E6";break;case"olive":t="#808000";break;case"olivedrab":t="#6B8E23";break;case"orange":t="#FFA500";break;case"orangered":t="#FF4500";break;case"orchid":t="#DA70D6";break;case"palegoldenrod":t="#EEE8AA";break;case"palegreen":t="#98FB98";break;case"paleturquoise":t="#AFEEEE";break;case"palevioletred":t="#DB7093";break;case"papayawhip":t="#FFEFD5";break;case"peachpuff":t="#FFDAB9";break;case"peru":t="#CD853F";break;case"pink":t="#FFC0CB";break;case"plum":t="#DDA0DD";break;case"powderblue":t="#B0E0E6";break;case"purple":t="#800080";break;case"rebeccapurple":t="#663399";break;case"red":t="#FF0000";break;case"rosybrown":t="#BC8F8F";break;case"royalblue":t="#4169E1";break;case"saddlebrown":t="#8B4513";break;case"salmon":t="#FA8072";break;case"sandybrown":t="#F4A460";break;case"seagreen":t="#2E8B57";break;case"seashell":t="#FFF5EE";break;case"sienna":t="#A0522D";break;case"silver":t="#C0C0C0";break;case"skyblue":t="#87CEEB";break;case"slateblue":t="#6A5ACD";break;case"slategray":case"slategrey":t="#708090";break;case"snow":t="#FFFAFA";break;case"springgreen":t="#00FF7F";break;case"steelblue":t="#4682B4";break;case"tan":t="#D2B48C";break;case"teal":t="#008080";break;case"thistle":t="#D8BFD8";break;case"tomato":t="#FF6347";break;case"turquoise":t="#40E0D0";break;case"violet":t="#EE82EE";break;case"wheat":t="#F5DEB3";break;case"white":t="#FFFFFF";break;case"whitesmoke":t="#F5F5F5";break;case"yellow":t="#FFFF00";break;case"yellowgreen":t="#9ACD32"}return t}(e)),{red:parseInt(e.substring(1,3),16),blue:parseInt(e.substring(5,7),16),green:parseInt(e.substring(3,5),16)}}function ve(e,t){try{var n=me(e);return"rgba(".concat(n.red,",").concat(n.green,",").concat(n.blue,",").concat(t,")")}catch(r){return"white"}}function be(e,t){try{var n=me(e),r=256-(256-n.red)*t,a=256-(256-n.blue)*t,i=256-(256-n.green)*t;return"rgb(".concat(r,",").concat(i,",").concat(a,")")}catch(s){return"white"}}function ge(e,t){var n=me(e);try{var r=(n.red+n.green+n.blue)/3;return"rgb(".concat(r*t+n.red*(1-t),",").concat(r*t+n.green*(1-t),",").concat(r*t+n.blue*(1-t),")")}catch(a){return"white"}}function Oe(){switch(Math.floor(148*Math.random())){case 0:return"AliceBlue";case 1:return"AntiqueWhite";case 2:return"Aqua";case 3:return"Aquamarine";case 4:return"Azure";case 5:return"Beige";case 6:return"Bisque";case 7:return"Black";case 8:return"BlanchedAlmond";case 9:return"Blue";case 10:return"BlueViolet";case 11:return"Brown";case 12:return"BurlyWood";case 13:return"CadetBlue";case 14:return"Chartreuse";case 15:return"Chocolate";case 16:return"Coral";case 17:return"CornflowerBlue";case 18:return"Cornsilk";case 19:return"Crimson";case 20:return"Cyan";case 21:return"DarkBlue";case 22:return"DarkCyan";case 23:return"DarkGoldenRod";case 24:return"DarkGray";case 25:return"DarkGrey";case 26:return"DarkGreen";case 27:return"DarkKhaki";case 28:return"DarkMagenta";case 29:return"DarkOliveGreen";case 30:return"DarkOrange";case 31:return"DarkOrchid";case 32:return"DarkRed";case 33:return"DarkSalmon";case 34:return"DarkSeaGreen";case 35:return"DarkSlateBlue";case 36:return"DarkSlateGray";case 37:return"DarkSlateGrey";case 38:return"DarkTurquoise";case 39:return"DarkViolet";case 40:return"DeepPink";case 41:return"DeepSkyBlue";case 42:return"DimGray";case 43:return"DimGrey";case 44:return"DodgerBlue";case 45:return"FireBrick";case 46:return"FloralWhite";case 47:return"ForestGreen";case 48:return"Fuchsia";case 49:return"Gainsboro";case 50:return"GhostWhite";case 51:return"Gold";case 52:return"GoldenRod";case 53:return"Gray";case 54:return"Grey";case 55:return"Green";case 56:return"GreenYellow";case 57:return"HoneyDew";case 58:return"HotPink";case 59:return"IndianRed\xa0";case 60:return"Indigo";case 61:return"Ivory";case 62:return"Khaki";case 63:return"Lavender";case 64:return"LavenderBlush";case 65:return"LawnGreen";case 66:return"LemonChiffon";case 67:return"LightBlue";case 68:return"LightCoral";case 69:return"LightCyan";case 70:return"LightGoldenRodYellow";case 71:return"LightGray";case 72:return"LightGrey";case 73:return"LightGreen";case 74:return"LightPink";case 75:return"LightSalmon";case 76:return"LightSeaGreen";case 77:return"LightSkyBlue";case 78:return"LightSlateGray";case 79:return"LightSlateGrey";case 80:return"LightSteelBlue";case 81:return"LightYellow";case 82:return"Lime";case 83:return"LimeGreen";case 84:return"Linen";case 85:return"Magenta";case 86:return"Maroon";case 87:return"MediumAquaMarine";case 88:return"MediumBlue";case 89:return"MediumOrchid";case 90:return"MediumPurple";case 91:return"MediumSeaGreen";case 92:return"MediumSlateBlue";case 93:return"MediumSpringGreen";case 94:return"MediumTurquoise";case 95:return"MediumVioletRed";case 96:return"MidnightBlue";case 97:return"MintCream";case 98:return"MistyRose";case 99:return"Moccasin";case 100:return"NavajoWhite";case 101:return"Navy";case 102:return"OldLace";case 103:return"Olive";case 104:return"OliveDrab";case 105:return"Orange";case 106:return"OrangeRed";case 107:return"Orchid";case 108:return"PaleGoldenRod";case 109:return"PaleGreen";case 110:return"PaleTurquoise";case 111:return"PaleVioletRed";case 112:return"PapayaWhip";case 113:return"PeachPuff";case 114:return"Peru";case 115:return"Pink";case 116:return"Plum";case 117:return"PowderBlue";case 118:return"Purple";case 119:return"RebeccaPurple";case 120:return"Red";case 121:return"RosyBrown";case 122:return"RoyalBlue";case 123:return"SaddleBrown";case 124:return"Salmon";case 125:return"SandyBrown";case 126:return"SeaGreen";case 127:return"SeaShell";case 128:return"Sienna";case 129:return"Silver";case 130:return"SkyBlue";case 131:return"SlateBlue";case 132:return"SlateGray";case 133:return"SlateGrey";case 134:return"Snow";case 135:return"SpringGreen";case 136:return"SteelBlue";case 137:return"Tan";case 138:return"Teal";case 139:return"Thistle";case 140:return"Tomato";case 141:return"Turquoise";case 142:return"Violet";case 143:return"Wheat";case 144:return"White";case 145:return"WhiteSmoke";case 146:return"Yellow";case 147:return"YellowGreen";default:return"White"}}function ye(e,t){var n,r=1/0,a=void 0,i=Object(g.a)(e);try{for(i.s();!(n=i.n()).done;){var s=n.value,o=t(s);o<r&&(a=s,r=o)}}catch(c){i.e(c)}finally{i.f()}return a}function we(e,t){var n,r=-1/0,a=void 0,i=Object(g.a)(e);try{for(i.s();!(n=i.n()).done;){var s=n.value,o=t(s);o>r&&(a=s,r=o)}}catch(c){i.e(c)}finally{i.f()}return a}var Se=function e(){Object(y.a)(this,e)};function ke(e,t,n,r){if(void 0===e)return e;switch(t.type){case"SetColorActionType":return fe(t.color)&&(e.Style.Color=t.color),e;case"SetBorderColorActionType":return fe(t.borderColor)&&(e.Style.BorderColor=t.borderColor),e;case"SetNameActionType":return e.Style.Name=t.name,e;case"SetDescriptionActionType":return e.Style.Description=t.description,e;default:switch(t.type){case"FixMachineActionType":var a=e.Setup.MachineInstances.find((function(e){return e.Id===t.machineInstanceId}));"Deleted"===a.Status&&e.Setup.MachineInstances.filter((function(e){return e.MachineId===a.MachineId})).length<=1&&(e.DependingOnDeleted=e.DependingOnDeleted.filter((function(e){return e!==a.MachineId})))}switch(e.Setup.MachineInstances=function(e,t,n,r){switch(t.type){case"ChannelChangedActionType":var a=e.find((function(e){return e.Id===t.machineInstanceId})),i=a.OutputChannels.findIndex((function(e){return e.Channel===t.channel.Channel})),s=a.OutputChannels.filter((function(e,n){return e.Direction===t.channel.Direction&&"DoesNotExist"!==e.Status&&n!==i}));if(s.length>0&&void 0!==t.angle){for(var o=a.OutputChannels.filter((function(e){return e.Direction!==t.channel.Direction&&"DoesNotExist"!==e.Status})),c=-(s.length-1)/2*.12*r,l=!1,u=pe(t.channel.Direction),d=.25*-Math.sin(t.angle-u)*r,C=0;C<s.length;C++)!l&&d<c&&(l=!0,o.push(t.channel)),o.push(s[C]),c+=.12*r;l||o.push(t.channel),a.OutputChannels=o}else a.OutputChannels[i]=t.channel;return e;case"InputChannelChangedActionType":var p=e.find((function(e){return e.Id===t.machineInstanceId}));return p.InputChannels.find((function(e){return e.Direction===t.channel.Direction})).Direction=p.InputChannels[t.channelIndex].Direction,p.InputChannels[t.channelIndex]=t.channel,e;case"MachineRemovedActionType":return R(e.find((function(e){return e.Id===t.machineInstanceId})).MachineId)&&e.filter((function(e){return R(e.MachineId)})).length<2?e:e.filter((function(e){return e.Id!==t.machineInstanceId}));case"MachineAddedActionType":if(e.some((function(e){return he(e.Cell,t.cell)})))return e;var f=le(t.api,!1),m=f.outputChannels,v=f.inputChannels,b=0===e.length?0:Math.max.apply(Math,Object(P.a)(e.map((function(e){return e.Id})))),g={Cell:t.cell,MachineId:t.machineId,OutputChannels:m,InputChannels:v,Id:b+1,Status:"Valid"};return e.push(g),e;case"MachineMovedActionType":return e.some((function(e){return he(e.Cell,t.newCell)}))||(e.find((function(e){return e.Id===t.machineInstanceId})).Cell=t.newCell),e;case"FixMachineActionType":var O=e.find((function(e){return e.Id===t.machineInstanceId}));if("Deleted"===O.Status)return e.filter((function(e){return e.Id!==t.machineInstanceId}));if("ChannelsInvalid"===O.Status){var y=n.GetMachineType(O.MachineId).Api;O.OutputChannels=O.OutputChannels.filter((function(e){return y.OutputChannels.some((function(t){return t===e.Channel}))})),O.OutputChannels=O.OutputChannels.concat(y.OutputChannels.filter((function(e){return!O.OutputChannels.some((function(t){return t.Channel===e}))})).map((function(e){return{Channel:e,Direction:L.Up,Status:"Exists"}}))),O.InputChannels=O.InputChannels.map((function(e){return"Exists"!==e.Status||y.InputChannels.some((function(t){return t===e.Channel}))?e:Object(h.a)(Object(h.a)({},e),{},{Channel:y.InputChannels[0]})})),O.Status="Valid"}return e;default:return e}}(e.Setup.MachineInstances,t,n,r),t.type){case"MachineAddedActionType":case"MachineRemovedActionType":case"MachineMovedActionType":!function(e){if(e.MachineInstances.length>0){var t=0,n=0,r=ye(e.MachineInstances,(function(e){return e.Cell.Column})).Cell.Column,a=ye(e.MachineInstances,(function(e){return e.Cell.Row})).Cell.Row,i=we(e.MachineInstances,(function(e){return e.Cell.Column})).Cell.Column,s=we(e.MachineInstances,(function(e){return e.Cell.Row})).Cell.Row;if(r<=0)i+=n=1-r;else{var o=i+2-Se.MinimumColumns;o>0&&r>1&&(n=-Math.min(o,r-1),o+=n,i+=n)}if(a<=0)s+=t=1-a;else{var c=s+2-Se.MinimumRows;c>0&&a>1&&(t=-Math.min(c,a-1),c+=t,s+=t)}e.MachineInstances.forEach((function(e){e.Cell={Row:e.Cell.Row+t,Column:e.Cell.Column+n}})),e.NumberOfColumns=Math.max(i+2,Se.MinimumColumns),e.NumberOfRows=Math.max(s+2,Se.MinimumRows)}}(e.Setup)}return e}}function Ie(e,t,n){switch(n){case L.Down:if(t.Row>=e.NumberOfRows-1)return;return{Column:t.Column,Row:t.Row+1};case L.Up:if(t.Row<=0)return;return{Column:t.Column,Row:t.Row-1};case L.Right:if(t.Column>=e.NumberOfColumns-1)return;return{Column:t.Column+1,Row:t.Row};case L.Left:if(t.Column<=0)return;return{Column:t.Column-1,Row:t.Row}}}function Me(e){var t,n=[],r=Object(g.a)(e.MachineInstances);try{for(r.s();!(t=r.n()).done;){var a=t.value;R(a.MachineId)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function De(e,t){var n,r=Object(g.a)(e.OutputChannels);try{var a=function(){var e=n.value,r=t.OutputChannels.find((function(t){return t.Channel===e}));if(void 0===r||"DoesNotExist"===r.Status)return t.Status="ChannelsInvalid",{v:void 0}};for(r.s();!(n=r.n()).done;){var i=a();if("object"===typeof i)return i.v}}catch(p){r.e(p)}finally{r.f()}var s,o=Object(g.a)(t.OutputChannels.filter((function(e){return"Exists"===e.Status})));try{var c=function(){var n=s.value;if(!e.OutputChannels.some((function(e){return e===n.Channel})))return t.Status="ChannelsInvalid",{v:void 0}};for(o.s();!(s=o.n()).done;){var l=c();if("object"===typeof l)return l.v}}catch(p){o.e(p)}finally{o.f()}var u,h=Object(g.a)(t.InputChannels.filter((function(e){return"Exists"===e.Status})));try{var d=function(){var n=u.value;if(!e.InputChannels.some((function(e){return e===n.Channel})))return t.Status="ChannelsInvalid",{v:void 0}};for(h.s();!(u=h.n()).done;){var C=d();if("object"===typeof C)return C.v}}catch(p){h.e(p)}finally{h.f()}t.Status="Valid"}Se.CellSize=100,Se.MinimumColumns=6,Se.MinimumRows=5,Se.MenuBackGround="rgba(255,255,255,0.86)";var xe=function(){function e(t){Object(y.a)(this,e),this.customMachines=void 0,this.customMachines=t}return Object(w.a)(e,[{key:"GetMachineType",value:function(e){if(j(e))return Ue.GetStore().GetMachineType(e);var t=this.customMachines.find((function(t){return t.Id===e}));if(void 0===t)throw Error("CustomMachine not found, Id: '".concat(e,"'"));return t}}]),e}();function Ge(){var e=new Int32Array(4);e=window.crypto.getRandomValues(e);var t="";return e.forEach((function(e){t+=e.toString(16)})),t}function Ee(e,t,n,a){return{Id:Ge(),DirectlyDependingOn:[],Style:{BorderColor:null!==a&&void 0!==a?a:Oe(),Color:null!==n&&void 0!==n?n:Oe(),Name:e,Description:t},Api:{InputChannels:[r.Green],OutputChannels:[]},Setup:{NumberOfRows:Se.MinimumRows,NumberOfColumns:Se.MinimumColumns,MachineInstances:[{MachineId:"0",OutputChannels:[{Direction:L.Right,Channel:r.Green,Status:"Exists"}],InputChannels:[],Id:1,Cell:{Row:2,Column:1},Status:"Valid"}]},ExitCells:[{Cell:{Row:2,Column:Se.MinimumColumns-1},Direction:L.Right}],DependingOn:["0"],DependingOnDeleted:[],Status:"Valid"}}var Ae=function(e){return function(e){var t,n=[],r=[],a=[],i=e.machines.find((function(t){return t.Id===e.activeMachineId})),s=Object(g.a)(i.Setup.MachineInstances);try{var o=function(){var i=t.value;if("Deleted"===i.Status)return a.push(i.MachineId),"continue";if(j(i.MachineId)||n.some((function(e){return e===i.MachineId}))||n.push(i.MachineId),!r.some((function(e){return e===i.MachineId}))&&(r.push(i.MachineId),!j(i.MachineId))){var s,o=e.machines.find((function(e){return e.Id===i.MachineId})),c=Object(g.a)(o.DependingOn);try{var l=function(){var e=s.value;r.some((function(t){return t===e}))||r.push(e)};for(c.s();!(s=c.n()).done;)l()}catch(u){c.e(u)}finally{c.f()}}};for(s.s();!(t=s.n()).done;)o()}catch(c){s.e(c)}finally{s.f()}i.DependingOn=r,i.DirectlyDependingOn=n}(e),function(e){var t=e.machines.find((function(t){return t.Id===e.activeMachineId}));t.Setup.MachineInstances.forEach((function(e){e.InputChannels.forEach((function(e){e.Status="DoesNotExist"}))})),t.ExitCells=function(e,t){var n=[],r=[],a=Me(e);r=r.concat(a.map((function(e){return{Cell:e.Cell,Direction:e.OutputChannels[0].Direction}})));for(var i=function(a){for(var i=r[a].Cell,s=void 0,o=void 0;void 0===s&&void 0!==(o=Ie(e,i,r[a].Direction));)i=o,s=e.MachineInstances.find((function(e){return e.Cell.Column===i.Column&&e.Cell.Row===i.Row}));if(void 0===o)return n.push({Direction:r[a].Direction,Cell:i}),"continue";var c=t.GetMachineType(s.MachineId).Api,l=s.InputChannels.find((function(e){return e.Direction===r[a].Direction}));void 0!==l?(c.InputChannels.some((function(e){return e===l.Channel}))||(l.Channel=c.InputChannels[0]),l.Status="Exists"):s.InputChannels.push({Channel:c.InputChannels[0],Direction:r[a].Direction,Status:"Exists"}),r.some((function(e){return e.Cell.Column===i.Column&&e.Cell.Row===i.Row}))||(r=r.concat(s.OutputChannels.map((function(e){return{Cell:i,Direction:e.Direction}}))))},s=0;s<r.length;s++)i(s);return n}(t.Setup,new xe(e.machines));var n,a=t.ExitCells.map((function(e){switch(e.Direction){case L.Right:return r.Green;case L.Up:return r.Blue;case L.Down:return r.Red;case L.Left:return r.Yellow;default:throw Error("Invalid value for direction")}})),i=[],s=Object(g.a)(a);try{var o=function(){var e=n.value;i.some((function(t){return t===e}))||i.push(e)};for(s.s();!(n=s.n()).done;)o()}catch(h){s.e(h)}finally{s.f()}var c={InputChannels:Me(t.Setup).map((function(e){switch(e.MachineId){case"0":return r.Green;case"1":return r.Red;case"2":return r.Blue;case"3":return r.Yellow;default:throw Error("Unknown startmachine "+e.MachineId)}})),OutputChannels:i};l=c,u=t.Api,(l.InputChannels.length!==u.InputChannels.length||l.OutputChannels.length!==u.OutputChannels.length||l.InputChannels.some((function(e){return!u.InputChannels.some((function(t){return e===t}))}))||l.OutputChannels.some((function(e){return!u.OutputChannels.some((function(t){return e===t}))})))&&function(e,t){var n,r=e.activeMachineId,a=e.machines.filter((function(e){return e.DirectlyDependingOn.some((function(e){return e===r}))})),i=Object(g.a)(a);try{for(i.s();!(n=i.n()).done;){var s,o=n.value,c=Object(g.a)(o.Setup.MachineInstances.filter((function(e){return"Deleted"!==e.Status&&e.MachineId===r})));try{for(c.s();!(s=c.n()).done;){var l=s.value;De(t,l)}}catch(h){c.e(h)}finally{c.f()}Te(o)}}catch(h){i.e(h)}finally{i.f()}}(e,c);var l,u;t.Api=c,Te(t)}(e),e};function Te(e){e.Setup.MachineInstances.some((function(e){return"Valid"!==e.Status}))?e.Status="Invalid":e.Status="Valid"}var Fe=Object(N.a)((function(e,t){switch(t.type){case"SwitchScreen":e.screen=t.screen;break;case"SetMessagesActionType":e.messages=t.messages;break;case"SetMovingOutput":e.movingOutput=t.outputChannel;break;default:switch(t.type){case"AddNewMachineActionType":e.messages=[];break;case"LoadLevelActionType":e.screen="playing";break;case"ChannelChangedActionType":"Exists"===t.channel.Status&&(e.movingOutput=void 0)}if(""===e.activePlayerId)return;!function(e,t){switch(t.type){case"LoadLevelActionType":var n=e.levelData.find((function(e){return e.Id===t.id}));void 0!==n?e.activeMachineId=n.LastUsedMachineId:(e.levelData.push({Id:t.id,State:z.NoMachineLinked,LastUsedMachineId:void 0}),e.activeMachineId=void 0),e.activeLevel=t.id;break;case"ChangePlayerName":e.name=t.name;break;case"UpdateShowAnimations":e.showAnimations=t.show;break;case"UpdateStepTime":e.stepTime=t.stepTime;break;case"AddNewMachineActionType":var r,a=e.levelData.find((function(t){return t.Id===e.activeLevel}));if(void 0===a||void 0===a.LastUsedMachineId){var i=oe.GetStore().GetLevel(e.activeLevel);r=Ee(i.Name,i.MachineDescription,i.Style.Color,i.Style.BorderColor)}else r=Ee("New machine","");e.machines.push(r),e.activeMachineId=r.Id,void 0!==a&&(void 0===a.LastUsedMachineId&&(a.LastUsedMachineId=r.Id),a.State===z.NoMachineLinked&&(a.State=z.InProgress));break;case"LoadCustomMachineActionType":if(void 0===e.machines.find((function(e){return e.Id===t.machineId})))throw Error("Loading an unknown machine, with id "+t.machineId);e.activeMachineId=t.machineId;break;case"ChangeCellSizeActionType":e.cellSize=t.cellSize;break;case"DeleteMachineActionType":e.activeMachineId===t.machineId&&(e.activeMachineId=void 0);var s=e.levelData.find((function(e){return e.LastUsedMachineId===t.machineId}));void 0!==s&&(s.LastUsedMachineId=void 0,s.State=z.NoMachineLinked);var o,c=e.machines.filter((function(e){return e.DirectlyDependingOn.some((function(e){return e===t.machineId}))})),l=Object(g.a)(c);try{for(l.s();!(o=l.n()).done;){var u=o.value,d=u.Setup.MachineInstances.map((function(e){return e.MachineId===t.machineId?Object(h.a)(Object(h.a)({},e),{},{Status:"Deleted"}):e}));u.Setup.MachineInstances=d,u.DirectlyDependingOn=u.DirectlyDependingOn.filter((function(e){return e!==t.machineId}))}}catch(v){l.e(v)}finally{l.f()}c.length>0&&e.deletedMachines.push(e.machines.find((function(e){return e.Id===t.machineId})));var C,p=e.machines.filter((function(e){return e.DependingOn.some((function(e){return e===t.machineId}))})),f=Object(g.a)(p);try{for(f.s();!(C=f.n()).done;){var m=C.value;m.DependingOn=m.DependingOn.filter((function(e){return e!==t.machineId})),m.DependingOnDeleted.push(t.machineId)}}catch(v){f.e(v)}finally{f.f()}e.machines=e.machines.filter((function(e){return e.Id!==t.machineId})),e.deletedMachines=e.deletedMachines.filter((function(n){return e.machines.some((function(e){return e.DependingOnDeleted.some((function(e){return e===t.machineId}))}))}));break;default:if(void 0===e.activeMachineId)return e;ke(e.machines.find((function(t){return t.Id===e.activeMachineId})),t,new xe(e.machines),e.cellSize)}switch(t.type){case"AddNewMachineActionType":case"ChannelChangedActionType":case"DeleteMachineActionType":case"FixMachineActionType":case"MachineAddedActionType":case"MachineMovedActionType":case"MachineRemovedActionType":void 0!==e.activeMachineId&&Ae(e)}}(e.players.find((function(t){return t.id===e.activePlayerId})),t)}switch(e.activeLevel=ce(e.activeLevel,t),t.type){case"ReportOutputActionType":!function(e){var t=e.players.find((function(t){return t.id===e.activePlayerId})),n=t.levelData.find((function(t){return t.Id===e.activeLevel.id}));if(je(e)){var r=e.activeLevel.tests.every((function(e){var t;if((null===(t=e.actualOutputs)||void 0===t?void 0:t.length)!==e.expectedOutputs.length)return!1;for(var n=function(t){var n=e.expectedOutputs[t];if(void 0!==e.actualOutputs&&-1===e.actualOutputs.findIndex((function(e){return e.Channel===n.Channel&&e.Content===n.Content})))return{v:!1}},r=0;r<e.expectedOutputs.length;r++){var a=n(r);if("object"===typeof a)return a.v}return!0}));n.State=r?z.Completed:z.InProgress}else n.State=z.NonValidMachineUsed;n.LastUsedMachineId=t.activeMachineId}(e);break;case"MachineRemovedActionType":var n=e.players.find((function(t){return t.id===e.activePlayerId})).levelData.find((function(t){return t.Id===e.activeLevel.id}));n.State===z.NonValidMachineUsed&&je(e)&&(n.State=z.InProgress)}}));function je(e){var t;return!1!==(null===(t=f(e))||void 0===t?void 0:t.DependingOn.filter((function(e){return j(e)})).every((function(t){return e.activeLevel.allowedMachines.some((function(e){return e===t}))})))}var Re=Object(B.b)((function(e,t){if(void 0===e){var n=(r="anonymous",{deletedMachines:[],id:Ge(),levelData:[],machines:[],name:r,showAnimations:!0,stepTime:10,activeMachineId:void 0,activeLevel:void 0,cellSize:Se.CellSize});return{players:[n],activePlayerId:n.id,messages:[],screen:"startMenu",activeLevel:void 0,movingOutput:void 0}}var r,a=Fe(e,t);return window.localStorage.setItem("Players",JSON.stringify(a.players)),window.localStorage.setItem("activePlayer",a.activePlayerId),a}),function(){var e;if(0===Number.parseInt(null!==(e=window.localStorage.getItem("Version"))&&void 0!==e?e:"0",10))return window.localStorage.removeItem("State"),void window.localStorage.setItem("Version","1");var t={players:JSON.parse(window.localStorage.getItem("Players")),activePlayerId:window.localStorage.getItem("activePlayer"),messages:[],screen:"startMenu",movingOutput:void 0};return null!==t.players?(t.players[0].cellSize=Se.CellSize,t):void 0}(),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Le=function(){return Re.getState()},Be=function(){function e(){Object(y.a)(this,e),this.greenInput=void 0,this.redInput=void 0}return Object(w.a)(e,[{key:"Act",value:function(e){switch(e.Channel){case r.Green:this.greenInput=e.Content;break;case r.Red:this.redInput=e.Content;break;default:throw Error("Machine does not have inputchannel "+e.Channel)}if(void 0===this.greenInput||void 0===this.redInput)return Promise.resolve([]);var t=this.greenInput.concat(this.redInput);this.greenInput=void 0,this.redInput=void 0;var n=[{Channel:r.Green,Content:t}];return Promise.resolve(n)}}]),e}(),Ne=function(){function e(){Object(y.a)(this,e),this.id="14"}return Object(w.a)(e,[{key:"GetActor",value:function(){return new Be}},{key:"GetType",value:function(){return{Style:{BorderColor:"Orange",Color:"Grey",Name:"Join",Description:"Exits with the input from the green channel before the red channel"},Api:{InputChannels:[r.Green,r.Red],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),Pe=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[],n="<"!==e.Content[0]?1:e.Content.indexOf(">")+1;return t.push({Content:e.Content.slice(0,n),Channel:r.Green}),t.push({Content:e.Content.slice(n),Channel:r.Red}),Promise.resolve(t)}},this.id="13"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{BorderColor:"Orange",Color:"Black",Name:"Split",Description:"The first character exits green, the other characters exit red"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green,r.Red]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),ze=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.id="2"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"white",BorderColor:"blue",Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),We=function(){function e(){Object(y.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:r.Green}),Promise.resolve(t)}},this.id="3"}return Object(w.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Style:{Color:"white",BorderColor:"#fff020",Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"},Api:{InputChannels:[r.Green],OutputChannels:[r.Green]},DependingOn:[],DirectlyDependingOn:[]}}}]),e}(),Ue=function(){function e(){Object(y.a)(this,e),this.machines=void 0,this.machines=[],this.init()}return Object(w.a)(e,[{key:"init",value:function(){this.machines=[],this.machines.push(new G),this.machines.push(new T),this.machines.push(new ze),this.machines.push(new We),this.machines.push(new A),this.machines.push(new D),this.machines.push(new x),this.machines.push(new F),this.machines.push(new M),this.machines.push(new k),this.machines.push(new I),this.machines.push(new E),this.machines.push(new Pe),this.machines.push(new Ne)}},{key:"FindMachine",value:function(e){var t=this.machines.find((function(t){return t.id===e}));if(void 0===t)throw new Error("No default machine found with id "+e);return t}},{key:"GetActor",value:function(e){if(j(e))return this.FindMachine(e).GetActor();var t,n=null===(t=p(Le()))||void 0===t?void 0:t.machines.find((function(t){return t.Id===e}));if(void 0===n)throw new Error("No custom machine found with id "+e);return this.CreateCustomActor(n.Setup)}},{key:"GetMachineType",value:function(e){if(j(e))return this.FindMachine(e).GetType();var t,n=null===(t=p(Le()))||void 0===t?void 0:t.machines.find((function(t){return t.Id===e}));if(void 0===n)throw new Error("No custom machine found with id "+e);return n}},{key:"GetAllMachines",value:function(){return this.machines.map((function(e){return e.id}))}},{key:"CreateCustomActor",value:function(e){var t=new He(e,!1);return{Act:function(e){var n=function(e){var t=e.indexOf("*");if(-1!==t){var n=function(){for(var n=[],r=0;-1!==(r=e.indexOf("<",r));){var a=e.indexOf(">",r),i=e.substring(r+1,a);n.push(parseInt(i,10)),r=a}for(var s=0;n.some((function(e){return e===s}));)s++;var o=e;do{o=o.substring(0,t)+"<"+s+">"+o.substring(t+1),t=o.indexOf("*")}while(-1!==t);return{v:[o,s]}}();if("object"===typeof n)return n.v}return[e,-1]}(e.Content),r=Object(d.a)(n,2),a=r[0],i=r[1],s={Content:a,Channel:e.Channel};return t.RunInput(s).then((function(e){return e.map((function(e){return{Channel:e.Channel,Content:S(e.Content,i)}}))}))}}}}],[{key:"GetStore",value:function(){return void 0===e.machineStore&&(e.machineStore=new e),e.machineStore}}]),e}();Ue.machineStore=void 0;function qe(e){return{type:"LoadLevelActionType",id:e}}function Ve(e){return{type:"ClearTestOutputActionType",testId:e}}function Ye(e){return{type:"SetMessagesActionType",messages:e}}var He=function(){function e(t,n){Object(y.a)(this,e),this.setup=void 0,this.machines=[],this.store=void 0,this.outputs=[],this.activeSetup=void 0,this.setup=t,this.activeSetup=n,this.store=Ue.GetStore(),this.HandleNextMessages=this.HandleNextMessages.bind(this),this.CalculateNextMessages=this.CalculateNextMessages.bind(this),this.RunInput=this.RunInput.bind(this),this.RunComputation=this.RunComputation.bind(this),this.SetDelay=this.SetDelay.bind(this)}return Object(w.a)(e,[{key:"GetStartMachine",value:function(e){var t="0";switch(e){case r.Green:t="0";break;case r.Red:t="1";break;case r.Blue:t="2";break;case r.Yellow:t="3"}return this.setup.MachineInstances.find((function(e){return e.MachineId===t}))}},{key:"RunComputation",value:function(){var t=Object(O.a)(b.a.mark((function t(n,r){var a,i,s,o,c,l=this;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.StopComputation(),this.machines=[],r.dispatch(Ve(n)),void 0!==(a=r.getState().activeLevel.tests.find((function(e){return e.id===n})))){t.next=8;break}return t.abrupt("return",Promise.resolve([]));case 8:i=[],s=Object(g.a)(a.inputs),t.prev=10,c=b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,e.next=3,l.RunInput(t,r,n,t.Order).catch((function(e){return Promise.reject(e)}));case 3:a=e.sent,i=i.concat(a.map((function(e){return{Content:e.Content,Channel:e.Channel,Order:t.Order}})));case 5:case"end":return e.stop()}}),e)})),s.s();case 13:if((o=s.n()).done){t.next=17;break}return t.delegateYield(c(),"t0",15);case 15:t.next=13;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(10),s.e(t.t1);case 22:return t.prev=22,s.f(),t.finish(22);case 25:return t.abrupt("return",Promise.resolve(i));case 26:case"end":return t.stop()}}),t,this,[[10,19,22,25]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"RunInput",value:function(e,t,n,r){this.outputs=[];var a=[],i=this.GetStartMachine(e.Channel);if(void 0!==i){var s=i.OutputChannels[0].Direction,o={Content:e.Content,Direction:s,Cell:i.Cell};a.push(o)}return void 0!==t&&this.activeSetup&&p(t.getState()).showAnimations&&t.dispatch(Ye(a)),this.OrderNewCalculation({messageLocations:a,store:t,testId:n,order:r})}},{key:"SetDelay",value:function(t,n,r){return new Promise((function(a,i){var s=window.setTimeout((function(){return t(n).then(a).catch(i)}),r);e.cancelComputation=function(){window.clearTimeout(s),i("Computation cancelled")}}))}},{key:"HandleNextMessages",value:function(){var e=Object(O.a)(b.a.mark((function e(t){var n,r,a,i,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.CalculateNextMessages(t.messageLocations);case 2:if(n=e.sent,r=Object(d.a)(n,2),a=r[0],(i=r[1]).length>0&&(this.outputs=this.outputs.concat(i)),void 0!==t.store){s=Object(g.a)(i);try{for(s.s();!(o=s.n()).done;)c=o.value,t.store.dispatch((l={Channel:c.Channel,Content:c.Content,Order:t.order},u=t.testId,{type:"ReportOutputActionType",outputMessage:l,testId:u}))}catch(C){s.e(C)}finally{s.f()}}if(void 0!==t.store&&this.activeSetup&&p(t.store.getState()).showAnimations&&t.store.dispatch(Ye(a)),!(a.length>0)){e.next=13;break}return e.abrupt("return",this.OrderNewCalculation(Object(h.a)(Object(h.a)({},t),{},{messageLocations:a})));case 13:return e.abrupt("return",Promise.resolve(this.outputs));case 14:case"end":return e.stop()}var l,u}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"OrderNewCalculation",value:function(t){e.stepCount++;var n=void 0===t.store||p(t.store.getState()).showAnimations;if(this.activeSetup&&n||e.stepCount%1e5===0){var r=void 0!==t.store&&n?100*p(t.store.getState()).stepTime:0;return this.SetDelay(this.HandleNextMessages,t,r)}return this.HandleNextMessages(t)}},{key:"CalculateNextMessages",value:function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a,i,s,o,c,l,u,h,d,C=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],i=Object(g.a)(t),e.prev=3,o=b.a.mark((function e(){var t,i,o,c,l,u,h,d,p,f,m,v;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.value,i=void 0,o=t.Cell;case 3:if(void 0!==i){e.next=10;break}if(void 0!==(o=Ie(C.setup,o,t.Direction))){e.next=7;break}return e.abrupt("break",10);case 7:i=C.setup.MachineInstances.find((function(e){return e.Cell.Column===o.Column&&e.Cell.Row===o.Row})),e.next=3;break;case 10:if(void 0!==o){e.next=13;break}return n.push({Cell:void 0,Direction:t.Direction,Content:t.Content}),e.abrupt("return","continue");case 13:if("Valid"===i.Status){e.next=15;break}return e.abrupt("return",{v:Promise.reject("Encountered invalid machine, check your machines")});case 15:return c=r.Green,void 0!==(l=i.InputChannels.find((function(e){return e.Direction===t.Direction})))&&(c=l.Channel),void 0===(u=C.machines.find((function(e){return e.id===i.Id})))&&(h=C.setup.MachineInstances.find((function(e){return e.Id===i.Id})),u={id:h.Id,actor:C.store.GetActor(h.MachineId)},C.machines.push(u)),d=u.actor,e.next=23,d.Act({Content:t.Content,Channel:c});case 23:p=e.sent,f=Object(g.a)(p);try{for(v=function(){var e=m.value,t=i.OutputChannels.find((function(t){return t.Channel===e.Channel}));if(void 0===t)throw Error("Channelmap "+e.Channel+"undefined");var n={Cell:i.Cell,Content:e.Content,Direction:t.Direction};a.push(n)},f.s();!(m=f.n()).done;)v()}catch(b){f.e(b)}finally{f.f()}case 26:case"end":return e.stop()}}),e)})),i.s();case 6:if((s=i.n()).done){e.next=15;break}return e.delegateYield(o(),"t0",8);case 8:if("continue"!==(c=e.t0)){e.next=11;break}return e.abrupt("continue",13);case 11:if("object"!==typeof c){e.next=13;break}return e.abrupt("return",c.v);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(3),i.e(e.t1);case 20:return e.prev=20,i.f(),e.finish(20);case 23:l=[],u=0,h=n;case 25:if(!(u<h.length)){e.next=41;break}d=h[u],e.t2=d.Direction,e.next=e.t2===L.Up?30:e.t2===L.Down?32:e.t2===L.Right?34:e.t2===L.Left?36:38;break;case 30:return l.push({Content:d.Content,Channel:r.Blue}),e.abrupt("break",38);case 32:return l.push({Content:d.Content,Channel:r.Red}),e.abrupt("break",38);case 34:return l.push({Content:d.Content,Channel:r.Green}),e.abrupt("break",38);case 36:return l.push({Content:d.Content,Channel:r.Yellow}),e.abrupt("break",38);case 38:u++,e.next=25;break;case 41:return e.abrupt("return",[a,l]);case 42:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"StopComputation",value:function(){e.cancelComputation&&(e.cancelComputation(),e.cancelComputation=void 0),e.stepCount=0}}]),e}();He.cancelComputation=void 0,He.stepCount=void 0;var Xe=Object(c.b)((function(e){return{ShowAnimations:p(e).showAnimations,StepTime:p(e).stepTime}}),{UpdateStepTime:function(e){return{type:"UpdateStepTime",stepTime:e}},UpdateShowAnimations:function(e){return{type:"UpdateShowAnimations",show:e}}})((function(e){return i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}},i.a.createElement("div",{style:{paddingRight:30}},i.a.createElement("button",{onClick:He.StopComputation,title:"Stop the running computation"},"Stop")),i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("label",{title:"Show animations, will calculate as fast as possible when turned of"},"Animations"),e.ShowAnimations&&i.a.createElement("label",{title:"Step time in tenths of seconds, lower for faster animations"},"Step Time")),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:100}},i.a.createElement("button",{onClick:function(){e.UpdateShowAnimations(!e.ShowAnimations)},style:{marginLeft:5,width:63}},e.ShowAnimations?"On":"Off"),e.ShowAnimations&&i.a.createElement(C,{value:e.StepTime,valueChanged:e.UpdateStepTime})))}));function _e(e,t,n){return{type:"ChannelChangedActionType",machineInstanceId:e,channel:t,angle:n}}var Je="MachineInstance",Ke="NewMachine",Ze="OutputChannel",Qe="Grid",$e=function(e){var t;if(""===e)t="<Empty>";else{t=e;for(var n=0;-1!==(n=t.indexOf("<",n));){var r=t.indexOf(">",n);t=t.substring(0,n)+"?"+t.substring(r+1)}}return t},et=function(e){var t=Object(l.c)({item:{type:Ze,channel:e.Channel,machineInstanceId:e.MachineInstanceId,offsetX:e.OffsetX,offsetY:e.OffsetY},begin:function(){e.OnClick(Object(h.a)(Object(h.a)({},e.Channel),{},{Status:"DoesNotExist"}))},end:function(t,n){if(!n.didDrop()){var r=n.getItem(),a=Ce(n,e.OffsetX,e.OffsetY);if(void 0!==a){var i=a+2.75*Math.PI,s=Math.floor(i/(.5*Math.PI))%4;e.OnClick({Direction:s,Channel:e.Channel.Channel,Status:r.channel.Status},a)}}},collect:function(e){return{isDragging:e.isDragging()}}}),n=Object(d.a)(t,3),r=n[0].isDragging,s=n[1],o=n[2],c={width:tt*e.CellSize,marginLeft:rt*e.CellSize,opacity:r?0:1,height:nt*e.CellSize,pointerEvents:"all"};return Object(a.useEffect)((function(){o(Object(u.b)(),{captureDraggingState:!0})}),[o]),i.a.createElement("div",{ref:s,style:c,onClick:function(){var t=3===e.Channel.Direction?0:e.Channel.Direction+1;e.OnClick({Direction:t,Channel:e.Channel.Channel,Status:e.Channel.Status})}})},tt=.07,nt=.31,rt=.05,at=function(e){if(0===e.ChannelModels.length)return i.a.createElement(i.a.Fragment,null);var t=e.cellSize*tt,n=e.cellSize*nt,r=.06*e.cellSize,a=e.cellSize*rt,s=(e.cellSize-(e.ChannelModels.length*(t+a)-a))/2,o=e.cellSize/2-n-r,c=t+a,l=0,u={position:"absolute",marginLeft:s-a,marginTop:o,display:"flex",flexDirection:"row"},h="";switch(e.ChannelModels[0].Direction){case L.Down:h="rotate(180deg)",o=e.cellSize/2+r,s=e.cellSize-s-t,c=-c;break;case L.Left:h="rotate(270deg)";var d=o;o=e.cellSize-s-t,s=d,l=-c,c=0;break;case L.Right:h="rotate(90deg)",o=s,s=e.cellSize/2+r,l=c,c=0}var C={transform:h,height:e.cellSize,width:e.cellSize,position:"absolute",pointerEvents:"none"};return i.a.createElement("div",{style:C},i.a.createElement("div",{style:u},e.ChannelModels.map((function(t,n){return i.a.createElement(et,{key:n,Channel:t,OnClick:e.OnChanged,MachineInstanceId:e.MachineInstanceId,OffsetX:s+c*n,OffsetY:o+l*n,CellSize:e.cellSize})}))))},it=n(19),st=n(18),ot=function(){function e(t,n){if(Object(y.a)(this,e),this.ctx=void 0,this.innerColor=void 0,this.borderColor=void 0,this.inputChannels=void 0,this.outputChannels=void 0,this.draggedOutput=void 0,this.draggedDirection=void 0,this.backgroundColor=void 0,this.drawConstants=void 0,this.ctx=t,this.innerColor=n.MachineStyle.Color,this.borderColor=n.MachineStyle.BorderColor,this.inputChannels=n.InputChannels.sort((function(e,t){return e.Direction>t.Direction?1:-1})),this.outputChannels=n.OutputChannels,this.draggedOutput=n.MovingOutput,this.backgroundColor=n.BackgroundColor,this.drawConstants=new de(n.CellSize),void 0!==this.draggedOutput&&void 0!==this.draggedOutput){var r=this.draggedOutput.angle+2.75*Math.PI;this.draggedDirection=Math.floor(r/(.5*Math.PI))%4}}return Object(w.a)(e,[{key:"DrawMachine",value:function(){this.DrawBody();var e,t=Object(g.a)(this.inputChannels);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.DrawInputGradient(n)}}catch(h){t.e(h)}finally{t.f()}var r,a=Object(g.a)(this.outputChannels);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.DrawOutputGroup(i,!0)}}catch(h){a.e(h)}finally{a.f()}if(void 0!==this.draggedOutput&&this.DraggedOutputDrawer(!0),0===this.inputChannels.length)this.DrawNoInputOutline();else{var s=0,o=0;do{o=(o+1)%this.inputChannels.length,this.DrawInputOutline(this.inputChannels[s].Direction,this.inputChannels[o].Direction),s++}while(s<this.inputChannels.length)}var c,l=Object(g.a)(this.outputChannels);try{for(l.s();!(c=l.n()).done;){var u=c.value;this.DrawOutputGroup(u,!1)}}catch(h){l.e(h)}finally{l.f()}void 0!==this.draggedOutput&&this.DraggedOutputDrawer(!1)}},{key:"SetShadowStyle",value:function(){this.ctx.shadowColor="black",this.ctx.shadowOffsetX=this.drawConstants.shadeOffset,this.ctx.shadowOffsetY=this.drawConstants.shadeOffset}},{key:"ClearShadowStyle",value:function(){this.ctx.shadowColor="transparent",this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0}},{key:"DrawOutputGroup",value:function(e,t){this.ClearShadowStyle();var n=pe(e[0].Direction)+Math.PI,r=e.filter((function(e){return"DoesNotExist"!==e.Status})),a=-(r.length-1)/2*this.drawConstants.outputSplit;if(this.draggedDirection===e[0].Direction)for(var i=-r.length/2*this.drawConstants.outputSplit,s=!1,o=Math.sin(this.draggedOutput.angle-n)*this.drawConstants.outputStartLength,c=0;c<r.length;c++)!s&&o<a&&(s=!0,i+=this.drawConstants.outputSplit),t?this.DrawOutputChannel("black",n,i,2*this.drawConstants.shadeOffset):(this.DrawOutputChannel("black",n,i,this.drawConstants.shadeOffset),this.DrawOutputChannel(r[c].Channel,n,i)),a+=this.drawConstants.outputSplit,i+=this.drawConstants.outputSplit;else{var l,u=Object(g.a)(r);try{for(u.s();!(l=u.n()).done;){var h=l.value;t?this.DrawOutputChannel("black",n,a,2*this.drawConstants.shadeOffset):(this.DrawOutputChannel("black",n,a,this.drawConstants.shadeOffset),this.DrawOutputChannel(h.Channel,n,a)),a+=this.drawConstants.outputSplit}}catch(d){u.e(d)}finally{u.f()}}}},{key:"DraggedOutputDrawer",value:function(e){this.ClearShadowStyle(),e?this.DrawDraggedOutput("black",2*this.drawConstants.shadeOffset):(this.DrawDraggedOutput("black",this.drawConstants.shadeOffset),this.DrawDraggedOutput(this.draggedOutput.channel.Channel,0))}},{key:"DrawDraggedOutput",value:function(e,t){var n=this.draggedOutput.angle+.25*Math.PI,r=Math.floor(n/(.5*Math.PI))*Math.PI*.5,a=this.drawConstants.center+this.drawConstants.outputStartLength*Math.cos(this.draggedOutput.angle)+t,i=this.drawConstants.center+this.drawConstants.outputStartLength*Math.sin(this.draggedOutput.angle)+t,s=a+(this.drawConstants.outputLength-this.drawConstants.outputStartLength)*Math.cos(r),o=i+(this.drawConstants.outputLength-this.drawConstants.outputStartLength)*Math.sin(r);this.ctx.beginPath(),this.ctx.moveTo(this.drawConstants.center,this.drawConstants.center);var c=this.ctx.createRadialGradient(this.drawConstants.center,this.drawConstants.center,0,this.drawConstants.center,this.drawConstants.center,this.drawConstants.outputLength);c.addColorStop(0,this.innerColor),c.addColorStop(.6,e),this.ctx.arcTo(a,i,s,o,this.drawConstants.outputRadius),this.ctx.lineTo(s,o),this.ctx.strokeStyle=c,this.ctx.lineWidth=this.drawConstants.outputWidth,this.ctx.stroke()}},{key:"DrawOutputChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.ctx.beginPath(),this.ctx.moveTo(this.drawConstants.center,this.drawConstants.center);var a=Math.asin(n/this.drawConstants.outputStartLength),i=this.drawConstants.center+this.drawConstants.outputStartLength*Math.cos(t+a)+r,s=this.drawConstants.center+this.drawConstants.outputStartLength*Math.sin(t+a)+r,o=i+(this.drawConstants.outputLength-this.drawConstants.outputStartLength)*Math.cos(t),c=s+(this.drawConstants.outputLength-this.drawConstants.outputStartLength)*Math.sin(t),l=this.ctx.createRadialGradient(this.drawConstants.center,this.drawConstants.center,0,this.drawConstants.center,this.drawConstants.center,this.drawConstants.outputLength);l.addColorStop(0,this.innerColor),l.addColorStop(.6,e),this.ctx.arcTo(i,s,o,c,this.drawConstants.outputRadius),this.ctx.lineTo(o,c),this.ctx.strokeStyle=l,this.ctx.lineWidth=this.drawConstants.outputWidth,this.ctx.stroke()}}]),e}(),ct=function(e){Object(it.a)(n,e);var t=Object(st.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"DrawBody",value:function(){this.ctx.beginPath(),this.ClearShadowStyle(),this.ctx.moveTo(this.drawConstants.center+this.drawConstants.circleRadius,this.drawConstants.center),this.ctx.arc(this.drawConstants.center,this.drawConstants.center,this.drawConstants.circleRadius,0,2*Math.PI),this.ctx.fillStyle=this.innerColor,this.ctx.fill()}},{key:"DrawInputOutline",value:function(e,t){var n=this.drawConstants.center,r=pe(e),a=r+this.drawConstants.apertureAngle,i=n+this.drawConstants.circleRadius*Math.cos(a),s=n+this.drawConstants.circleRadius*Math.sin(a),o=i+this.drawConstants.armLength*Math.cos(r+this.drawConstants.armAngle),c=s+this.drawConstants.armLength*Math.sin(r+this.drawConstants.armAngle),l=pe(t),u=l-this.drawConstants.apertureAngle,h=n+this.drawConstants.circleRadius*Math.cos(u),d=n+this.drawConstants.circleRadius*Math.sin(u),C=h+this.drawConstants.armLength*Math.cos(l-this.drawConstants.armAngle),p=d+this.drawConstants.armLength*Math.sin(l-this.drawConstants.armAngle);this.ctx.beginPath(),this.ctx.moveTo(o,c),this.ctx.lineTo(i,s),this.ctx.arc(n,n,this.drawConstants.circleRadius,a,u),this.ctx.lineTo(C,p),this.ctx.strokeStyle=this.borderColor,this.ctx.lineWidth=this.drawConstants.borderWidth,this.SetShadowStyle(),this.ctx.stroke()}},{key:"DrawNoInputOutline",value:function(){this.ctx.beginPath(),this.ctx.moveTo(this.drawConstants.center+this.drawConstants.circleRadius,this.drawConstants.center),this.ctx.arc(this.drawConstants.center,this.drawConstants.center,this.drawConstants.circleRadius,0,2*Math.PI),this.ctx.strokeStyle=this.borderColor,this.SetShadowStyle(),this.ctx.lineWidth=this.drawConstants.borderWidth,this.ctx.stroke()}},{key:"DrawInputGradient",value:function(e){var t=pe(e.Direction),n=t-this.drawConstants.apertureAngle,r=this.drawConstants.center+this.drawConstants.circleRadius*Math.cos(n),a=this.drawConstants.center+this.drawConstants.circleRadius*Math.sin(n),i=r+this.drawConstants.armLength*Math.cos(t-this.drawConstants.armAngle),s=a+this.drawConstants.armLength*Math.sin(t-this.drawConstants.armAngle),o=t+this.drawConstants.apertureAngle,c=this.drawConstants.center+this.drawConstants.circleRadius*Math.cos(o),l=this.drawConstants.center+this.drawConstants.circleRadius*Math.sin(o),u=c+this.drawConstants.armLength*Math.cos(t+this.drawConstants.armAngle),h=l+this.drawConstants.armLength*Math.sin(t+this.drawConstants.armAngle);this.ctx.beginPath(),this.ClearShadowStyle(),this.ctx.moveTo(r,a);var d=Math.atan2(s-this.drawConstants.center,i-this.drawConstants.center),C=Math.atan2(h-this.drawConstants.center,u-this.drawConstants.center);this.ctx.arc(this.drawConstants.center,this.drawConstants.center,this.drawConstants.circleRadius+this.drawConstants.protrudingArm,d,C),this.ctx.arc(this.drawConstants.center,this.drawConstants.center,this.drawConstants.circleRadius-.5*this.drawConstants.borderWidth,o,n,!0);var p=this.ctx.createRadialGradient(this.drawConstants.center,this.drawConstants.center,this.drawConstants.circleRadius,this.drawConstants.center,this.drawConstants.center,this.drawConstants.circleRadius+this.drawConstants.protrudingArm);e.UseMachineColor?p.addColorStop(0,this.innerColor):(p.addColorStop(0,e.Channel),p.addColorStop(.7,e.Channel),p.addColorStop(.8,this.backgroundColor)),p.addColorStop(1,this.backgroundColor),this.ctx.fillStyle=p,this.ctx.fill()}}]),n}(ot),lt=function(e){Object(it.a)(n,e);var t=Object(st.a)(n);function n(e,r){var a;return Object(y.a)(this,n),(a=t.call(this,e,r)).closeSide=void 0,a.farSide=void 0,a.innerClose=void 0,a.innerFar=void 0,a.armProtrudingClose=void 0,a.armProtrudingFar=void 0,a.armWidthClose=void 0,a.armWidthFar=void 0,a.closeSide=a.drawConstants.center-a.drawConstants.halfSquareSize,a.farSide=a.drawConstants.center+a.drawConstants.halfSquareSize,a.innerClose=a.drawConstants.center-.5*a.drawConstants.aperture,a.innerFar=a.drawConstants.center+.5*a.drawConstants.aperture,a.armProtrudingClose=a.closeSide-Math.cos(a.drawConstants.armAngle)*a.drawConstants.armLength,a.armProtrudingFar=a.farSide+Math.cos(a.drawConstants.armAngle)*a.drawConstants.armLength,a.armWidthClose=a.innerClose-Math.sin(a.drawConstants.armAngle)*a.drawConstants.armLength,a.armWidthFar=a.innerFar+Math.sin(a.drawConstants.armAngle)*a.drawConstants.armLength,a}return Object(w.a)(n,[{key:"DrawBody",value:function(){this.ctx.beginPath(),this.ClearShadowStyle(),this.ctx.moveTo(this.drawConstants.center+this.drawConstants.circleRadius,this.drawConstants.center),this.ctx.rect(this.drawConstants.center-this.drawConstants.halfSquareSize,this.drawConstants.center-this.drawConstants.halfSquareSize,2*this.drawConstants.halfSquareSize,2*this.drawConstants.halfSquareSize),this.ctx.fillStyle=this.innerColor,this.ctx.fill(),this.ctx.beginPath()}},{key:"DrawInputOutline",value:function(e,t){switch(this.ctx.beginPath(),this.ctx.strokeStyle=this.borderColor,this.SetShadowStyle(),this.ctx.lineWidth=this.drawConstants.borderWidth,e){case L.Down:this.ctx.moveTo(this.armWidthFar,this.armProtrudingClose),this.ctx.lineTo(this.innerFar,this.closeSide);break;case L.Left:this.ctx.moveTo(this.armProtrudingFar,this.armWidthFar),this.ctx.lineTo(this.farSide,this.innerFar);break;case L.Up:this.ctx.moveTo(this.armWidthClose,this.armProtrudingFar),this.ctx.lineTo(this.innerClose,this.farSide);break;case L.Right:this.ctx.moveTo(this.armProtrudingClose,this.armWidthClose),this.ctx.lineTo(this.closeSide,this.innerClose);break;default:throw Error("Unknown direction")}var n=e;do{switch(n){case L.Down:this.ctx.lineTo(this.farSide,this.closeSide);break;case L.Left:this.ctx.lineTo(this.farSide,this.farSide);break;case L.Up:this.ctx.lineTo(this.closeSide,this.farSide);break;case L.Right:this.ctx.lineTo(this.closeSide,this.closeSide);break;default:throw Error("Unknown direction")}n=(n+1)%4}while(n!==t);switch(t){case L.Down:this.ctx.lineTo(this.innerClose,this.closeSide),this.ctx.lineTo(this.armWidthClose,this.armProtrudingClose);break;case L.Left:this.ctx.lineTo(this.farSide,this.innerClose),this.ctx.lineTo(this.armProtrudingFar,this.armWidthClose);break;case L.Up:this.ctx.lineTo(this.innerFar,this.farSide),this.ctx.lineTo(this.armWidthFar,this.armProtrudingFar);break;case L.Right:this.ctx.lineTo(this.closeSide,this.innerFar),this.ctx.lineTo(this.armProtrudingClose,this.armWidthFar);break;default:throw Error("Unknown direction")}this.ctx.stroke()}},{key:"DrawNoInputOutline",value:function(){this.ctx.beginPath(),this.ctx.moveTo(this.drawConstants.center+this.drawConstants.circleRadius,this.drawConstants.center),this.ctx.rect(this.drawConstants.center-this.drawConstants.halfSquareSize,this.drawConstants.center-this.drawConstants.halfSquareSize,2*this.drawConstants.halfSquareSize,2*this.drawConstants.halfSquareSize),this.ctx.strokeStyle=this.borderColor,this.SetShadowStyle(),this.ctx.lineWidth=this.drawConstants.borderWidth,this.ctx.stroke()}},{key:"DrawInputGradient",value:function(e){var t;switch(this.ctx.beginPath(),this.ClearShadowStyle(),e.Direction){case L.Down:this.ctx.moveTo(this.innerClose,this.closeSide+.4*this.drawConstants.borderWidth),this.ctx.lineTo(this.armWidthClose,this.armProtrudingClose),this.ctx.lineTo(this.armWidthFar,this.armProtrudingClose),this.ctx.lineTo(this.innerFar,this.closeSide+.4*this.drawConstants.borderWidth),this.ctx.lineTo(this.innerClose,this.closeSide+.4*this.drawConstants.borderWidth),t=this.ctx.createLinearGradient(this.drawConstants.center,this.closeSide+.4*this.drawConstants.borderWidth,this.drawConstants.center,this.armProtrudingClose);break;case L.Left:this.ctx.moveTo(this.farSide-.4*this.drawConstants.borderWidth,this.innerClose),this.ctx.lineTo(this.armProtrudingFar,this.armWidthClose),this.ctx.lineTo(this.armProtrudingFar,this.armWidthFar),this.ctx.lineTo(this.farSide-.4*this.drawConstants.borderWidth,this.innerFar),this.ctx.lineTo(this.farSide-.4*this.drawConstants.borderWidth,this.innerClose),t=this.ctx.createLinearGradient(this.farSide-.4*this.drawConstants.borderWidth,this.drawConstants.center,this.armProtrudingFar,this.drawConstants.center);break;case L.Up:this.ctx.moveTo(this.innerFar,this.farSide-.4*this.drawConstants.borderWidth),this.ctx.lineTo(this.armWidthFar,this.armProtrudingFar),this.ctx.lineTo(this.armWidthClose,this.armProtrudingFar),this.ctx.lineTo(this.innerClose,this.farSide-.4*this.drawConstants.borderWidth),this.ctx.lineTo(this.innerFar,this.farSide-.4*this.drawConstants.borderWidth),t=this.ctx.createLinearGradient(this.drawConstants.center,this.farSide-.4*this.drawConstants.borderWidth,this.drawConstants.center,this.armProtrudingFar);break;case L.Right:this.ctx.moveTo(this.closeSide+.4*this.drawConstants.borderWidth,this.innerFar),this.ctx.lineTo(this.armProtrudingClose,this.armWidthFar),this.ctx.lineTo(this.armProtrudingClose,this.armWidthClose),this.ctx.lineTo(this.closeSide+.4*this.drawConstants.borderWidth,this.innerClose),this.ctx.lineTo(this.closeSide+.4*this.drawConstants.borderWidth,this.innerFar),t=this.ctx.createLinearGradient(this.closeSide+.4*this.drawConstants.borderWidth,this.drawConstants.center,this.armProtrudingClose,this.drawConstants.center);break;default:throw Error("Unknown direction")}e.UseMachineColor?t.addColorStop(0,this.innerColor):(t.addColorStop(0,e.Channel),t.addColorStop(.9,e.Channel),t.addColorStop(.9,this.backgroundColor)),t.addColorStop(1,this.backgroundColor),this.ctx.fillStyle=t,this.ctx.fill()}}]),n}(ot),ut=function(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(t.current){var n=t.current.getContext("2d");n.clearRect(0,0,e.CellSize,e.CellSize),(e.IsDefault?new ct(n,e):new lt(n,e)).DrawMachine()}})),i.a.createElement("div",{style:{height:e.CellSize,width:e.CellSize,position:"absolute"}},i.a.createElement("canvas",{ref:t,style:{position:"absolute"},height:e.CellSize,width:e.CellSize}))},ht=n(23),dt=function(e){Object(it.a)(n,e);var t=Object(st.a)(n);function n(e){var r;return Object(y.a)(this,n),(r=t.call(this,e)).onClicked=r.onClicked.bind(Object(ht.a)(r)),r}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props.cellSize-2,t={position:"absolute",height:.2*e,width:.4*e,marginLeft:.3*e,marginTop:.05*e,pointerEvents:"all"},n="";switch(this.props.Direction){case L.Left:n="rotate(90deg)";break;case L.Up:n="rotate(180deg)";break;case L.Right:n="rotate(270deg)"}var r={transform:n,height:e,width:e,position:"absolute",pointerEvents:"none"};return i.a.createElement("div",{style:r},i.a.createElement("div",{style:t,onClick:this.onClicked}))}},{key:"onClicked",value:function(e){this.props.OnClick(this.props.Direction)}}]),n}(i.a.Component),Ct=Object(c.b)((function(e,t){var n,r=f(e),a=be(r.Style.Color,.3),i=r.Setup.MachineInstances.find((function(e){return e.Id===t.MachineInstanceId})),s=j(i.MachineId)?void 0:"Deleted"===i.Status?p(e).deletedMachines.find((function(e){return e.Id===i.MachineId})).Style:p(e).machines.find((function(e){return e.Id===i.MachineId})).Style,o=(null===(n=e.movingOutput)||void 0===n?void 0:n.machineInstanceId)===t.MachineInstanceId?e.movingOutput:void 0;return{MachineInstance:i,MachineStyle:s,BackgroundColor:a,MovingOutput:o}}),(function(e,t){return{ChangeOwnChannel:function(n,r){return e(_e(t.MachineInstanceId,n,r))},ChangeChannel:function(t,n,r){return e(_e(t,n,r))},ChangeInputChannel:function(n,r){return e(function(e,t,n){return{type:"InputChannelChangedActionType",machineInstanceId:e,channelIndex:t,channel:n}}(t.MachineInstanceId,n,r))},FixMachine:function(){return e({type:"FixMachineActionType",machineInstanceId:t.MachineInstanceId})}}}))((function(e){var t,n=Object(l.c)({item:{type:Je,id:e.MachineInstanceId},collect:function(e){return{isDragging:!!e.isDragging()}}}),r=Object(d.a)(n,3),a=r[0].isDragging,s=r[1],o=r[2],c=Ue.GetStore().GetMachineType(e.MachineInstance.MachineId).Api,u=function(t){var n=e.MachineInstance.InputChannels.findIndex((function(e){return e.Direction===t})),r=e.MachineInstance.InputChannels[n],a=c.InputChannels.indexOf(r.Channel),i={Channel:a===c.InputChannels.length-1?c.InputChannels[0]:c.InputChannels[a+1],Direction:r.Direction,Status:r.Status};e.ChangeInputChannel(n,i)},C=null!==(t=e.MachineStyle)&&void 0!==t?t:Ue.GetStore().GetMachineType(e.MachineInstance.MachineId).Style,p=c.InputChannels.length>1||e.MachineInstance.InputChannels.some((function(e){return"Exists"===e.Status&&e.Channel!==c.InputChannels[0]})),f=e.MachineInstance.InputChannels.filter((function(e){return"DoesNotExist"!==e.Status})).map((function(e){return Object(h.a)({UseMachineColor:!p},e)})),m={height:e.CellSize,width:e.CellSize,margin:1};switch(e.MachineInstance.Status){case"Deleted":m.borderBottom=e.CellSize/18+"px dotted red",m.boxSizing="border-box",m.opacity=.4;break;case"ChannelsInvalid":m.borderBottom=e.CellSize/18+"px dotted orange",m.boxSizing="border-box"}var v,b=[],O=Object(g.a)(e.MachineInstance.OutputChannels);try{var y=function(){var e=v.value,t=b.find((function(t){return t[0].Direction===e.Direction}));void 0===t?b.push([e]):t.push(e)};for(O.s();!(v=O.n()).done;)y()}catch(S){O.e(S)}finally{O.f()}var w=.5*e.CellSize-.9*.28*e.CellSize;return i.a.createElement("div",{ref:o,style:m},!a&&i.a.createElement(ut,{MachineStyle:C,IsDefault:j(e.MachineInstance.MachineId),BackgroundColor:e.BackgroundColor,InputChannels:f,OutputChannels:b,MovingOutput:void 0!==e.MovingOutput?e.MovingOutput:void 0,CellSize:e.CellSize}),i.a.createElement("div",{style:{position:"absolute",marginLeft:w,marginTop:w,height:.9*.28*e.CellSize*2,width:.9*.28*e.CellSize*2},ref:s,onClick:function(){"Valid"!==e.MachineInstance.Status&&e.FixMachine()}}),f.filter((function(e){return!e.UseMachineColor})).map((function(t,n){return i.a.createElement(dt,{key:n,Direction:t.Direction,OnClick:u,cellSize:e.CellSize})})),b.map((function(t,n){return i.a.createElement(at,{key:n,ChannelModels:t,OnChanged:e.ChangeOwnChannel,MachineInstanceId:e.MachineInstanceId,cellSize:e.CellSize})})))})),pt=Object(c.b)((function(e,t){var n=f(e),r=n.Setup.MachineInstances.find((function(e){return he(e.Cell,t.cellId)})),a=n.ExitCells.find((function(e){return he(e.Cell,t.cellId)})),i=e.messages.find((function(e){return he(e.Cell,t.cellId)})),s=p(e).cellSize;return{Exit:void 0===a?void 0:a.Direction,Message:void 0===i?void 0:i.Content,MachineInstanceId:void 0===r?void 0:r.Id,CellSize:s}}),{OnNewMachine:function(e,t,n){return{type:"MachineAddedActionType",machineId:e,cell:n,api:t}},OnMovedMachine:function(e,t){return{type:"MachineMovedActionType",machineInstanceId:e,newCell:t}},ChangeChannel:_e})((function(e){var t,n=Object(l.e)({accept:[Je,Ke,Ze],drop:function(t,n){switch(t.type){case Je:e.OnMovedMachine(n.getItem().id,e.cellId);break;case Ke:var r=n.getItem(),a=Ue.GetStore().GetMachineType(r.id);e.OnNewMachine(r.id,a.Api,e.cellId);break;case Ze:var i=n.getItem(),s=Ce(n,i.offsetX,i.offsetY);if(void 0!==s){var o=s+2.75*Math.PI,c=Math.floor(o/(.5*Math.PI))%4;e.ChangeChannel(i.machineInstanceId,{Direction:c,Channel:i.channel.Channel,Status:i.channel.Status},s)}}}}),r=Object(d.a)(n,2)[1],a={height:e.smallHeigth?.625*e.CellSize:e.CellSize,width:e.smallWidth?.625*e.CellSize:e.CellSize,border:"1px solid black",float:"left",marginTop:-1,marginLeft:-1,position:"relative"},s=.2*e.CellSize;if(void 0!==e.Exit)switch(e.Exit){case L.Up:a.borderRight="1px solid black",a.borderBottom="1px solid black",a.borderLeft="1px solid black",a.borderTop=s+"px solid blue",a.marginTop=-s;break;case L.Down:a.borderRight="1px solid black",a.borderTop="1px solid black",a.borderLeft="1px solid black",a.borderBottom=s+"px solid red",a.marginBottom=1-s;break;case L.Right:a.borderTop="1px solid black",a.borderBottom="1px solid black",a.borderLeft="1px solid black",a.borderRight=s+"px solid green",a.marginRight=1-s;break;case L.Left:a.borderRight="1px solid black",a.borderBottom="1px solid black",a.borderTop="1px solid black",a.borderLeft=s+"px solid #fff020",a.marginLeft=-s}else a.borderRight="1px solid black",a.borderBottom="1px solid black",a.borderLeft="1px solid black",a.borderTop="1px solid black";return void 0!==e.Message&&(t=$e(e.Message)),i.a.createElement("div",{style:a,ref:r},void 0!==t&&t,void 0!==e.MachineInstanceId?i.a.createElement(Ct,{MachineInstanceId:e.MachineInstanceId,CellSize:e.CellSize-2}):"")}));var ft,mt=Object(c.b)((function(e){var t=f(e),n=p(e).cellSize;return{Rows:t.Setup.NumberOfRows,Columns:t.Setup.NumberOfColumns,Style:t.Style,CellSize:n}}))((function(e){for(var t=[],n=0;n<e.Rows;n++){for(var r=[],a=0;a<e.Columns;a++)r.push(i.a.createElement(pt,{key:a,cellId:{Row:n,Column:a},smallHeigth:0===n||n===e.Rows-1,smallWidth:0===a||a===e.Columns-1}));t.push(i.a.createElement("div",{key:n,style:{display:"flex",flexDirection:"row",opacity:1}},r))}return i.a.createElement("div",{style:{position:"absolute",borderColor:be(e.Style.BorderColor,.4),borderWidth:.2*e.CellSize,borderStyle:"solid",marginBottom:0}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",backgroundColor:be(e.Style.Color,.3)}},t))}));!function(e){e[e.NotChecked=0]="NotChecked",e[e.NotFullfilled=1]="NotFullfilled",e[e.Fullfilled=2]="Fullfilled",e[e.NotMatched=3]="NotMatched"}(ft||(ft={}));var vt=function(e){var t={display:"flex",flexFlow:"row",justifyContent:e.Input?"flex-start":"flex-end",marginBottom:1},n={display:"flex",flexFlow:"row"};switch(e.Status){case ft.Fullfilled:n.backgroundColor="#d9ffb3",e.Editable&&(n.borderRight="solid green",n.borderBottom="solid green");break;case ft.NotFullfilled:break;case ft.NotMatched:n.border="solid red",n.backgroundColor="#ffb3b3"}return i.a.createElement("div",{style:t},i.a.createElement("div",{style:n},e.Input&&e.Editable&&i.a.createElement("button",{onClick:e.Remove},"-"),e.Input&&(e.Editable&&e.AllowedInputColors.length>1?i.a.createElement("select",{value:e.Message.Channel,style:{backgroundColor:e.Message.Channel},onChange:function(t){void 0!==e.OnMessageChanged&&e.OnMessageChanged({Content:e.Message.Content,Channel:t.target.value})}},e.AllowedInputColors.map((function(e,t){return i.a.createElement("option",{value:e,key:t,style:{backgroundColor:e}})}))):i.a.createElement("div",{style:{backgroundColor:e.Message.Channel,width:10}})),e.Editable?i.a.createElement("input",{value:e.Message.Content,onChange:function(t){void 0!==e.OnMessageChanged&&e.OnMessageChanged({Content:t.target.value,Channel:e.Message.Channel})}}):i.a.createElement("label",null,$e(e.Message.Content)),!e.Input&&i.a.createElement("div",{style:{backgroundColor:e.Message.Channel,width:10}})))},bt=Object(c.b)(void 0,{RemoveTest:function(e){return{type:"RemoveTestActionType",testId:e}},RemoveInput:function(e,t){return{type:"RemoveInputActionType",testId:e,order:t}},UpdateInput:function(e,t){return{type:"UpdateInputActionType",input:e,testId:t}},AddInput:function(e){return{type:"AddInputActionType",testId:e}}})((function(e){for(var t=Object(a.useState)(void 0),n=Object(d.a)(t,2),s=n[0],o=n[1],c=e.Test.inputs,l=e.Test.expectedOutputs,u=[],C=0,p=function(t){u.push(i.a.createElement("div",{key:C++,style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement(vt,{Message:c[t],Input:!0,Status:ft.NotChecked,Editable:e.Test.editable,AllowedInputColors:[r.Green,r.Blue,r.Red,r.Yellow],Remove:function(){return e.RemoveInput(e.Test.id,t)},OnMessageChanged:function(n){return e.UpdateInput(Object(h.a)(Object(h.a)({},n),{},{Order:t}),e.Test.id)}})));var n=l.filter((function(e){return e.Order===t})),a=void 0;void 0!==e.Test.actualOutputs&&(a=e.Test.actualOutputs.filter((function(e){return e.Order===t})));for(var s=function(t){var s=n[t],o=ft.NotChecked;if(void 0!==a){var c=a.findIndex((function(e){return e.Channel===s.Channel&&e.Content===s.Content}));c>-1?(o=ft.Fullfilled,a.splice(c,1)):o=ft.NotFullfilled}u=u.concat(i.a.createElement(vt,{Message:n[t],Input:!1,key:C++,Status:o,Editable:e.Test.editable,AllowedInputColors:[r.Green,r.Blue,r.Red,r.Yellow]}))},o=0;o<n.length;o++)s(o);void 0!==a&&(u=u.concat(a.map((function(t){return i.a.createElement(vt,{Message:t,Input:!1,key:C++,Status:e.Test.editable?ft.NotFullfilled:ft.NotMatched,AllowedInputColors:[r.Green],Editable:!1})}))))},m=0;m<c.length;m++)p(m);return i.a.createElement("div",{style:{display:"flex",flexDirection:"row",borderBottom:"solid 0.5px",marginTop:5}},e.Test.editable&&i.a.createElement("button",{onClick:function(){return e.RemoveTest(e.Test.id)}},"-"),i.a.createElement("button",{onClick:function(){o(void 0);var t=f(Le());void 0!==t&&new He(t.Setup,!0).RunComputation(e.Test.id,Re).catch((function(e){o(e.toString())}))}},"Play"),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},void 0!==s&&i.a.createElement("div",{style:{color:"red"}},i.a.createElement("label",null,s)),u,e.Test.editable&&i.a.createElement("button",{style:{alignSelf:"start"},onClick:function(){return e.AddInput(e.Test.id)}},"+")))})),gt=Object(c.b)((function(e){return{Level:e.activeLevel,Status:p(e).levelData.find((function(t){return t.Id===e.activeLevel.id})).State}}),{AddTest:function(){return{type:"AddTestActionType"}},SwitchScreen:m})((function(e){var t=e.Level.tests.map((function(e,t){return i.a.createElement(bt,{Test:e,key:t})}));function n(){return(n=Object(O.a)(b.a.mark((function t(){var n,r,a,i,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===(n=f(Le()))){t.next=23;break}r=Object(g.a)(e.Level.tests),t.prev=3,r.s();case 5:if((a=r.n()).done){t.next=15;break}return i=a.value,s=new He(n.Setup,!0),t.next=10,s.RunComputation(i.id,Re).catch((function(e){return!1}));case 10:if(!1!==t.sent){t.next=13;break}return t.abrupt("break",15);case 13:t.next=5;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),r.e(t.t0);case 20:return t.prev=20,r.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))).apply(this,arguments)}return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("b",null,e.Level.name),i.a.createElement("br",null),i.a.createElement("i",null,e.Level.description)),t,"12"===e.Level.id&&i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{onClick:e.AddTest},"Add custom test"),i.a.createElement("br",null)),i.a.createElement("button",{onClick:function(){return n.apply(this,arguments)}},"Play all tests"),i.a.createElement("br",null),e.Status===z.Completed&&i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:10}},i.a.createElement("b",{style:{color:"green"}},"Level completed!"),i.a.createElement("button",{onClick:function(){return e.SwitchScreen("levelSelect")}},"Select next level")),e.Status===z.NonValidMachineUsed&&i.a.createElement("b",{style:{color:"red"}},"Machine used that is not allowed this level"))})),Ot=.33*Se.CellSize,yt=function(e){var t=ue(e.MachineType.Api),n=t.inputChannels,r=t.outputChannels;return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{style:{height:Ot,width:Ot}},i.a.createElement(ut,{MachineStyle:e.MachineType.Style,IsDefault:e.IsDefault,BackgroundColor:"White",InputChannels:n,OutputChannels:r,CellSize:Ot})),i.a.createElement("label",null,e.MachineType.Style.Name))};function wt(){return{type:"AddNewMachineActionType"}}var St=Object(c.b)((function(e,t){return{status:j(t.machine)?"Valid":p(e).machines.find((function(e){return e.Id===t.machine})).Status}}),{LoadCustomMachine:function(e){return{type:"LoadCustomMachineActionType",machineId:e}},DeleteMachine:function(e){return{type:"DeleteMachineActionType",machineId:e}}})((function(e){var t=Object(l.c)({item:{type:Ke,id:e.machine},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(d.a)(t,3),r=n[1],s=n[2],o=Object(a.useState)(!1),c=Object(d.a)(o,2),h=c[0],C=c[1];Object(a.useEffect)((function(){s(Object(u.b)(),{captureDraggingState:!0})}),[s]);var p=Ue.GetStore().GetMachineType(e.machine),f=j(e.machine),m="Invalid"===e.status?{borderBottom:Se.CellSize/18+"px dotted orange",boxSizing:"border-box"}:{};return i.a.createElement("div",{ref:r,title:p.Style.Description,onClick:function(){return C(!h)}},i.a.createElement("div",{style:m},i.a.createElement(yt,{MachineType:p,IsDefault:f})),!f&&h&&i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{onClick:function(t){return e.LoadCustomMachine(e.machine)}},"Edit"),i.a.createElement("button",{onClick:function(t){t.stopPropagation(),e.DeleteMachine(e.machine)}},"Delete")))})),kt=Object(c.b)((function(e){var t,n=Ue.GetStore().GetAllMachines(),r=[],a=[],i=[],s=Object(g.a)(n);try{var o=function(){var n=t.value;e.activeLevel.allowedMachines.some((function(e){return n===e}))?R(n)?i.push(n):r.push(n):a.push(n)};for(s.s();!(t=s.n()).done;)o()}catch(d){s.e(d)}finally{s.f()}var c=f(e);if(void 0!==c){var l=c.Setup.MachineInstances.filter((function(e){return R(e.MachineId)})),u=i.find((function(e){return!l.some((function(t){return t.MachineId===e}))}));void 0!==u&&(r=[u].concat(Object(P.a)(r)))}var h=p(e).machines.filter((function(e){return!e.DependingOn.some((function(e){return j(e)&&a.some((function(t){return t===e}))}))})).map((function(e){return e.Id}));return{allowedMachines:r=r.concat(h)}}),{AddNewMachine:wt})((function(e){var t=e.allowedMachines.map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement(St,{machine:e}))}));return i.a.createElement("div",{style:{overflow:"auto",height:e.height,position:"absolute"}},i.a.createElement("button",{onClick:e.AddNewMachine},"Create new machine"),t)}));function It(e){e.stopPropagation()}var Mt=Object(c.b)((function(e){return{MachineType:f(e),CellSize:p(e).cellSize}}),{ChangeCellSize:function(e){return{type:"ChangeCellSizeActionType",cellSize:e}}})((function(e){var t,n,s,o,c=Object(a.useState)(e.CellSize),l=Object(d.a)(c,2),u=l[0],h=l[1],C=Object(a.useState)(Oe()),p=Object(d.a)(C,1)[0],f=Object(a.useState)(be(Oe(),.3)),m=Object(d.a)(f,1)[0];var v=null!==(t=null===(n=e.MachineType)||void 0===n?void 0:n.Api)&&void 0!==t?t:{OutputChannels:[r.Green],InputChannels:[r.Green]},b=null!==(s=null===(o=e.MachineType)||void 0===o?void 0:o.Style)&&void 0!==s?s:{BorderColor:"red",Color:"green",Name:"Dummy",Description:"dummy"},g=ue(v);return i.a.createElement("div",{style:{margin:10,width:500,borderColor:p,backgroundColor:m,borderWidth:20,borderStyle:"solid",padding:30}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("div",{style:{height:e.CellSize,width:e.CellSize,alignSelf:"center"}},i.a.createElement(ut,{MachineStyle:b,IsDefault:!1,BackgroundColor:m,InputChannels:g.inputChannels,OutputChannels:g.outputChannels,MovingOutput:void 0,CellSize:e.CellSize})),i.a.createElement("input",{type:"range",min:"10",max:"200",onChange:function(t){return n=Number(t.currentTarget.value),e.ChangeCellSize(n),void h(n);var n},value:u}),u),i.a.createElement("button",{className:"startMenu",onClick:e.Close},"Close"))})),Dt=Object(c.b)((function(e){return{MachineType:f(e),CellSize:p(e).cellSize}}),{SetName:function(e){return{type:"SetNameActionType",name:e}},SetDescription:function(e){return{type:"SetDescriptionActionType",description:e}},SetColor:function(e){return{type:"SetColorActionType",color:e}},SetBorderColor:function(e){return{type:"SetBorderColorActionType",borderColor:e}}})((function(e){var t=Object(a.useState)(e.MachineType.Style.Color),n=Object(d.a)(t,2),r=n[0],s=n[1],o=Object(a.useState)(e.MachineType.Style.BorderColor),c=Object(d.a)(o,2),l=c[0],u=c[1],h=Object(a.useState)(Oe()),C=Object(d.a)(h,1)[0],p=Object(a.useState)(be(Oe(),.3)),f=Object(d.a)(p,1)[0];var m=ue(e.MachineType.Api);return i.a.createElement("div",{style:{margin:10,width:500,borderColor:C,backgroundColor:f,borderWidth:20,borderStyle:"solid",padding:30}},void 0!==e.MachineType&&i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("div",{style:{height:e.CellSize,width:e.CellSize,alignSelf:"center"}},i.a.createElement(ut,{MachineStyle:e.MachineType.Style,IsDefault:!1,BackgroundColor:f,InputChannels:m.inputChannels,OutputChannels:m.outputChannels,MovingOutput:void 0,CellSize:e.CellSize})),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"Name"),i.a.createElement("input",{onChange:function(t){return e.SetName(t.target.value)},value:e.MachineType.Style.Name})),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"Color"),i.a.createElement("input",{onChange:function(t){return function(t){s(t),e.SetColor(t)}(t.target.value)},value:r})),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"BorderColor"),i.a.createElement("input",{onChange:function(t){return function(t){u(t),e.SetBorderColor(t)}(t.target.value)},value:l})),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("label",null,"Description"),i.a.createElement("textarea",{cols:50,rows:5,onChange:function(t){return e.SetDescription(t.target.value)},value:e.MachineType.Style.Description}))),i.a.createElement("button",{className:"startMenu",onClick:e.Close},"Close"))}));var xt=Object(c.b)((function(e){return{hasActiveMachine:void 0!==f(e)}}),{SwitchScreen:m})((function(e){var t=Object(a.useState)("none"),n=Object(d.a)(t,2),r=n[0],s=n[1],o=Object(a.useState)(Oe()),c=Object(d.a)(o,1)[0],l=Object(a.useState)(be(Oe(),.3)),u=Object(d.a)(l,1)[0];return i.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},onClick:It},"none"!==r&&i.a.createElement("div",{style:{width:220}}),i.a.createElement("div",{style:{borderColor:c,backgroundColor:u,borderWidth:20,borderStyle:"solid",padding:30,display:"flex",flexDirection:"column"}},i.a.createElement("button",{className:"startMenu",onClick:function(){return e.SwitchScreen("startMenu")}},"Back to menu"),e.hasActiveMachine&&i.a.createElement("button",{className:"startMenu",onClick:function(){return s("editMachine")}},"Edit machine style"),i.a.createElement("button",{className:"startMenu",onClick:function(){return s("changeCellSize")}},"Change cell size"),i.a.createElement("button",{className:"startMenu",onClick:e.Close},"Continue playing")),"editMachine"===r&&i.a.createElement(Dt,{Close:function(){return s("none")}}),"changeCellSize"===r&&i.a.createElement(Mt,{Close:function(){return s("none")}}))})),Gt=Object(c.b)((function(e){return{cellSize:p(e).cellSize}}),{})((function(e){var t=Ue.GetStore().GetMachineType(e.machineId),n=ue(t.Api),r=n.inputChannels,a=n.outputChannels,s="translate(".concat(e.offset.x-e.cellSize/2,"px, ").concat(e.offset.y-e.cellSize/2,"px)");return i.a.createElement("div",{style:{position:"absolute",transform:s,pointerEvents:"none"}},i.a.createElement(ut,{InputChannels:r,OutputChannels:a,MachineStyle:t.Style,BackgroundColor:"white",CellSize:e.cellSize,IsDefault:j(e.machineId)}))}));var Et=Object(c.b)((function(e){var t=f(e),n=p(e).cellSize;return{Rows:t.Setup.NumberOfRows,Columns:t.Setup.NumberOfColumns,Style:t.Style,CellSize:n}}))((function(e){var t=e.CellSize*(e.Rows-.35),n=e.CellSize*(e.Columns-.35),r=Object(a.useState)((e.WindowWidth-n)/2),s=Object(d.a)(r,2),o=s[0],c=s[1],h=Object(a.useState)((e.WindowHeight-t)/2),C=Object(d.a)(h,2),p=C[0],f=C[1],m=Object(a.useState)({x:0,y:0}),v=Object(d.a)(m,2),b=v[0],g=v[1],O=Object(l.c)({item:{type:Qe},end:function(e,t){var n=t.getDifferenceFromInitialOffset();null!==n&&g(n)},collect:function(e){return{isDragging:e.isDragging()}}}),y=Object(d.a)(O,3),w=y[0].isDragging,S=y[1],k=y[2];Object(a.useEffect)((function(){c((function(e){return e+b.x})),f((function(e){return e+b.y}))}),[b]);var I=Object(l.d)((function(e){if(e.getItemType()===Qe){var t=e.getDifferenceFromInitialOffset();return null!==t?t:void 0}}));Object(a.useEffect)((function(){k(Object(u.b)(),{captureDraggingState:!0})}),[k]);var M=w&&void 0!==I?o+I.x:o,D=w&&void 0!==I?p+I.y:p;return i.a.createElement("div",{ref:S,style:{position:"absolute",top:D,left:M,height:t,width:n}},e.children)})),At=Object(c.b)((function(e){var t=f(e);return{HasActiveMachine:void 0!==t,MachineName:null===t||void 0===t?void 0:t.Style.Name}}),{AddNewMachine:wt,ClearMessages:function(){return{type:"SetMessagesActionType",messages:[]}},SetMovingOutput:function(e){return{type:"SetMovingOutput",outputChannel:e}},RemoveMachine:function(e){return{type:"MachineRemovedActionType",machineInstanceId:e}}})((function(e){var t=Object(a.useState)("none"),n=Object(d.a)(t,2),s=n[0],o=n[1],c=Object(a.useState)(window.innerHeight),u=Object(d.a)(c,2),C=u[0],p=u[1],f=Object(a.useState)(window.innerWidth),m=Object(d.a)(f,2),v=m[0],b=m[1];Object(a.useEffect)((function(){return document.addEventListener("keyup",w,!1),window.addEventListener("resize",S),function(){document.removeEventListener("keyup",w,!1),window.removeEventListener("resize",S,!1)}}));var g=Object(l.e)({accept:[Je],drop:function(t,n){if(n.isOver())switch(t.type){case Je:e.RemoveMachine(n.getItem().id)}}}),O=Object(d.a)(g,2)[1],y=Object(l.d)((function(t){switch(t.getItemType()){case Ze:var n=t.getItem(),r=Ce(t,n.offsetX,n.offsetY);void 0!==r&&e.SetMovingOutput(Object(h.a)({angle:r},n));break;case Ke:if(t.isDragging()){var a=t.getClientOffset();if(null!==a){var s=t.getItem();return i.a.createElement(Gt,{machineId:s.id,offset:a})}}}return null}));function w(t){switch(t.key){case" ":He.StopComputation(),e.ClearMessages(),t.stopPropagation()}}function S(){p(window.innerHeight),b(window.innerWidth)}var k=[r.Green];return i.a.createElement("div",{ref:O,style:{position:"absolute",height:C,width:v,overflow:"hidden"}},i.a.createElement("div",{style:{position:"absolute",height:"100%",width:"100%"}},e.HasActiveMachine?i.a.createElement(Et,{WindowHeight:C,WindowWidth:v},i.a.createElement(mt,null)):i.a.createElement("div",{style:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},i.a.createElement("button",{title:"Add new machine",onClick:e.AddNewMachine},"Create new machine"))),i.a.createElement("div",{style:{position:"absolute",left:v/2-150,padding:10,width:300,backgroundColor:"rgba(255,255,255,.8)"}},i.a.createElement("h2",{style:{textAlign:"center",margin:0}},e.MachineName)),i.a.createElement("div",{style:{position:"absolute",padding:10,left:v-220,width:180,height:C-20,backgroundColor:"rgba(255,255,255,.8)"}},i.a.createElement("button",{onClick:function(){return o("options")},title:"Options"},"Options"),i.a.createElement(kt,{height:C-40})),i.a.createElement("div",{style:{position:"absolute",padding:10,left:10,top:50,width:300,backgroundColor:"rgba(255,255,255,.8)"}},i.a.createElement(gt,{MultipleInputsAllowed:!1,AllowedInputs:k})),i.a.createElement("div",{style:{position:"absolute",padding:10,height:80,width:240,left:v/2-150,top:C-80,backgroundColor:"rgba(255,255,255,.8)"}},i.a.createElement(Xe,null)),"options"===s&&i.a.createElement("div",{onClick:function(){return o("none")},style:{position:"absolute",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:Se.MenuBackGround}},i.a.createElement(xt,{Close:function(){return o("none")}})),y)})),Tt=function(e){var t=Object(a.useState)(e.name),n=Object(d.a)(t,2),r=n[0],s=n[1];return i.a.createElement("div",{style:{width:200,margin:10}},i.a.createElement("input",{onChange:function(e){return s(e.target.value)},onKeyUp:function(t){switch(t.key){case"Enter":e.close(r)}},value:r}),i.a.createElement("button",{onClick:function(){return e.close(r)}},"OK"))},Ft=Object(c.b)((function(e){var t=p(e),n=void 0;if(void 0!==t.activeLevel){var r=t.levelData.find((function(e){return e.Id===t.activeLevel}));(null===r||void 0===r?void 0:r.State)!==z.InProgress&&(null===r||void 0===r?void 0:r.State)!==z.NonValidMachineUsed||(n=oe.GetStore().GetLevel(t.activeLevel))}return{playerName:t.name,continueLevel:n}}),{SwitchScreen:m,ChangePlayerName:function(e){return{type:"ChangePlayerName",name:e}},LoadLevel:qe})((function(e){var t=Object(a.useState)(Oe()),n=Object(d.a)(t,1)[0],r=Object(a.useState)("none"),s=Object(d.a)(r,2),o=s[0],c=s[1],l=Object(a.useState)(be(Oe(),.3)),u=Object(d.a)(l,1)[0];return i.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},"none"!==o&&i.a.createElement("div",{style:{width:220}}),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement("h1",null,"Contexion"),i.a.createElement("div",{style:{borderColor:n,backgroundColor:u,borderWidth:20,borderStyle:"solid",padding:30,display:"flex",flexDirection:"column"}},void 0!==e.continueLevel&&i.a.createElement("button",{className:"startMenu",onClick:function(){return e.LoadLevel(e.continueLevel.Id)}},"Continue with ",e.continueLevel.Name),i.a.createElement("button",{className:"startMenu",onClick:function(){return e.SwitchScreen("levelSelect")}},"Select level"),i.a.createElement("button",{className:"startMenu",onClick:function(){return e.LoadLevel("12")}},"Sandbox"),i.a.createElement("button",{className:"startMenu",onClick:function(){return c("changeName")}},"Change player name")),i.a.createElement("h4",null," Playing as ",e.playerName)),"changeName"===o&&i.a.createElement(Tt,{name:e.playerName,close:function(t){e.ChangePlayerName(t),c("none")}}))})),jt=Object(c.b)(void 0,{LoadLevel:qe})((function(e){var t,n,r,s,o=Object(a.useState)(void 0!==(null===(t=e.Data)||void 0===t?void 0:t.LastUsedMachineId)||0!==e.Level.InputChannels.length),c=Object(d.a)(o,2),l=c[0],u=c[1],h=[];if(void 0===(null===(n=e.Data)||void 0===n?void 0:n.LastUsedMachineId))r="rgb(200,200,200)",s="rgb(160,160,160)";else{var C=Ue.GetStore().GetMachineType(e.Data.LastUsedMachineId);switch(e.Data.State){case z.Completed:r=C.Style.Color,s=C.Style.BorderColor,h=e.Level.OutputChannels.map((function(e){return[e]}));break;case z.InProgress:case z.NonValidMachineUsed:r=be(ge(C.Style.Color,.2),.6),s=be(ge(C.Style.BorderColor,.2),.6);break;case z.NoMachineLinked:throw Error("State is not linked, but there is a machine linked")}}var p={Color:r,BorderColor:s};return i.a.createElement("div",{onMouseOver:function(){var t;void 0===(null===(t=e.Data)||void 0===t?void 0:t.LastUsedMachineId)&&0===e.Level.InputChannels.length&&u(!0)},onMouseOut:function(){var t;void 0===(null===(t=e.Data)||void 0===t?void 0:t.LastUsedMachineId)&&0===e.Level.InputChannels.length&&u(!1)},style:{position:"absolute",marginLeft:140*e.Level.Cell.Column+50,marginTop:115*e.Level.Cell.Row+20}},i.a.createElement("div",{onClick:function(){return e.LoadLevel(e.Level.Id)},title:e.Level.LevelDescription,style:{height:Se.CellSize-2,width:Se.CellSize-2}},i.a.createElement(ut,{IsDefault:!1,MachineStyle:p,BackgroundColor:"white",InputChannels:e.Level.InputChannels,OutputChannels:h,CellSize:Se.CellSize}),l&&i.a.createElement("div",{style:{display:"flex",position:"absolute",height:"20%",width:"100%",justifyContent:"center",alignItems:"center",pointerEvents:"none"}},i.a.createElement("label",{style:{fontFamily:"Comic Sans MS",background:ve("White",.7)}},e.Level.Name))))})),Rt=Object(c.b)((function(e){return{levels:p(e).levelData}}),{SwitchScreen:m})((function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),s=n[0],o=n[1];return Object(a.useEffect)((function(){var t,n=oe.GetStore().GetAllLevels(),a=n.filter((function(e){return e.Cell.Row>=0})).map((function(t){var n=e.levels.find((function(e){return e.Id===t.Id}));return{model:t,data:n}})),i=Math.max.apply(Math,Object(P.a)(n.map((function(e){return e.Cell.Column})))),s={NumberOfRows:Math.max.apply(Math,Object(P.a)(n.map((function(e){return e.Cell.Column})))),NumberOfColumns:i},c=a.filter((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.State)===z.Completed})).map((function(e){return e.model})),l=Object(g.a)(c);try{for(l.s();!(t=l.n()).done;){var u,h=t.value,d=Object(g.a)(h.OutputChannels.map((function(e){return e.Direction})));try{var C=function(){for(var e=u.value,t=Ie(s,h.Cell,e);void 0!==t;){var n=a.find((function(e){return he(e.model.Cell,t)}));if(void 0!==n){n.model.InputChannels.push({Channel:r.Green,Direction:e,Status:"Exists",UseMachineColor:!0});break}t=Ie(s,t,e)}};for(d.s();!(u=d.n()).done;)C()}catch(p){d.e(p)}finally{d.f()}}}catch(p){l.e(p)}finally{l.f()}o(a)}),[e.levels]),i.a.createElement("div",{style:{position:"absolute",width:"100%"}},i.a.createElement("button",{style:{float:"right",marginRight:10,marginTop:10},onClick:function(){return e.SwitchScreen("startMenu")}},"Back"),s.map((function(e){return i.a.createElement(jt,{Level:e.model,Data:e.data,key:e.model.Id})})))})),Lt=Object(c.b)((function(e){return{screen:e.screen}}))((function(e){return i.a.createElement(l.b,{backend:u.a},"startMenu"===e.screen&&i.a.createElement(Ft,null),"levelSelect"===e.screen&&i.a.createElement(Rt,null),"playing"===e.screen&&i.a.createElement(At,null))}));n(44);o.a.render(i.a.createElement(c.a,{store:Re},i.a.createElement(Lt,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ecc03984.chunk.js.map