{"version":3,"sources":["Models/ChannelColorsEnum.ts","Components/NumberInput/NumberInput.tsx","Helper/StoreHelper.ts","Redux/GameDataReducer/Actions.ts","Computing/MessageCleaner.ts","MachineStore/DefaultMachines/AddStarMachine.ts","MachineStore/DefaultMachines/AddZeroMachine.ts","MachineStore/DefaultMachines/CompareMachine.ts","MachineStore/DefaultMachines/CopyMachine.ts","MachineStore/DefaultMachines/DeleteMachine.ts","MachineStore/DefaultMachines/GreenStartMachine.ts","MachineStore/DefaultMachines/IncrementMachine.ts","MachineStore/DefaultMachines/MoveMachine.ts","MachineStore/DefaultMachines/RedStartMachine.ts","MachineStore/DefaultMachines/RotateMachine.ts","MachineStore/IMachine.ts","Models/DirectionEnum.ts","Levels/Levels/AppendLength.ts","Redux/GameDataReducer/PlayerReducer/LevelData.ts","Levels/Levels/GetLength.ts","Levels/Levels/GetType.ts","Levels/Levels/IsEmpty.ts","Levels/Levels/KeepNumbers.ts","Levels/Levels/PlusOne.ts","Levels/Levels/RemoveRepeats.ts","Levels/Levels/RotateBackwards.ts","Levels/Levels/Sandbox.ts","Levels/Levels/ReverseLimited.ts","Levels/Levels/Reverse.ts","Levels/Levels/CopyAll.ts","Levels/Levels/Decrement.ts","Levels/Levels/IncrementAll.ts","Levels/Levels/IncrementIncreasing.ts","Levels/Levels/JoinAll.ts","Levels/Levels/MakeTwins.ts","Levels/Levels/RemoveIfDuplicate.ts","Levels/Levels/RemoveUntilRepeat.ts","Levels/Levels/Trigger.ts","Levels/LevelStore.ts","Redux/GameDataReducer/Level/Reducer.ts","Helper/NewChannelSet.ts","Models/CellModel.ts","Components/Grid/Cell/MachineInstance/MachineDrawer/DrawConstants.ts","Helper/AngleHelper.ts","Helper/ColorHelper.ts","Helper/ArrayHelper.ts","Components/Constants.ts","Redux/GameDataReducer/PlayerReducer/GridSetup/GridSetupReducer.ts","Redux/GameDataReducer/PlayerReducer/GridSetup/MachineInstances/MachineInstancesReducer.ts","Helper/SetupHelper.ts","Redux/GameDataReducer/PlayerReducer/CustomMachinesHelper.ts","Redux/GameDataReducer/PlayerReducer/TypeProvider.ts","Helper/Guid.ts","Redux/GameDataReducer/PlayerReducer/PlayerReducer.ts","Models/MachineApi.ts","Redux/GameDataReducer/GameReducer.ts","Redux/Store.ts","MachineStore/DefaultMachines/JoinActor.ts","MachineStore/DefaultMachines/JoinMachine.ts","MachineStore/DefaultMachines/SplitMachine.ts","MachineStore/DefaultMachines/BlueStartMachine.ts","MachineStore/DefaultMachines/YellowStartMachine.ts","MachineStore/MachineStore.ts","Redux/GameDataReducer/Level/Actions.ts","Redux/GameDataReducer/PlayerReducer/GridSetup/Actions.ts","Computing/Computer.ts","Components/Dashboard/Dashboard.tsx","Redux/GameDataReducer/PlayerReducer/GridSetup/MachineInstances/Actions.ts","Components/DragItemTypes.ts","Components/MessageFormatter.ts","Components/Grid/Cell/MachineInstance/ChannelClickArea/ChannelClickArea.tsx","Components/Grid/Cell/MachineInstance/ChannelClickArea/ChannelGroup.tsx","Components/Grid/Cell/MachineInstance/MachineDrawer/MachineDrawer.ts","Components/Grid/Cell/MachineInstance/MachineDrawer/MachineCircleDrawer.ts","Components/Grid/Cell/MachineInstance/MachineDrawer/MachineSquareDrawer.ts","Components/Grid/Cell/MachineInstance/MachineDrawer/MachineCanvasHolder.tsx","Components/Grid/Cell/MachineInstance/InputChannelClickArea/InputChannelClickArea.tsx","Components/Grid/Cell/MachineInstance/MachineInstance.tsx","Components/Grid/Cell/Cell.tsx","Components/Grid/Grid.tsx","Models/OutputStatusEnum.ts","Components/LevelDisplay/TestDisplay/MessageDisplay/MessageDisplay.tsx","Components/LevelDisplay/TestDisplay/TestDisplay.tsx","Components/LevelDisplay/LevelDisplay.tsx","Components/MachineCollection/StoredMachine/MachineDisplay/MachineDisplay.tsx","Redux/GameDataReducer/PlayerReducer/Actions.ts","Components/MachineCollection/StoredMachine/StoredMachine.tsx","Components/MachineCollection/MachineCollection.tsx","Helper/ClickHelper.ts","Components/Game/GameMenu/ChangeSizeComponent.tsx","Components/Game/GameMenu/EditMachine/EditMachine.tsx","Components/Game/GameMenu/GameMenu.tsx","Components/MachineCollection/DraggedMachine/DraggedMachine.tsx","Components/Grid/MovingElement.tsx","Components/Game/Game.tsx","Components/StartMenu/Dialog/Dialog.tsx","Components/StartMenu/StartMenu.tsx","Components/LevelSelectsScreen/LevelPreview/LevelPreview.tsx","Components/LevelSelectsScreen/LevelSelectScreen.tsx","App.tsx","index.tsx"],"names":["ChannelColorEnum","NumberInput","props","style","marginLeft","marginRight","onClick","valueChanged","value","GetActivePlayer","state","players","find","p","id","activePlayerId","GetActiveMachine","player","machines","m","Id","activeMachineId","SwitchScreen","screen","type","CleanStars","message","starNumber","replaceAll","RestoreStars","AddStarMachine","actor","Act","returnValue","content","Content","push","Channel","Green","Promise","resolve","this","Style","BorderColor","Color","Name","Description","Api","InputChannels","OutputChannels","DependingOn","DirectlyDependingOn","AddZeroMachine","CompareMachine","channel","length","Red","position","indexOf","substring","CopyMachine","index","DeleteMachine","GreenStartMachine","IncrementMachine","newMessage","char","String","fromCharCode","charCodeAt","slice","MoveMachine","RedStartMachine","RotateMachine","IsDefaultMachine","IsStartMachine","DirectionEnum","LevelState","AppendLength","AllowedMachines","LevelDescription","MachineDescription","Direction","Right","Status","Tests","inputs","Order","expectedOutputs","Cell","Row","Column","GetLength","Up","GetType","Blue","Down","IsEmpty","UseMachineColor","KeepNumbers","PlusOne","RemoveRepeats","RotateBackwards","Sandbox","ReverseLimited","Reverse","CopyAll","Decrement","IncrementAll","IncrementIncreasing","JoinAll","MakeTwins","RemoveIfDuplicate","RemoveUntilRepeat","Trigger","LevelStore","levels","init","level","l","undefined","Error","levelStore","LevelReducer","draft","action","levelId","GetStore","GetLevel","tests","map","t","actualOutputs","editable","allowedMachines","description","name","LoadLevel","newTest","Math","max","filter","testId","test","outputs","outputMessage","maxOrder","i","newInput","concat","newInputs","order","newOutputs","o","input","inputsUpdated","UpdateTest","forEach","GetNewChannelSet","api","includeInput","outputChannels","inputChannels","direction","color","GetDirectedChannelSet","hasMultipleInputs","inputChannelModels","c","orderedOutputChannels","group","AreEqual","cell","otherCell","halfSquareFactor","outputSplitFactor","DrawConstants","cellSize","aperture","armLength","armAngle","PI","circleRadius","borderWidth","halfSquareSize","shadeOffset","outputSplit","outputLength","outputRadius","outputWidth","outputStartLength","center","apertureAngle","defiatingAngle","protrudingArm","asin","cos","GetAngleFromMonitor","monitor","offsetX","offsetY","xyCoord","xyCoordInit","AppStore","getState","atan2","y","x","GetAngleFromOffsets","getClientOffset","getInitialSourceClientOffset","GetAngleFromDirection","Left","CheckColorString","Option","toLowerCase","GetColorModel","startsWith","colors","split","red","Number","green","blue","enteredColor","GetColorCode","parseInt","GetOpaqueColor","opacity","model","error","GetLighterColor","amount","GetGrayScaleColor","average","GetRandomColor","floor","random","Minimum","array","valueSelector","minimum","Infinity","minimumElement","element","Maximum","maximum","maximumElement","Constants","GridSetupReducer","typeProvider","borderColor","machineFixed","Setup","MachineInstances","mi","machineInstanceId","MachineId","DependingOnDeleted","machine","channelIndex","findIndex","relevantChannels","angle","newChannelArray","dc","inserted","baseAngle","draggedSplit","sin","machineInput","ic","some","maxId","machineInstance","machineId","newCell","GetMachineType","iac","MachineInstancesReducer","setup","deltaRow","deltaColumn","minimumColumn","minimumRow","maximumColumn","maximumRow","excessColumns","MinimumColumns","min","excessRows","MinimumRows","NumberOfColumns","NumberOfRows","ResizeGrid","Move","GetStartMachines","startMachines","UpdateMachineStatus","newOutputChannel","matchingOutput","outputChannel","inputChannel","CellSize","MenuBackGround","TypeProvider","customMachines","MachineStore","customMachine","cm","CreateGuid","Int32Array","window","crypto","getRandomValues","text","s","toString","CreateNewMachine","ExitCells","EnrichState","dependingDirectly","depending","activeMachine","d","machineType","depMachine","DetermineDependencies","exitCells","cells","starts","cellModel","existingChannel","CalculateExits","deletedMachines","exitColors","ec","Yellow","newApi","first","second","dependentMachines","dp","dependentMachine","CheckMachineStatus","UpdateStatusDependentMachines","SetApi","GameReducer","produce","messages","movingOutput","levelData","ld","LastUsedMachineId","State","NoMachineLinked","activeLevel","showAnimations","show","stepTime","newMachine","levelModel","InProgress","usedInLevel","directlyDependentMachines","updatedMachines","dm","PlayerReducer","activePlayer","CheckValidMachinesUsed","isCompleted","every","j","expected","Completed","NonValidMachineUsed","CheckLevelCompleted","gameData","mu","am","createStore","localStorage","setItem","JSON","stringify","getItem","removeItem","parse","getInitialState","__REDUX_DEVTOOLS_EXTENSION__","AppState","JoinActor","greenInput","redInput","returnMessage","JoinMachine","SplitMachine","firstCharacterLength","BlueStartMachine","YellowStartMachine","parentStarNumber","FindMachine","GetActor","CreateCustomActor","appState","computer","Computer","cleanedMessage","RunInput","then","mm","machineStore","ClearTestOutput","SetMessages","activeSetup","store","starNumberCounter","HandleNextMessages","bind","CalculateNextMessages","RunComputation","SetDelay","StopComputation","dispatch","orderedOutputs","catch","reason","reject","results","messageLocations","GetStartMachine","messageLocation","OrderNewCalculation","callback","args","timeout","clearHandle","setTimeout","cancelComputation","clearTimeout","nextMessages","outputMessages","stepCount","doneMessages","messageCell","cachedMachine","nextContents","nextContent","channelMap","doneMessage","Dashboard","connect","ShowAnimations","StepTime","UpdateStepTime","UpdateShowAnimations","display","justifyContent","width","height","paddingRight","title","flexDirection","ChangeChannel","DragItemTypes","FormatMessage","formattedMessage","seekPosition","lastIndex","ChannelClickArea","useDrag","item","MachineInstanceId","OffsetX","OffsetY","begin","OnClick","end","dropResult","didDrop","outputItem","adjustedAngle","collect","isDragging","drag","preview","channelStyle","widthFactor","marginFactor","heightFactor","pointerEvents","useEffect","getEmptyImage","captureDraggingState","ref","newDirection","ChannelGroup","ChannelModels","heightOffset","margin","baseOffsetX","baseOffsetY","deltaX","deltaY","channelSetStyle","marginTop","rotate","tempBaseOffsetX","rotation","transform","key","OnChanged","MachineDrawer","ctx","innerColor","draggedOutput","draggedDirection","backgroundColor","drawConstants","MachineStyle","sort","MovingOutput","BackgroundColor","DrawBody","DrawInputGradient","outputGroup","DrawOutputGroup","DraggedOutputDrawer","DrawNoInputOutline","startIndex","endIndex","DrawInputOutline","shadowColor","shadowOffsetX","shadowOffsetY","isShade","ClearShadowStyle","filteredOutputs","increasedSplit","draggedIsDrawn","DrawOutputChannel","output","DrawDraggedOutput","offset","firstX","firstY","endX","endY","beginPath","moveTo","gradient","createRadialGradient","addColorStop","arcTo","lineTo","strokeStyle","lineWidth","stroke","mainAngle","outputOffset","differenceAngle","MachineCircleDrawer","arc","fillStyle","fill","startDirection","endDirection","localcenter","startDirectionAngle","startAngle","startInnerX","startInnerY","startOuterX","startOuterY","endDirectionAngle","endAngle","endInnerX","endInnerY","endOuterX","endOuterY","SetShadowStyle","directionAngle","endOuterAngle","startOuterAngle","grd","MachineSquareDrawer","closeSide","farSide","innerClose","innerFar","armProtrudingClose","armProtrudingFar","armWidthClose","armWidthFar","rect","currentDirection","createLinearGradient","MachineCanvasHolder","canvasRef","useRef","current","getContext","clearRect","IsDefault","DrawMachine","InputChannelClickArea","onClicked","event","React","Component","MachineInstance","ownProps","background","MachineInstanceProp","machineStyle","ChangeOwnChannel","ChangeInputChannel","FixMachine","onInputChannelClick","currentIndex","newChannel","machineSize","borderBottom","boxSizing","machineMargin","oc","cellId","exit","Exit","Message","OnNewMachine","OnMovedMachine","useDrop","accept","drop","itemProps","smallHeigth","smallWidth","border","float","ExitThickness","borderRight","borderLeft","borderTop","marginBottom","OutputStatus","Grid","Rows","Columns","rows","rowIndex","row","columnIndex","borderStyle","MessageDisplay","flexFlow","Input","statusStyle","Fullfilled","Editable","NotFullfilled","NotMatched","Remove","AllowedInputColors","onChange","OnMessageChanged","target","cc","TestDisplay","RemoveTest","RemoveInput","UpdateInput","AddInput","useState","setError","Test","NotChecked","actuals","valid","indexActual","splice","flexGrow","alignSelf","LevelDisplay","Level","AddTest","a","size","MachineDisplay","MachineType","AddNewMachine","StoredMachine","status","LoadCustomMachine","showMenu","changeShow","isDefault","MachineCollection","GetAllMachines","disallowedMachines","allowedStartMachines","usedStartMachines","nextStartMachine","allowedCustomMachines","dis","storedMachines","overflow","StopPropagation","stopPropagation","ChangeSizeComponent","ChangeCellSize","setSize","channels","padding","newSize","currentTarget","className","Close","EditMachine","SetName","SetDescription","SetColor","SetBorderColor","setColor","setBorderColor","dialogBorderColor","colorChanged","borderChanged","cols","GameMenu","hasActiveMachine","dialog","setdialog","alignItems","DraggedMachine","MovingElement","calculatedHeight","calculatedWidth","WindowWidth","leftStart","setLeftStart","WindowHeight","topStart","setTopStart","finalOffset","setFinalOffset","result","offSet","getDifferenceFromInitialOffset","useDragLayer","getItemType","left","top","children","Game","HasActiveMachine","MachineName","ClearMessages","SetMovingOutput","RemoveMachine","menu","setMenu","innerHeight","setHeight","innerWidth","setWidth","document","addEventListener","handleKeyPress","handleResize","removeEventListener","isOver","dragPreviewElement","draggedOutputAngle","allowedInputColors","opagueBackground","textAlign","MultipleInputsAllowed","AllowedInputs","Dialog","setName","onKeyUp","close","StartMenu","continueLevel","data","playerName","ChangePlayerName","LevelPreview","Data","showLabel","setShowLabel","onMouseOver","onMouseOut","fontFamily","LevelSelectScreen","levelModels","setLevelModels","GetAllLevels","models","maxColumn","completedLevels","lm","completedLevel","nextLevel","cl","App","backend","HTML5Backend","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.7b1eb969.chunk.js","sourcesContent":["export enum ChannelColorEnum {\n    Green = \"green\",\n    Red = \"red\",\n    Blue = \"blue\",\n    Yellow = \"#fff020\",\n}","import React from \"react\";\nimport { Props } from \"./Props\";\n\nconst NumberInput: React.FC<Props> = (props) => {\n    const IncreaseValue: () => void = () => {\n        props.valueChanged(props.value + 1);\n    };\n    const DecreaseValue: () => void = () => {\n        props.valueChanged(props.value - 1);\n    };\n\n    const style: React.CSSProperties = { marginLeft: 5, marginRight: 5 };\n\n    return (<div>\n        <button style={style} onClick={DecreaseValue}>-</button>\n        <label >{props.value}</label>\n        <button style={style} onClick={IncreaseValue}>+</button>\n    </div>);\n};\n\nexport default NumberInput;","import { GameData } from \"../Redux/GameDataReducer/GameModel\";\r\nimport { PlayerModel } from \"../Redux/GameDataReducer/PlayerReducer/PlayerModel\";\r\nimport { CustomMachineModel } from \"../Redux/GameDataReducer/PlayerReducer/GridSetup/CustomMachineModel\";\r\n\r\nexport function GetActivePlayer(state: GameData): PlayerModel {\r\n    return state.players.find((p) => p.id === state.activePlayerId)!;\r\n}\r\n\r\nexport function GetActiveMachine(state: GameData): CustomMachineModel | undefined {\r\n    const player = GetActivePlayer(state);\r\n\r\n    const newActiveMachine = player.machines.find((m) => m.Id === player.activeMachineId);\r\n\r\n    return newActiveMachine;\r\n}","import { MovingOutputChannel } from \"../../Components/DragItemTypes\";\r\nimport { ScreenType } from \"./GameModel\";\r\n\r\ninterface SwitchScreen {\r\n    type: \"SwitchScreen\";\r\n    screen: ScreenType;\r\n}\r\n\r\nexport function SwitchScreen(screen: ScreenType): ActionTypes {\r\n    return {\r\n        type: \"SwitchScreen\",\r\n        screen\r\n    };\r\n}\r\n\r\ninterface ChangePlayerName {\r\n    type: \"ChangePlayerName\";\r\n    name: string;\r\n}\r\n\r\nexport function ChangePlayerName(name: string): ActionTypes {\r\n    return {\r\n        type: \"ChangePlayerName\",\r\n        name\r\n    };\r\n}\r\n\r\ninterface UpdateStepTime {\r\n    type: \"UpdateStepTime\";\r\n    stepTime: number;\r\n}\r\n\r\nexport function UpdateStepTime(stepTime: number): ActionTypes {\r\n    return {\r\n        type: \"UpdateStepTime\",\r\n        stepTime\r\n    };\r\n}\r\n\r\ninterface UpdateShowAnimations {\r\n    type: \"UpdateShowAnimations\";\r\n    show: boolean;\r\n}\r\n\r\nexport function UpdateShowAnimations(show: boolean): ActionTypes {\r\n    return {\r\n        type: \"UpdateShowAnimations\",\r\n        show\r\n    };\r\n}\r\ninterface SetMovingOutput {\r\n    type: \"SetMovingOutput\";\r\n    outputChannel: MovingOutputChannel | undefined;\r\n}\r\n\r\nexport function SetMovingOutput(outputChannel: MovingOutputChannel | undefined): ActionTypes {\r\n    return {\r\n        type: \"SetMovingOutput\",\r\n        outputChannel\r\n    };\r\n}\r\nexport type ActionTypes = UpdateStepTime | UpdateShowAnimations | SwitchScreen\r\n| ChangePlayerName | SetMovingOutput;","export function CleanStars(message: string, starNumber: number): string {\n    return message.replaceAll(\"*\", `{${starNumber}}`);\n};\n\nexport function RestoreStars(message: string, starNumber: number): string {\n    return message.replaceAll(`{${starNumber}}`,\"*\");\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class AddStarMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            const content = \"*\" + message.Content;\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"blue\",\r\n                Color: \"grey\",\r\n                Name: \"Add *\",\r\n                Description: \"Puts a star in front of the string. Each machine adds a unique star, so the star added can only be equal to another star added by this machine\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"10\";\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class AddZeroMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            const content = \"0\" + message.Content;\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"#fff020\",\r\n                Color: \"darkorange\",\r\n                Name: \"Add 0\",\r\n                Description: \"Puts a zero in front of the string\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"11\";\r\n}\r\n","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class CompareMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            let channel: ChannelColorEnum = ChannelColorEnum.Green;\r\n            if (message.Content.length < 2) {\r\n                channel = ChannelColorEnum.Red;\r\n            } else {\r\n                if (message.Content[0] !== \"{\") {\r\n                    if (message.Content[0] !== message.Content[1]) {\r\n                        channel = ChannelColorEnum.Red;\r\n                    }\r\n                } else {\r\n                    const position = message.Content.indexOf(\"}\");\r\n                    const starNumber = message.Content.substring(0, position + 1);\r\n                    if (message.Content.length < starNumber.length * 2) {\r\n                        channel = ChannelColorEnum.Red;\r\n                    } else {\r\n                        const secondPart = message.Content.substring(position + 1, position + starNumber.length + 1);\r\n                        if (secondPart !== starNumber) {\r\n                            channel = ChannelColorEnum.Red;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            returnValue.push({ Content: message.Content, Channel: channel });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {BorderColor: \"red\",\r\n            Color: \"green\",\r\n            Name: \"Compare\",\r\n            Description: \"Compares the first two characters in the string. If they are the same, exits green. If they are different exits red\"},\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green, ChannelColorEnum.Red],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"9\";\r\n}\r\n","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class CopyMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            let content: string;\r\n            if (message.Content.length < 1) {\r\n                content = \"\";\r\n            } else {\r\n                if (message.Content[0] !== \"{\") {\r\n                    content = message.Content[0] + message.Content;\r\n                } else {\r\n                    const index = message.Content.indexOf(\"}\");\r\n                    content = message.Content.substring(0, index + 1) + message.Content;\r\n                }\r\n            }\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"green\",\r\n                Color: \"yellow\",\r\n                Name: \"Copy\",\r\n                Description: \"Copies the first character of the string and puts it in front of the string\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"6\";\r\n}\r\n","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class DeleteMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            let content: string;\r\n            if (message.Content.length < 1) {\r\n                content = \"\";\r\n            } else {\r\n                if (message.Content[0] !== \"{\") {\r\n                    content = message.Content.substring(1);\r\n                } else {\r\n                    const index = message.Content.indexOf(\"}\");\r\n                    content = message.Content.substring(index + 1);\r\n                }\r\n            }\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"firebrick\",\r\n                Color: \"red\",\r\n                Name: \"Delete\",\r\n                Description: \"Deletes the first character of the string\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"7\";\r\n}\r\n","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class GreenStartMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            returnValue.push({ Content: message.Content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                Color: \"white\",\r\n                BorderColor: \"green\",\r\n                Name: \"Start\",\r\n                Description: \"Starting point of the computation. Acts as a move machine for all other purposes\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public readonly id = \"0\";\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class IncrementMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            let newMessage = \"\";\r\n            if (message.Content.length > 0) {\r\n                const char = message.Content[0];\r\n\r\n                if ((char >= \"0\" && char <= \"8\") || (char >= \"a\" && char < \"z\") || (char >= \"A\" && char < \"Z\")) {\r\n                    newMessage = String.fromCharCode(char.charCodeAt(0) + 1) + message.Content.slice(1);\r\n                } else if (char === \"9\") {\r\n                    newMessage = \"0\" + message.Content.slice(1);\r\n                } else if (char === \"z\") {\r\n                    newMessage = \"a\" + message.Content.slice(1);\r\n                } else if (char === \"Z\") {\r\n                    newMessage = \"A\" + message.Content.slice(1);\r\n                } else {\r\n                    newMessage = message.Content;\r\n                }\r\n            }\r\n\r\n            returnValue.push({ Content: newMessage, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"DodgerBlue\",\r\n                Color: \"MediumVioletRed\",\r\n                Name: \"Increment\",\r\n                Description: \"Increases a number in front of the string by 1, makes a letter the next letter in the alphabet. 9 becomes 0, z becomes a. All other starting characters are not changed\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"12\";\r\n}\r\n","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class MoveMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            returnValue.push({ Content: message.Content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                Color: \"green\",\r\n                BorderColor: \"lightgreen\",\r\n                Name: \"Move\",\r\n                Description: \"Does nothing with the string, only used to get the message to the right place\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public readonly id = \"5\";\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class RedStartMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            returnValue.push({ Content: message.Content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                Color: \"white\",\r\n                BorderColor: \"red\",\r\n                Name: \"Start\",\r\n                Description: \"Starting point of the computation. Acts as a move machine for all other purposes\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public readonly id= \"1\";\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class RotateMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            let content: string;\r\n            if (message.Content.length < 2) {\r\n                content = message.Content;\r\n            } else {\r\n                if (message.Content[0] !== \"{\") {\r\n                    content = message.Content.substring(1) + message.Content.substring(0, 1);\r\n                } else {\r\n                    const index = message.Content.indexOf(\"}\");\r\n                    content = message.Content.substring(index + 1) + message.Content.substring(0, index + 1);\r\n                }\r\n            }\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"blue\",\r\n                Color: \"cyan\",\r\n                Name: \"Rotate\",\r\n                Description: \"Removes the first character of the string, and adds it to the end of the string\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"8\";\r\n}\r\n","import { IActor } from \"./IActor\";\r\nimport { IMachineType } from \"./IMachineType\";\r\n\r\nexport interface IMachine {\r\n    GetActor(): IActor;\r\n    GetType(): IMachineType;\r\n    id: string;\r\n}\r\n\r\nexport function IsDefaultMachine(id: string): boolean {\r\n    return id.length < 6;\r\n}\r\n\r\nexport function IsStartMachine(id: string): boolean {\r\n    return id === \"0\" || id === \"1\" || id === \"2\" || id === \"3\";\r\n}","export enum DirectionEnum {\n    Up,\n    Right,\n    Down,\n    Left\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const AppendLength: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n    LevelDescription: \"The machine should append the length of the input string to the string\",\r\n    MachineDescription: \"Appends the length of the input string to the string\",\r\n    Name: \"AppendLength\",\r\n    Id: \"13\",\r\n    Style: {\r\n        Color: \"Brown\",\r\n        BorderColor: \"RebeccaPurple\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"four\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"four4\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabccd\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabccd6\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"11\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"0\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"This is hard\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"This is hard12\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"This might even be harder\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"This might even be harder25\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 1,\r\n        Column: 7\r\n    }\r\n};","export interface LevelData {\r\n    readonly Id: string;\r\n    readonly State: LevelState;\r\n    readonly LastUsedMachineId: string | undefined;\r\n}\r\n\r\nexport enum LevelState {\r\n    NoMachineLinked,\r\n    InProgress,\r\n    NonValidMachineUsed,\r\n    Completed\r\n}\r\n\r\n","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const GetLength: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n    LevelDescription: \"The machine should return the length of the input string\",\r\n    MachineDescription: \"Returns the length of the input string\",\r\n    Name: \"GetLength\",\r\n    Id: \"15\",\r\n    Style: {\r\n        Color: \"GoldenRod\",\r\n        BorderColor: \"Orchid\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Up, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"four\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"4\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabccd\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"6\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"0\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"This is hard\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"12\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"This might even be harder\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"25\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 2,\r\n        Column: 7\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const GetType: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n    LevelDescription: \"The machine should exit green if the first character is a number, exit red if it is a letter and exit blue otherwise\",\r\n    MachineDescription: \"Exits green if the first character is a number, exits red if it is a letter and exits blue otherwise\",\r\n    Name: \"GetType\",\r\n    Id: \"16\",\r\n    Style: {\r\n        Color: \"Orange\",\r\n        BorderColor: \"LightGoldenRodYellow\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Blue, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" }\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"42\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"42\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"this starts with a letter\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Red, Content: \"this starts with a letter\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \",#@%!\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Blue, Content: \",#@%!\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Blue, Content: \"\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 2,\r\n        Column: 3\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const IsEmpty: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"9\"],\r\n    LevelDescription: \"The machine should exit green if the message is empty, otherwise exit red\",\r\n    MachineDescription: \"Exits green if the message is empty, otherwise exits red\",\r\n    Name: \"IsEmpty\",\r\n    Id: \"1\",\r\n    Style: {\r\n        Color: \"OrangeRed\",\r\n        BorderColor: \"ForestGreen\",\r\n    },\r\n    InputChannels: [ { Direction: DirectionEnum.Right, Channel: ChannelColorEnum.Green, Status: \"Exists\" , UseMachineColor: true }],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Red, Content: \"abc\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 0,\r\n        Column: 0\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const KeepNumbers: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n    LevelDescription: \"The machine should keep all numbers in the input string, and remove all other characters\",\r\n    MachineDescription: \"Keeps all numbers in the input string, and removes all other characters\",\r\n\r\n    Name: \"KeepNumbers\",\r\n    Id: \"6\",\r\n    Style: {\r\n        Color: \"PeachPuff\",\r\n        BorderColor: \"DarkOrchid\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"42\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"42\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"fortytwo\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1 and 1 is\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"11\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 3,\r\n        Column: 3\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const PlusOne: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n    LevelDescription: \"The machine should increase the leading input number by 1\",\r\n    MachineDescription: \"Increase the input number by 1\",\r\n\r\n    Name: \"PlusOne\",\r\n    Id: \"7\",\r\n    Style: {\r\n        Color: \"Indigo\",\r\n        BorderColor: \"DarkTurquoise\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"4\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"5\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"0 and some noise 2\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1 and some noise 2\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"42\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"43\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"9\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"10\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"39\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"40\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"23999999 9\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"24000000 9\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 2,\r\n        Column: 6\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const RemoveRepeats: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\"],\r\n    LevelDescription: \"The machine should remove all repeating characters from the input string\",\r\n    MachineDescription: \"Removes all repeating characters from the input string\",\r\n\r\n    Name: \"RemoveRepeats\",\r\n    Id: \"8\",\r\n    Style: {\r\n        Color: \"Brown\",\r\n        BorderColor: \"Indigo\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aaaabccc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hhhhhhhhhiiiii wwwworllllldddddddd\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hi world\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 1,\r\n        Column: 1\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const RotateBackwards: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n    LevelDescription: \"The machine should put the last character in front of the string\",\r\n    MachineDescription: \"Rotates the last character to the front of the string\",\r\n\r\n    Name: \"RotateBackwards\",\r\n    Id: \"11\",\r\n    Style: {\r\n        Color: \"Blue\",\r\n        BorderColor: \"Cyan\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Red, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n        { Channel: ChannelColorEnum.Blue, Direction: DirectionEnum.Up, Status: \"Exists\" },\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"cab\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"otater\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"rotate\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"ello world!H\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"Hello world!\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 2,\r\n        Column: 5\r\n    }\r\n};","import { LevelModel } from \"../LevelModel\";\r\n\r\nexport const Sandbox: LevelModel = {\r\n    AllowedMachines: [\"0\", \"1\", \"2\", \"3\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\"],\r\n    LevelDescription: \"Sandbox level, no specific goals\",\r\n    MachineDescription: \"\",\r\n    Name: \"Sandbox\",\r\n    Id: \"12\",\r\n    Style: {\r\n        Color: \"DarkOliveGreen\",\r\n        BorderColor: \"Tomato\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [],\r\n    Tests: [],\r\n    Cell: {\r\n        Row: -1,\r\n        Column: -1\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const ReverseLimited: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n    LevelDescription: \"The machine should reverse the characters from the string. Input are only lowercase letters. With limited number of machines at your disposal, this is VERY HARD\",\r\n    MachineDescription: \"Reverses the characters from the string. Input can only consist of lowercase letters\",\r\n\r\n    Name: \"ReverseLimited\",\r\n    Id: \"10\",\r\n    Style: {\r\n        Color: \"MediumSlateBlue\",\r\n        BorderColor: \"Black\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [\r\n        { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"cba\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"esrever\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"reverse\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 1,\r\n        Column: 9\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const Reverse: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"12\", \"13\", \"14\"],\r\n    LevelDescription: \"The machine should reverse the characters from the input string\",\r\n    MachineDescription: \"Reverses the characters from the input string\",\r\n\r\n    Name: \"Reverse\",\r\n    Id: \"9\",\r\n    Style: {\r\n        Color: \"MediumSlateBlue\",\r\n        BorderColor: \"Aqua\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"cba\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"desrever saw sihT\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"This was reversed\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 4,\r\n        Column: 6\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const CopyAll: LevelModel = {\r\n    AllowedMachines: [\"0\", \"1\", \"2\", \"3\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\"],\r\n    LevelDescription: \"The machine should exit the input both to green and red\",\r\n    MachineDescription: \"Exits the input both to green and red\",\r\n    Name: \"CopyAll\",\r\n    Id: \"14\",\r\n    Style: {\r\n        Color: \"LightGreen\",\r\n        BorderColor: \"Yellow\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    ],\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" },\r\n            { Order: 0, Channel: ChannelColorEnum.Red, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" },\r\n            { Order: 0, Channel: ChannelColorEnum.Red, Content: \"a\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" },\r\n            { Order: 0, Channel: ChannelColorEnum.Red, Content: \"abc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabcc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabcc\" },\r\n            { Order: 0, Channel: ChannelColorEnum.Red, Content: \"aabcc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"Copied\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"Copied\" },\r\n            { Order: 0, Channel: ChannelColorEnum.Red, Content: \"Copied\" }]\r\n        }\r\n    ],\r\n    Cell: {\r\n        Row: 4,\r\n        Column: 8\r\n    }\r\n};","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const Decrement: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"12\"],\r\n    LevelDescription: \"The machine should decrement the leading character, turning 0 into 9, a/A into z/Z\",\r\n    MachineDescription: \"Decrements the leading character\",\r\n\r\n    Name: \"Decrement\",\r\n    Id: \"20\",\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"bbc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"0321\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"9321\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"@bc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"@bc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"Iello world\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"Hello world\" }]\r\n        }\r\n    ],\r\n    Style: {\r\n        Color: \"MediumVioletRed\",\r\n        BorderColor: \"Orange\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Cell: {\r\n        Row: 2,\r\n        Column: 4\r\n    }\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const IncrementAll: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"12\"],\r\n    LevelDescription: \"The machine should increment all characters\",\r\n    MachineDescription: \"Increments all characters\",\r\n\r\n    Name: \"IncrementAll\",\r\n    Id: \"21\",\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"bcd\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"987\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"098\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1+1=3\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"2+2=4\" }]\r\n        }\r\n    ],\r\n    Style: {\r\n        Color: \"Ivory\",\r\n        BorderColor: \"MediumVioletRed\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Cell: {\r\n        Row: 2,\r\n        Column: 2\r\n    }\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const IncrementIncreasing: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"12\"],\r\n    LevelDescription: \"The machine should increment the first character 0 times, the second character once, the third twice etcetera. Characters that cannot be incremented do not count\",\r\n    MachineDescription: \"Increments the first character 0 times, the second character once, the third twice, etcetera. Characters that cannot be incremented do not count\",\r\n\r\n    Name: \"IncrementIncreasing\",\r\n    Id: \"22\",\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aaa\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"5432109\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"5555555\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1-A2@q\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1-B4@t\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hdjik rikdu!\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hello world!\" }]\r\n        }\r\n    ],\r\n    Style: {\r\n        Color: \"Pink\",\r\n        BorderColor: \"Purple\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Up, Status: \"Exists\" },\r\n    ],\r\n    Cell: {\r\n        Row: 1,\r\n        Column: 5\r\n    }\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const JoinAll: LevelModel = {\r\n    AllowedMachines: [\"0\", \"1\", \"2\", \"3\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"12\", \"13\", \"14\"],\r\n    LevelDescription: \"The machine should store the input from green, appending it to any previously stored message. On red input, it should exit the stored message appended with the input to green, clearing the stored message\",\r\n    MachineDescription: \"Stores input from green,appending it to any previously stored message. On red input it exits the stored message appended with the input to green\",\r\n\r\n    Name: \"JoinAll\",\r\n    Id: \"24\",\r\n    Tests: [\r\n        {\r\n            inputs: [\r\n                { Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" },\r\n                { Order: 1, Channel: ChannelColorEnum.Green, Content: \"b\" },\r\n                { Order: 2, Channel: ChannelColorEnum.Red, Content: \"c\" }\r\n            ],\r\n            expectedOutputs: [\r\n                { Order: 2, Channel: ChannelColorEnum.Green, Content: \"abc\" },\r\n            ]\r\n        },\r\n        {\r\n            inputs: [\r\n                { Order: 0, Channel: ChannelColorEnum.Red, Content: \"\" },\r\n                { Order: 1, Channel: ChannelColorEnum.Green, Content: \"\" },\r\n                { Order: 2, Channel: ChannelColorEnum.Red, Content: \"ab\" },\r\n                { Order: 3, Channel: ChannelColorEnum.Red, Content: \"\" },\r\n            ],\r\n            expectedOutputs: [\r\n                { Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" },\r\n                { Order: 2, Channel: ChannelColorEnum.Green, Content: \"ab\" },\r\n                { Order: 3, Channel: ChannelColorEnum.Green, Content: \"\" }\r\n            ]\r\n        },\r\n        {\r\n            inputs: [\r\n                { Order: 0, Channel: ChannelColorEnum.Green, Content: \"Ma\" },\r\n                { Order: 1, Channel: ChannelColorEnum.Green, Content: \"rco\" },\r\n                { Order: 2, Channel: ChannelColorEnum.Red, Content: \"?\" },\r\n                { Order: 3, Channel: ChannelColorEnum.Green, Content: \"Po\" },\r\n                { Order: 4, Channel: ChannelColorEnum.Green, Content: \"lo\" },\r\n                { Order: 5, Channel: ChannelColorEnum.Red, Content: \"!\" },\r\n            ],\r\n            expectedOutputs: [\r\n                { Order: 2, Channel: ChannelColorEnum.Green, Content: \"Marco?\" },\r\n                { Order: 5, Channel: ChannelColorEnum.Green, Content: \"Polo!\" }\r\n            ]\r\n        },\r\n    ],\r\n    Style: {\r\n        Color: \"Grey\",\r\n        BorderColor: \"YellowGreen\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Cell: {\r\n        Row: 4,\r\n        Column: 7\r\n    }\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const MakeTwins: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\"],\r\n    LevelDescription: \"The machine should exit the string with each character repeated once\",\r\n    MachineDescription: \"Makes sure that each character is repeated once\",\r\n\r\n    Name: \"MakeTwins\",\r\n    Id: \"18\",\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabbcc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aaabcc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabbcc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hello world\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hheelloo  wwoorrlldd\" }]\r\n        }\r\n    ],\r\n    Style: {\r\n        Color: \"AntiqueWhite\",\r\n        BorderColor: \"GreenYellow\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    ],\r\n    Cell: {\r\n        Row: 1,\r\n        Column: 2\r\n    }\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const RemoveIfDuplicate: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"9\"],\r\n    LevelDescription: \"If the first characters are duplicates, the machine should clear all the duplicates\",\r\n    MachineDescription: \"If the first characters are duplicates, clears those duplicates\",\r\n\r\n    Name: \"RemoveIfDuplicate\",\r\n    Id: \"17\",\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"aabc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"bc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"a\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hhhhhhhello world\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"ello world\" }]\r\n        }\r\n    ],\r\n    Style: {\r\n        Color: \"MediumAquaMarine\",\r\n        BorderColor: \"DeepSkyBlue\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Blue, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    { Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" }\r\n    ],\r\n    Cell: {\r\n        Row: 1,\r\n        Column: 0\r\n    }\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const RemoveUntilRepeat: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"9\"],\r\n    LevelDescription: \"The machine should delete all characters before the first repeated character\",\r\n    MachineDescription: \"Deletes all character before the first repeated character\",\r\n\r\n    Name: \"RemoveUntilRepeat\",\r\n    Id: \"19\",\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abbc\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"bbc\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abca\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"22\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"22\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"1\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"hello world\" }],\r\n            expectedOutputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"llo world\" }]\r\n        }\r\n    ],\r\n    Style: {\r\n        Color: \"LawnGreen\",\r\n        BorderColor: \"DarkGrey\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Down, Status: \"Exists\" },\r\n    ],\r\n    Cell: {\r\n        Row: 2,\r\n        Column: 0\r\n    }\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { LevelModel } from \"../LevelModel\";\r\n\r\nexport const Trigger: LevelModel = {\r\n    AllowedMachines: [\"0\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"12\", \"13\"],\r\n    LevelDescription: \"The machine should exit the input to green, and exit an empty message to red\",\r\n    MachineDescription: \"Exits the input to green, exits an empty message to red\",\r\n\r\n    Name: \"Trigger\",\r\n    Id: \"23\",\r\n    Tests: [\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" }],\r\n            expectedOutputs: [\r\n                { Order: 0, Channel: ChannelColorEnum.Green, Content: \"abc\" },\r\n                { Order: 0, Channel: ChannelColorEnum.Red, Content: \"\" }\r\n            ]\r\n        },\r\n        {\r\n            inputs: [{ Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" }],\r\n            expectedOutputs: [\r\n                { Order: 0, Channel: ChannelColorEnum.Green, Content: \"\" },\r\n                { Order: 0, Channel: ChannelColorEnum.Red, Content: \"\" }\r\n            ]\r\n        }\r\n    ],\r\n    Style: {\r\n        Color: \"DimGrey\",\r\n        BorderColor: \"Thistle\",\r\n    },\r\n    InputChannels: [],\r\n    OutputChannels: [{ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Right, Status: \"Exists\" },\r\n    ],\r\n    Cell: {\r\n        Row: 4,\r\n        Column: 5\r\n    }\r\n}","import { LevelModel } from \"./LevelModel\";\nimport { AppendLength } from \"./Levels/AppendLength\";\nimport { GetLength } from \"./Levels/GetLength\";\nimport { GetType } from \"./Levels/GetType\";\nimport { IsEmpty } from \"./Levels/IsEmpty\";\nimport { KeepNumbers } from \"./Levels/KeepNumbers\";\nimport { PlusOne } from \"./Levels/PlusOne\";\nimport { RemoveRepeats } from \"./Levels/RemoveRepeats\";\nimport { RotateBackwards } from \"./Levels/RotateBackwards\";\nimport { Sandbox } from \"./Levels/Sandbox\";\nimport { ReverseLimited } from \"./Levels/ReverseLimited\";\nimport { Reverse } from \"./Levels/Reverse\";\nimport { CopyAll } from \"./Levels/CopyAll\";\nimport { Decrement } from \"./Levels/Decrement\";\nimport { IncrementAll } from \"./Levels/IncrementAll\";\nimport { IncrementIncreasing } from \"./Levels/IncrementIncreasing\";\nimport { JoinAll } from \"./Levels/JoinAll\";\nimport { MakeTwins } from \"./Levels/MakeTwins\";\nimport { RemoveIfDuplicate } from \"./Levels/RemoveIfDuplicate\";\nimport { RemoveUntilRepeat } from \"./Levels/RemoveUntilRepeat\";\nimport { Trigger } from \"./Levels/Trigger\";\n\n\nexport class LevelStore {\n    private static levelStore: LevelStore;\n    private levels: LevelModel[];\n\n    private constructor() {\n        this.levels = [];\n        this.init();\n    }\n\n    public static GetStore(): LevelStore {\n        if (LevelStore.levelStore === undefined) {\n            LevelStore.levelStore = new LevelStore();\n        }\n\n        return LevelStore.levelStore;\n    }\n\n    private init(): void {\n        this.levels.push(IsEmpty);\n        this.levels.push(RemoveRepeats);\n        this.levels.push(GetType);\n        this.levels.push(KeepNumbers);\n        this.levels.push(GetLength);\n        this.levels.push(AppendLength);\n        this.levels.push(RotateBackwards);\n        this.levels.push(PlusOne);\n        this.levels.push(ReverseLimited);\n        this.levels.push(Reverse);\n        this.levels.push(CopyAll);\n        this.levels.push(Sandbox);\n        this.levels.push(Decrement);\n        this.levels.push(IncrementAll);\n        this.levels.push(IncrementIncreasing);\n        this.levels.push(JoinAll);\n        this.levels.push(MakeTwins);\n        this.levels.push(RemoveIfDuplicate, RemoveUntilRepeat, Trigger)\n    }\n\n    public GetAllLevels(): LevelModel[] {\n        return this.levels;\n    }\n\n    public GetLevel(id: string): LevelModel {\n        const level = this.levels.find((l) => l.Id === id);\n        if (level === undefined) {\n            throw Error(`Unable to find level with id '${id}'`)\n        }\n\n        return level;\n    }\n}","import { LevelStore } from \"../../../Levels/LevelStore\";\r\nimport { LevelActionTypes } from \"./Actions\";\r\nimport { LevelStateModel } from \"./LevelStateModel\";\r\nimport { TestStateModel } from \"./TestStateModel\";\r\nimport { ChannelColorEnum } from \"../../../Models/ChannelColorsEnum\";\r\nimport { OrderedMessageModel } from \"../../../Models/OrderedMessageModel\";\r\nimport { Draft } from \"immer\";\r\nimport { Actions } from \"../../Actions\";\r\n\r\nexport function LevelReducer(draft: Draft<LevelStateModel> | undefined, action: Actions): LevelStateModel | undefined {\r\n    if (action.type === \"LoadLevelActionType\") {\r\n        return LoadLevel(action.id);\r\n    }\r\n\r\n    if (draft === undefined) {\r\n        return undefined;\r\n    }\r\n\r\n    switch (action.type) {\r\n        case \"AddTestActionType\":\r\n            const newTest: TestStateModel = {\r\n                actualOutputs: [],\r\n                expectedOutputs: [],\r\n                inputs: [{ Channel: ChannelColorEnum.Green, Content: \"\", Order: 0 }],\r\n                editable: true,\r\n                id: Math.max(...draft.tests.map((t) => t.id), -1) + 1\r\n            };\r\n            draft.tests.push(newTest);\r\n            break;\r\n        case \"RemoveTestActionType\":\r\n            draft.tests = draft.tests.filter((t) => t.id !== action.testId);\r\n            break;\r\n        case \"ReportOutputActionType\":\r\n        case \"ClearTestOutputActionType\":\r\n        case \"AddInputActionType\":\r\n        case \"RemoveInputActionType\":\r\n        case \"UpdateInputActionType\":\r\n            const tests = draft.tests.map((t) => {\r\n                if (t.id === action.testId) {\r\n                    return UpdateTest(t, action);\r\n                } else {\r\n                    return t;\r\n                }\r\n            });\r\n            draft.tests = tests;\r\n            break;\r\n        case \"AddNewMachineActionType\":\r\n        case \"ChannelChangedActionType\":\r\n        case \"DeleteMachineActionType\":\r\n        case \"FixMachineActionType\":\r\n        case \"MachineAddedActionType\":\r\n        case \"MachineMovedActionType\":\r\n        case \"MachineRemovedActionType\":\r\n            draft.tests.forEach((t) => {\r\n                t.actualOutputs = undefined;\r\n            });\r\n            break;\r\n    }\r\n\r\n    return draft;\r\n};\r\n\r\nfunction LoadLevel(levelId: string): LevelStateModel {\r\n    const level = LevelStore.GetStore().GetLevel(levelId);\r\n    const tests = level.Tests.length > 0 ? level.Tests.map((t, index) => ({ ...t, actualOutputs: undefined, id: index, editable: false })) :\r\n        [{ actualOutputs: undefined, inputs: [{ Channel: ChannelColorEnum.Green, Content: \"\", Order: 0 }], expectedOutputs: [], id: 0, editable: true }];\r\n    const returnValue: LevelStateModel = {\r\n        allowedMachines: level.AllowedMachines,\r\n        description: level.LevelDescription,\r\n        name: level.Name,\r\n        id: level.Id,\r\n        tests\r\n    };\r\n    return returnValue;\r\n}\r\n\r\nfunction UpdateTest(test: Draft<TestStateModel>, action: LevelActionTypes): TestStateModel {\r\n    switch (action.type) {\r\n        case \"ReportOutputActionType\":\r\n            if (test.actualOutputs === undefined) {\r\n                test.actualOutputs = [];\r\n            }\r\n            const outputs = test.actualOutputs.slice();\r\n            outputs.push(action.outputMessage);\r\n            return { ...test, actualOutputs: outputs };\r\n        case \"ClearTestOutputActionType\":\r\n            return { ...test, actualOutputs: [] };\r\n        case \"AddInputActionType\":\r\n            const maxOrder = Math.max(...test.inputs.map((i) => i.Order), -1) + 1;\r\n            const newInput: OrderedMessageModel = {\r\n                Channel: ChannelColorEnum.Green, Content: \"\", Order: maxOrder\r\n            };\r\n            return { ...test, inputs: test.inputs.concat(newInput) };\r\n        case \"RemoveInputActionType\":\r\n\r\n            const filteredInputs = test.inputs.filter((i) => i.Order !== action.order);\r\n            const newInputs = filteredInputs.map((i, index) => ({ ...i, Order: index }));\r\n\r\n            const filteredOutputs = test.expectedOutputs.filter((i) => i.Order !== action.order);\r\n            const newOutputs = filteredOutputs.map((o) => ({ ...o, Order: o.Order > action.order ? o.Order - 1 : o.Order }));\r\n            return { ...test, inputs: newInputs, expectedOutputs: newOutputs, actualOutputs: undefined };\r\n        case \"UpdateInputActionType\":\r\n            const content = action.input.Content.replaceAll(\"{\", \"\").replaceAll(\"}\", \"\");\r\n            const inputsUpdated = test.inputs.map((i) => i.Order === action.input.Order ? { ...action.input, Content: content } : i);\r\n            return { ...test, inputs: inputsUpdated };\r\n        default:\r\n            return test;\r\n    }\r\n}\r\n","import { MachineApi } from \"../Models/MachineApi\";\nimport { ChannelModel } from \"../Models/ChannelModel\";\nimport { DirectionEnum } from \"../Models/DirectionEnum\";\nimport { InputChannelModel } from \"../Components/Grid/Cell/MachineInstance/MachineDrawer/InputChannelModel\";\n\nexport function GetNewChannelSet(api: MachineApi, includeInput: boolean): { inputChannels: ChannelModel[], outputChannels: ChannelModel[] } {\n    const outputChannels: ChannelModel[] = [];\n    const inputChannels: ChannelModel[] = [];\n\n    let direction: DirectionEnum = DirectionEnum.Up;\n    for (const color of api.OutputChannels) {\n        outputChannels.push({ Channel: color, Direction: direction, Status: \"Exists\" });\n        direction++;\n    }\n\n    if (includeInput && api.InputChannels.length > 1) {\n        direction = 0;\n        for (const color of api.InputChannels) {\n            inputChannels.push({ Channel: color, Direction: direction, Status: \"Exists\" });\n            direction++;\n        }\n    }\n\n    return { inputChannels, outputChannels };\n}\n\nexport function GetDirectedChannelSet(api: MachineApi): { inputChannels: InputChannelModel[], outputChannels: ChannelModel[][] }{\n    const { inputChannels, outputChannels } = GetNewChannelSet(api, true);\n\n    const hasMultipleInputs = inputChannels.length > 1;\n\n    const inputChannelModels: InputChannelModel[] = inputChannels.map((c) =>\n        ({\n            UseMachineColor: !hasMultipleInputs,\n            ...c\n        })\n    );\n\n    const orderedOutputChannels: ChannelModel[][] = [];\n    for (const channel of outputChannels) {\n        const group = orderedOutputChannels.find((o) => o[0].Direction === channel.Direction);\n        if (group === undefined) {\n            orderedOutputChannels.push([channel]);\n        } else {\n            group.push(channel);\n        }\n    }\n\n    return {inputChannels: inputChannelModels, outputChannels: orderedOutputChannels}\n}","export interface CellModel {\n    readonly Row: number;\n    readonly Column: number;\n}\n\nexport function AreEqual(cell: CellModel, otherCell: CellModel): boolean {\n    return cell.Column === otherCell.Column && cell.Row === otherCell.Row;\n}","const halfSquareRatio = 0.9;\nconst circleRadiusRatio = 0.28;\nexport const halfSquareFactor = halfSquareRatio * circleRadiusRatio;\nexport const outputSplitFactor = 0.12;\nexport const outputStartLengthFactor = 0.25;\n\nexport class DrawConstants {\n\n    constructor(cellSize: number) {\n        this.cellSize = cellSize;\n        this.aperture = 0.23 * cellSize;\n        this.armLength = 0.18 * cellSize;\n        this.circleRadius = circleRadiusRatio * cellSize;\n        this.borderWidth = 0.05 * cellSize;\n        this.halfSquareSize = halfSquareRatio * this.circleRadius;\n        this.shadeOffset = 0.008 * cellSize;\n        this.outputSplit = outputSplitFactor * cellSize;\n        this.outputLength = 0.38 * cellSize;\n        this.outputRadius = 0.15 * cellSize;\n        this.outputWidth = 0.06 * cellSize;\n        this.outputStartLength = outputStartLengthFactor * cellSize;\n        this.center = 0.5 * cellSize;\n        this.apertureAngle = Math.asin(this.aperture * 0.5 / this.circleRadius);\n        this.defiatingAngle = this.armAngle - this.apertureAngle;\n        this.protrudingArm = Math.cos(this.defiatingAngle) * this.armLength;\n    }\n\n    public cellSize: number;\n    public aperture: number;\n    public armLength: number;\n    public armAngle = Math.PI * 0.05;\n    public circleRadius: number;\n    public borderWidth: number;\n    public halfSquareSize: number;\n    public shadeOffset: number;\n    public outputSplit: number;\n    public outputLength: number;\n    public outputRadius: number;\n    public outputWidth: number;\n    public outputStartLength: number;\n    public center: number;\n    public apertureAngle: number;\n    public defiatingAngle: number;\n    public protrudingArm: number;\n}","import { DragSourceMonitor, DragLayerMonitor, DropTargetMonitor, XYCoord } from \"react-dnd\";\nimport { DirectionEnum } from \"../Models/DirectionEnum\";\nimport { AppStore } from \"../Redux/Store\";\nimport { GetActivePlayer } from \"./StoreHelper\";\n\nexport function GetAngleFromMonitor(monitor: DragSourceMonitor | DragLayerMonitor | DropTargetMonitor, offsetX: number, offsetY: number): number | undefined {\n    const xyCoord = monitor.getClientOffset();\n    const xyCoordInit = monitor.getInitialSourceClientOffset();\n    return GetAngleFromOffsets(offsetX, offsetY, xyCoord, xyCoordInit);\n}\n\nexport function GetAngleFromOffsets(offsetX: number, offsetY: number, xyCoord: XYCoord | null, xyCoordInit: XYCoord | null): number | undefined {\n    const center = GetActivePlayer(AppStore.getState()).cellSize / 2;\n    if (xyCoord !== null && xyCoordInit !== null) {\n        const angle = Math.atan2(xyCoord.y - xyCoordInit.y + offsetY - center, xyCoord.x - xyCoordInit.x + offsetX - center);\n        return angle;\n    }\n\n    return undefined;\n}\n\nexport function GetAngleFromDirection(direction: DirectionEnum): number {\n    switch (direction) {\n        case DirectionEnum.Up:\n            return Math.PI * 0.5;\n        case DirectionEnum.Right:\n            return Math.PI * 1;\n        case DirectionEnum.Down:\n            return Math.PI * 1.5;\n        case DirectionEnum.Left:\n            return Math.PI * 2;\n    }\n}","import { ColorModel } from \"./ColorModel\";\n\nfunction GetColorCode(enteredColor: string): string {\n    let color = \"#FFFFFF\";\n    const lowerEnteredColor = enteredColor.toLowerCase();\n    switch (lowerEnteredColor) {\n        case \"aliceblue\": color = \"#F0F8FF\"; break;\n        case \"antiquewhite\": color = \"#FAEBD7\"; break;\n        case \"aqua\": color = \"#00FFFF\"; break;\n        case \"aquamarine\": color = \"#7FFFD4\"; break;\n        case \"azure\": color = \"#F0FFFF\"; break;\n        case \"beige\": color = \"#F5F5DC\"; break;\n        case \"bisque\": color = \"#FFE4C4\"; break;\n        case \"black\": color = \"#000000\"; break;\n        case \"blanchedalmond\": color = \"#FFEBCD\"; break;\n        case \"blue\": color = \"#0000FF\"; break;\n        case \"blueviolet\": color = \"#8A2BE2\"; break;\n        case \"brown\": color = \"#A52A2A\"; break;\n        case \"burlywood\": color = \"#DEB887\"; break;\n        case \"cadetblue\": color = \"#5F9EA0\"; break;\n        case \"chartreuse\": color = \"#7FFF00\"; break;\n        case \"chocolate\": color = \"#D2691E\"; break;\n        case \"coral\": color = \"#FF7F50\"; break;\n        case \"cornflowerblue\": color = \"#6495ED\"; break;\n        case \"cornsilk\": color = \"#FFF8DC\"; break;\n        case \"crimson\": color = \"#DC143C\"; break;\n        case \"cyan\": color = \"#00FFFF\"; break;\n        case \"darkblue\": color = \"#00008B\"; break;\n        case \"darkcyan\": color = \"#008B8B\"; break;\n        case \"darkgoldenrod\": color = \"#B8860B\"; break;\n        case \"darkgray\": color = \"#A9A9A9\"; break;\n        case \"darkgrey\": color = \"#A9A9A9\"; break;\n        case \"darkgreen\": color = \"#006400\"; break;\n        case \"darkkhaki\": color = \"#BDB76B\"; break;\n        case \"darkmagenta\": color = \"#8B008B\"; break;\n        case \"darkolivegreen\": color = \"#556B2F\"; break;\n        case \"darkorange\": color = \"#FF8C00\"; break;\n        case \"darkorchid\": color = \"#9932CC\"; break;\n        case \"darkred\": color = \"#8B0000\"; break;\n        case \"darksalmon\": color = \"#E9967A\"; break;\n        case \"darkseagreen\": color = \"#8FBC8F\"; break;\n        case \"darkslateblue\": color = \"#483D8B\"; break;\n        case \"darkslategray\": color = \"#2F4F4F\"; break;\n        case \"darkslategrey\": color = \"#2F4F4F\"; break;\n        case \"darkturquoise\": color = \"#00CED1\"; break;\n        case \"darkviolet\": color = \"#9400D3\"; break;\n        case \"deeppink\": color = \"#FF1493\"; break;\n        case \"deepskyblue\": color = \"#00BFFF\"; break;\n        case \"dimgray\": color = \"#696969\"; break;\n        case \"dimgrey\": color = \"#696969\"; break;\n        case \"dodgerblue\": color = \"#1E90FF\"; break;\n        case \"firebrick\": color = \"#B22222\"; break;\n        case \"floralwhite\": color = \"#FFFAF0\"; break;\n        case \"forestgreen\": color = \"#228B22\"; break;\n        case \"fuchsia\": color = \"#FF00FF\"; break;\n        case \"gainsboro\": color = \"#DCDCDC\"; break;\n        case \"ghostwhite\": color = \"#F8F8FF\"; break;\n        case \"gold\": color = \"#FFD700\"; break;\n        case \"goldenrod\": color = \"#DAA520\"; break;\n        case \"gray\": color = \"#808080\"; break;\n        case \"grey\": color = \"#808080\"; break;\n        case \"green\": color = \"#008000\"; break;\n        case \"greenyellow\": color = \"#ADFF2F\"; break;\n        case \"honeydew\": color = \"#F0FFF0\"; break;\n        case \"hotpink\": color = \"#FF69B4\"; break;\n        case \"indianred\": color = \"#CD5C5C\"; break;\n        case \"indigo\": color = \"#4B0082\"; break;\n        case \"ivory\": color = \"#FFFFF0\"; break;\n        case \"khaki\": color = \"#F0E68C\"; break;\n        case \"lavender\": color = \"#E6E6FA\"; break;\n        case \"lavenderblush\": color = \"#FFF0F5\"; break;\n        case \"lawngreen\": color = \"#7CFC00\"; break;\n        case \"lemonchiffon\": color = \"#FFFACD\"; break;\n        case \"lightblue\": color = \"#ADD8E6\"; break;\n        case \"lightcoral\": color = \"#F08080\"; break;\n        case \"lightcyan\": color = \"#E0FFFF\"; break;\n        case \"lightgoldenrodyellow\": color = \"#FAFAD2\"; break;\n        case \"lightgray\": color = \"#D3D3D3\"; break;\n        case \"lightgrey\": color = \"#D3D3D3\"; break;\n        case \"lightgreen\": color = \"#90EE90\"; break;\n        case \"lightpink\": color = \"#FFB6C1\"; break;\n        case \"lightsalmon\": color = \"#FFA07A\"; break;\n        case \"lightseagreen\": color = \"#20B2AA\"; break;\n        case \"lightskyblue\": color = \"#87CEFA\"; break;\n        case \"lightslategray\": color = \"#778899\"; break;\n        case \"lightslategrey\": color = \"#778899\"; break;\n        case \"lightsteelblue\": color = \"#B0C4DE\"; break;\n        case \"lightyellow\": color = \"#FFFFE0\"; break;\n        case \"lime\": color = \"#00FF00\"; break;\n        case \"limegreen\": color = \"#32CD32\"; break;\n        case \"linen\": color = \"#FAF0E6\"; break;\n        case \"magenta\": color = \"#FF00FF\"; break;\n        case \"maroon\": color = \"#800000\"; break;\n        case \"mediumaquamarine\": color = \"#66CDAA\"; break;\n        case \"mediumblue\": color = \"#0000CD\"; break;\n        case \"mediumorchid\": color = \"#BA55D3\"; break;\n        case \"mediumpurple\": color = \"#9370DB\"; break;\n        case \"mediumseagreen\": color = \"#3CB371\"; break;\n        case \"mediumslateblue\": color = \"#7B68EE\"; break;\n        case \"mediumspringgreen\": color = \"#00FA9A\"; break;\n        case \"mediumturquoise\": color = \"#48D1CC\"; break;\n        case \"mediumvioletred\": color = \"#C71585\"; break;\n        case \"midnightblue\": color = \"#191970\"; break;\n        case \"mintcream\": color = \"#F5FFFA\"; break;\n        case \"mistyrose\": color = \"#FFE4E1\"; break;\n        case \"moccasin\": color = \"#FFE4B5\"; break;\n        case \"navajowhite\": color = \"#FFDEAD\"; break;\n        case \"navy\": color = \"#000080\"; break;\n        case \"oldlace\": color = \"#FDF5E6\"; break;\n        case \"olive\": color = \"#808000\"; break;\n        case \"olivedrab\": color = \"#6B8E23\"; break;\n        case \"orange\": color = \"#FFA500\"; break;\n        case \"orangered\": color = \"#FF4500\"; break;\n        case \"orchid\": color = \"#DA70D6\"; break;\n        case \"palegoldenrod\": color = \"#EEE8AA\"; break;\n        case \"palegreen\": color = \"#98FB98\"; break;\n        case \"paleturquoise\": color = \"#AFEEEE\"; break;\n        case \"palevioletred\": color = \"#DB7093\"; break;\n        case \"papayawhip\": color = \"#FFEFD5\"; break;\n        case \"peachpuff\": color = \"#FFDAB9\"; break;\n        case \"peru\": color = \"#CD853F\"; break;\n        case \"pink\": color = \"#FFC0CB\"; break;\n        case \"plum\": color = \"#DDA0DD\"; break;\n        case \"powderblue\": color = \"#B0E0E6\"; break;\n        case \"purple\": color = \"#800080\"; break;\n        case \"rebeccapurple\": color = \"#663399\"; break;\n        case \"red\": color = \"#FF0000\"; break;\n        case \"rosybrown\": color = \"#BC8F8F\"; break;\n        case \"royalblue\": color = \"#4169E1\"; break;\n        case \"saddlebrown\": color = \"#8B4513\"; break;\n        case \"salmon\": color = \"#FA8072\"; break;\n        case \"sandybrown\": color = \"#F4A460\"; break;\n        case \"seagreen\": color = \"#2E8B57\"; break;\n        case \"seashell\": color = \"#FFF5EE\"; break;\n        case \"sienna\": color = \"#A0522D\"; break;\n        case \"silver\": color = \"#C0C0C0\"; break;\n        case \"skyblue\": color = \"#87CEEB\"; break;\n        case \"slateblue\": color = \"#6A5ACD\"; break;\n        case \"slategray\": color = \"#708090\"; break;\n        case \"slategrey\": color = \"#708090\"; break;\n        case \"snow\": color = \"#FFFAFA\"; break;\n        case \"springgreen\": color = \"#00FF7F\"; break;\n        case \"steelblue\": color = \"#4682B4\"; break;\n        case \"tan\": color = \"#D2B48C\"; break;\n        case \"teal\": color = \"#008080\"; break;\n        case \"thistle\": color = \"#D8BFD8\"; break;\n        case \"tomato\": color = \"#FF6347\"; break;\n        case \"turquoise\": color = \"#40E0D0\"; break;\n        case \"violet\": color = \"#EE82EE\"; break;\n        case \"wheat\": color = \"#F5DEB3\"; break;\n        case \"white\": color = \"#FFFFFF\"; break;\n        case \"whitesmoke\": color = \"#F5F5F5\"; break;\n        case \"yellow\": color = \"#FFFF00\"; break;\n        case \"yellowgreen\": color = \"#9ACD32\"; break;\n    }\n\n    return color;\n}\n\nexport function CheckColorString(color: string): boolean {\n    if (color === \"\" || color === undefined || color === null) {\n        return false;\n    }\n\n    const style = new Option().style;\n    style.color = color;\n\n    return style.color === color.toLowerCase();\n}\n\nfunction GetColorModel(color: string): ColorModel {\n    if (color.startsWith(\"rgb(\")) {\n        const colorPart = color.split(\"(\")[1].split(\")\")[0];\n        const colors = colorPart.split(\",\");\n        return {\n            red: Number(colors[0]),\n            green: Number(colors[1]),\n            blue: Number(colors[2])\n        }\n    } else if (!color.startsWith(\"#\")) {\n        color = GetColorCode(color);\n    }\n\n    return {\n        red: parseInt(color.substring(1, 3), 16),\n        blue: parseInt(color.substring(5, 7), 16),\n        green: parseInt(color.substring(3, 5), 16)\n    }\n}\n\nexport function GetOpaqueColor(color: string, opacity: number): string {\n    try {\n        const model = GetColorModel(color);\n\n        return `rgba(${model.red},${model.green},${model.blue},${opacity})`;\n    } catch (error) {\n        return \"white\";\n    }\n}\n\nexport function GetLighterColor(color: string, amount: number): string {\n    try {\n        const model = GetColorModel(color);\n        const red = 256 - (256 - model.red) * amount;\n        const blue = 256 - (256 - model.blue) * amount;\n        const green = 256 - (256 - model.green) * amount;\n        return `rgb(${red},${green},${blue})`;\n    } catch (error) {\n        return \"white\";\n    }\n}\n\n\nexport function GetGrayScaleColor(color: string, amount: number): string {\n    const model = GetColorModel(color);\n\n    try {\n        const average = (model.red + model.green + model.blue) / 3\n        return `rgb(${average * amount + model.red * (1 - amount)},${average * amount + model.green * (1 - amount)},${average * amount + model.blue * (1 - amount)})`;\n    } catch (error) {\n        return \"white\";\n    }\n}\n\nexport function GetRandomColor(): string {\n    const randNumber = Math.floor(Math.random() * 148);\n    switch (randNumber) {\n        case 0: return \"AliceBlue\";\n        case 1: return \"AntiqueWhite\";\n        case 2: return \"Aqua\";\n        case 3: return \"Aquamarine\";\n        case 4: return \"Azure\";\n        case 5: return \"Beige\";\n        case 6: return \"Bisque\";\n        case 7: return \"Black\";\n        case 8: return \"BlanchedAlmond\";\n        case 9: return \"Blue\";\n        case 10: return \"BlueViolet\";\n        case 11: return \"Brown\";\n        case 12: return \"BurlyWood\";\n        case 13: return \"CadetBlue\";\n        case 14: return \"Chartreuse\";\n        case 15: return \"Chocolate\";\n        case 16: return \"Coral\";\n        case 17: return \"CornflowerBlue\";\n        case 18: return \"Cornsilk\";\n        case 19: return \"Crimson\";\n        case 20: return \"Cyan\";\n        case 21: return \"DarkBlue\";\n        case 22: return \"DarkCyan\";\n        case 23: return \"DarkGoldenRod\";\n        case 24: return \"DarkGray\";\n        case 25: return \"DarkGrey\";\n        case 26: return \"DarkGreen\";\n        case 27: return \"DarkKhaki\";\n        case 28: return \"DarkMagenta\";\n        case 29: return \"DarkOliveGreen\";\n        case 30: return \"DarkOrange\";\n        case 31: return \"DarkOrchid\";\n        case 32: return \"DarkRed\";\n        case 33: return \"DarkSalmon\";\n        case 34: return \"DarkSeaGreen\";\n        case 35: return \"DarkSlateBlue\";\n        case 36: return \"DarkSlateGray\";\n        case 37: return \"DarkSlateGrey\";\n        case 38: return \"DarkTurquoise\";\n        case 39: return \"DarkViolet\";\n        case 40: return \"DeepPink\";\n        case 41: return \"DeepSkyBlue\";\n        case 42: return \"DimGray\";\n        case 43: return \"DimGrey\";\n        case 44: return \"DodgerBlue\";\n        case 45: return \"FireBrick\";\n        case 46: return \"FloralWhite\";\n        case 47: return \"ForestGreen\";\n        case 48: return \"Fuchsia\";\n        case 49: return \"Gainsboro\";\n        case 50: return \"GhostWhite\";\n        case 51: return \"Gold\";\n        case 52: return \"GoldenRod\";\n        case 53: return \"Gray\";\n        case 54: return \"Grey\";\n        case 55: return \"Green\";\n        case 56: return \"GreenYellow\";\n        case 57: return \"HoneyDew\";\n        case 58: return \"HotPink\";\n        case 59: return \"IndianRed \";\n        case 60: return \"Indigo\";\n        case 61: return \"Ivory\";\n        case 62: return \"Khaki\";\n        case 63: return \"Lavender\";\n        case 64: return \"LavenderBlush\";\n        case 65: return \"LawnGreen\";\n        case 66: return \"LemonChiffon\";\n        case 67: return \"LightBlue\";\n        case 68: return \"LightCoral\";\n        case 69: return \"LightCyan\";\n        case 70: return \"LightGoldenRodYellow\";\n        case 71: return \"LightGray\";\n        case 72: return \"LightGrey\";\n        case 73: return \"LightGreen\";\n        case 74: return \"LightPink\";\n        case 75: return \"LightSalmon\";\n        case 76: return \"LightSeaGreen\";\n        case 77: return \"LightSkyBlue\";\n        case 78: return \"LightSlateGray\";\n        case 79: return \"LightSlateGrey\";\n        case 80: return \"LightSteelBlue\";\n        case 81: return \"LightYellow\";\n        case 82: return \"Lime\";\n        case 83: return \"LimeGreen\";\n        case 84: return \"Linen\";\n        case 85: return \"Magenta\";\n        case 86: return \"Maroon\";\n        case 87: return \"MediumAquaMarine\";\n        case 88: return \"MediumBlue\";\n        case 89: return \"MediumOrchid\";\n        case 90: return \"MediumPurple\";\n        case 91: return \"MediumSeaGreen\";\n        case 92: return \"MediumSlateBlue\";\n        case 93: return \"MediumSpringGreen\";\n        case 94: return \"MediumTurquoise\";\n        case 95: return \"MediumVioletRed\";\n        case 96: return \"MidnightBlue\";\n        case 97: return \"MintCream\";\n        case 98: return \"MistyRose\";\n        case 99: return \"Moccasin\";\n        case 100: return \"NavajoWhite\";\n        case 101: return \"Navy\";\n        case 102: return \"OldLace\";\n        case 103: return \"Olive\";\n        case 104: return \"OliveDrab\";\n        case 105: return \"Orange\";\n        case 106: return \"OrangeRed\";\n        case 107: return \"Orchid\";\n        case 108: return \"PaleGoldenRod\";\n        case 109: return \"PaleGreen\";\n        case 110: return \"PaleTurquoise\";\n        case 111: return \"PaleVioletRed\";\n        case 112: return \"PapayaWhip\";\n        case 113: return \"PeachPuff\";\n        case 114: return \"Peru\";\n        case 115: return \"Pink\";\n        case 116: return \"Plum\";\n        case 117: return \"PowderBlue\";\n        case 118: return \"Purple\";\n        case 119: return \"RebeccaPurple\";\n        case 120: return \"Red\";\n        case 121: return \"RosyBrown\";\n        case 122: return \"RoyalBlue\";\n        case 123: return \"SaddleBrown\";\n        case 124: return \"Salmon\";\n        case 125: return \"SandyBrown\";\n        case 126: return \"SeaGreen\";\n        case 127: return \"SeaShell\";\n        case 128: return \"Sienna\";\n        case 129: return \"Silver\";\n        case 130: return \"SkyBlue\";\n        case 131: return \"SlateBlue\";\n        case 132: return \"SlateGray\";\n        case 133: return \"SlateGrey\";\n        case 134: return \"Snow\";\n        case 135: return \"SpringGreen\";\n        case 136: return \"SteelBlue\";\n        case 137: return \"Tan\";\n        case 138: return \"Teal\";\n        case 139: return \"Thistle\";\n        case 140: return \"Tomato\";\n        case 141: return \"Turquoise\";\n        case 142: return \"Violet\";\n        case 143: return \"Wheat\";\n        case 144: return \"White\";\n        case 145: return \"WhiteSmoke\";\n        case 146: return \"Yellow\";\n        case 147: return \"YellowGreen\";\n        default:\n            return \"White\";\n    }\n}","export function Minimum<T>(array: T[], valueSelector: (element: T) => number): T | undefined {\r\n    let minimum = Infinity;\r\n    let minimumElement: T | undefined = undefined;\r\n    for (const element of array) {\r\n        const value = valueSelector(element);\r\n        if (value < minimum) {\r\n            minimumElement = element;\r\n            minimum = value;\r\n        }\r\n    }\r\n\r\n    return minimumElement;\r\n}\r\n\r\nexport function Maximum<T>(array: T[], valueSelector: (element: T) => number): T | undefined {\r\n    let maximum = -Infinity;\r\n    let maximumElement: T | undefined = undefined;\r\n    for (const element of array) {\r\n        const value = valueSelector(element);\r\n        if (value > maximum) {\r\n            maximumElement = element;\r\n            maximum = value;\r\n        }\r\n    }\r\n\r\n    return maximumElement;\r\n}","export class Constants {\n    public static CellSize = 100;\n    public static MinimumColumns = 6;\n    public static MinimumRows = 5;\n    public static MenuBackGround = \"rgba(255,255,255,0.86)\";\n}","\r\nimport { MachineInstancesReducer } from \"./MachineInstances/MachineInstancesReducer\";\r\nimport { CustomMachineModel } from \"./CustomMachineModel\";\r\nimport { Draft } from \"immer\";\r\nimport { Actions } from \"../../../Actions\";\r\nimport { TypeProvider } from \"../TypeProvider\";\r\nimport { CheckColorString } from \"../../../../Helper/ColorHelper\";\r\nimport { GridSetupModel } from \"./GridModel\";\r\nimport { Maximum, Minimum } from \"../../../../Helper/ArrayHelper\";\r\nimport { Constants } from \"../../../../Components/Constants\";\r\n\r\nexport function GridSetupReducer(draft: Draft<CustomMachineModel>, action: Actions, typeProvider: TypeProvider, cellSize: number): CustomMachineModel {\r\n    if (draft === undefined) {\r\n        return draft;\r\n    }\r\n    switch (action.type) {\r\n        case \"SetColorActionType\":\r\n            if (CheckColorString(action.color)) {\r\n                draft.Style.Color = action.color;\r\n            }\r\n            return draft;\r\n        case \"SetBorderColorActionType\":\r\n            if (CheckColorString(action.borderColor)) {\r\n                draft.Style.BorderColor = action.borderColor;\r\n            }\r\n            return draft;\r\n        case \"SetNameActionType\":\r\n            draft.Style.Name = action.name;\r\n            return draft;\r\n        case \"SetDescriptionActionType\":\r\n            draft.Style.Description = action.description;\r\n            return draft;\r\n        default:\r\n            switch (action.type) {\r\n                case \"FixMachineActionType\":\r\n                    const machineFixed = draft.Setup.MachineInstances.find((mi) => mi.Id === action.machineInstanceId)!;\r\n                    if (machineFixed.Status === \"Deleted\") {\r\n                        if (draft.Setup.MachineInstances.filter((m) => m.MachineId === machineFixed.MachineId).length <= 1) {\r\n                            draft.DependingOnDeleted = draft.DependingOnDeleted.filter((id) => id !== machineFixed.MachineId);\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            draft.Setup.MachineInstances = MachineInstancesReducer(draft.Setup.MachineInstances, action, typeProvider, cellSize);\r\n\r\n            switch (action.type) {\r\n                case \"MachineAddedActionType\":\r\n                case \"MachineRemovedActionType\":\r\n                case \"MachineMovedActionType\":\r\n                    ResizeGrid(draft.Setup);\r\n            }\r\n\r\n            return draft;\r\n    }\r\n}\r\n\r\nfunction ResizeGrid(setup: Draft<GridSetupModel>) {\r\n    if (setup.MachineInstances.length > 0) {\r\n        let deltaRow = 0;\r\n        let deltaColumn = 0;\r\n        const minimumColumn = Minimum(setup.MachineInstances, (mi) => mi.Cell.Column)!.Cell.Column;\r\n        const minimumRow = Minimum(setup.MachineInstances, (mi) => mi.Cell.Row)!.Cell.Row;\r\n        let maximumColumn = Maximum(setup.MachineInstances, (mi) => mi.Cell.Column)!.Cell.Column;\r\n        let maximumRow = Maximum(setup.MachineInstances, (mi) => mi.Cell.Row)!.Cell.Row;\r\n\r\n        if (minimumColumn <= 0) {\r\n            deltaColumn = 1 - minimumColumn;\r\n            maximumColumn += deltaColumn;\r\n        } else {\r\n            let excessColumns = maximumColumn + 2 - Constants.MinimumColumns;\r\n            if (excessColumns > 0 && minimumColumn > 1) {\r\n                deltaColumn = -Math.min(excessColumns, minimumColumn - 1);\r\n                excessColumns += deltaColumn;\r\n                maximumColumn += deltaColumn;\r\n            }\r\n        }\r\n\r\n        if (minimumRow <= 0) {\r\n            deltaRow = 1 - minimumRow;\r\n            maximumRow += deltaRow;\r\n        } else {\r\n            let excessRows = maximumRow + 2 - Constants.MinimumRows;\r\n            if (excessRows > 0 && minimumRow > 1) {\r\n                deltaRow = -Math.min(excessRows, minimumRow - 1);\r\n                excessRows += deltaRow;\r\n                maximumRow += deltaRow;\r\n            }           \r\n        }\r\n\r\n\r\n        setup.MachineInstances.forEach((mi) => {\r\n            mi.Cell = {\r\n                Row: mi.Cell.Row + deltaRow,\r\n                Column: mi.Cell.Column + deltaColumn\r\n            }\r\n        });\r\n\r\n        setup.NumberOfColumns = Math.max(maximumColumn + 2, Constants.MinimumColumns);\r\n        setup.NumberOfRows = Math.max(maximumRow + 2, Constants.MinimumRows);\r\n    }\r\n}","import { MachineInstanceModel } from \"../../../../../Models/MachineInstanceModel\";\r\nimport { Draft } from \"immer\";\r\nimport { Actions } from \"../../../../Actions\";\r\nimport { GetNewChannelSet } from \"../../../../../Helper/NewChannelSet\";\r\nimport { AreEqual } from \"../../../../../Models/CellModel\";\r\nimport * as dc from \"../../../../../Components/Grid/Cell/MachineInstance/MachineDrawer/DrawConstants\";\r\nimport { GetAngleFromDirection } from \"../../../../../Helper/AngleHelper\";\r\nimport { DirectionEnum } from \"../../../../../Models/DirectionEnum\";\r\nimport { ITypeProvider } from \"../../../../../MachineStore/ITypeProvider\";\r\nimport { IsStartMachine } from \"../../../../../MachineStore/IMachine\";\r\n\r\nexport function MachineInstancesReducer(draft: Draft<MachineInstanceModel[]>, action: Actions, typeProvider: ITypeProvider, cellSize: number): MachineInstanceModel[] {\r\n    switch (action.type) {\r\n        case \"ChannelChangedActionType\":\r\n            const machine = draft.find((mi) => mi.Id === action.machineInstanceId)!;\r\n            const channelIndex = machine.OutputChannels.findIndex((c) => c.Channel === action.channel.Channel);\r\n            const relevantChannels = machine.OutputChannels.filter((c, index) => c.Direction === action.channel.Direction && c.Status !== \"DoesNotExist\" && index !== channelIndex);\r\n            if (relevantChannels.length > 0 && action.angle !== undefined) {\r\n                const newChannelArray = machine.OutputChannels.filter((c) => c.Direction !== action.channel.Direction && c.Status !== \"DoesNotExist\");\r\n                let split = -(relevantChannels.length - 1) / 2 * dc.outputSplitFactor * cellSize;\r\n\r\n                let inserted = false;\r\n                const baseAngle = GetAngleFromDirection(action.channel.Direction);\r\n                const draggedSplit = -Math.sin(action.angle - baseAngle) * dc.outputStartLengthFactor * cellSize;\r\n                for (let index = 0; index < relevantChannels.length; index++) {\r\n                    if (!inserted && draggedSplit < split) {\r\n                        inserted = true;\r\n                        newChannelArray.push(action.channel);\r\n                    }\r\n\r\n                    newChannelArray.push(relevantChannels[index]);\r\n                    split += dc.outputSplitFactor * cellSize;\r\n                }\r\n\r\n                if (!inserted) {\r\n                    newChannelArray.push(action.channel);\r\n                }\r\n\r\n                machine.OutputChannels = newChannelArray;\r\n\r\n            } else {\r\n                machine.OutputChannels[channelIndex] = action.channel;\r\n            }\r\n            return draft;\r\n        case \"InputChannelChangedActionType\":\r\n            const machineInput = draft.find((mi) => mi.Id === action.machineInstanceId)!;\r\n            const channelModel = machineInput.InputChannels.find((ic) => ic.Direction === action.channel.Direction)!;\r\n            channelModel.Direction = machineInput.InputChannels[action.channelIndex].Direction;\r\n            machineInput.InputChannels[action.channelIndex] = action.channel;\r\n            return draft;\r\n        case \"MachineRemovedActionType\":\r\n            const machineRemoved = draft.find((mi) => mi.Id === action.machineInstanceId)!;\r\n            if (IsStartMachine(machineRemoved.MachineId) && draft.filter((mi) => IsStartMachine(mi.MachineId)).length < 2) {\r\n                return draft;\r\n            } else {\r\n                return draft.filter((mi) => mi.Id !== action.machineInstanceId);\r\n            }\r\n        case \"MachineAddedActionType\":\r\n            if (draft.some((mi) => AreEqual(mi.Cell, action.cell))) {\r\n                return draft;\r\n            }\r\n\r\n            const { outputChannels, inputChannels } = GetNewChannelSet(action.api, false);\r\n\r\n            const maxId = (draft.length === 0) ? 0 : Math.max(...draft.map((mi) => mi.Id));\r\n            const machineInstance: MachineInstanceModel = {\r\n                Cell: action.cell,\r\n                MachineId: action.machineId,\r\n                OutputChannels: outputChannels,\r\n                InputChannels: inputChannels,\r\n                Id: maxId + 1,\r\n                Status: \"Valid\"\r\n            };\r\n\r\n            draft.push(machineInstance);\r\n            return draft;\r\n\r\n        case \"MachineMovedActionType\":\r\n            if (draft.some((m) => AreEqual(m.Cell, action.newCell))) {\r\n                return draft;\r\n            }\r\n            const machineMoved = draft.find((mi) => mi.Id === action.machineInstanceId)!;\r\n            machineMoved.Cell = action.newCell;\r\n            return draft;\r\n        case \"FixMachineActionType\":\r\n            const machineFixed = draft.find((mi) => mi.Id === action.machineInstanceId)!;\r\n            if (machineFixed.Status === \"Deleted\") {\r\n                return draft.filter((mi) => mi.Id !== action.machineInstanceId);\r\n            } else if (machineFixed.Status === \"ChannelsInvalid\") {\r\n                const api = typeProvider.GetMachineType(machineFixed.MachineId).Api;\r\n                machineFixed.OutputChannels = machineFixed.OutputChannels.filter((c) => api.OutputChannels.some((o) => o === c.Channel));\r\n                machineFixed.OutputChannels = machineFixed.OutputChannels.concat(api.OutputChannels.filter((o) => !machineFixed.OutputChannels.some((c) => c.Channel === o)).map((o) => ({ Channel: o, Direction: DirectionEnum.Up, Status: \"Exists\" })));\r\n\r\n                machineFixed.InputChannels = machineFixed.InputChannels.map((ic) => {\r\n                    if (ic.Status === \"Exists\" && !api.InputChannels.some((iac) => iac === ic.Channel)) {\r\n                        return { ...ic, Channel: api.InputChannels[0] };\r\n                    } else {\r\n                        return ic;\r\n                    }\r\n                });\r\n\r\n                machineFixed.Status = \"Valid\";\r\n            }\r\n            return draft;\r\n        default:\r\n            return draft;\r\n    }\r\n}","import { ExitCellModel } from \"../Models/ExitCellModel\";\r\nimport { CellModel } from \"../Models/CellModel\";\r\nimport { MachineInstanceModel } from \"../Models/MachineInstanceModel\";\r\nimport { DirectionEnum } from \"../Models/DirectionEnum\";\r\nimport { GridSetupModel } from \"../Redux/GameDataReducer/PlayerReducer/GridSetup/GridModel\";\r\nimport { Draft } from \"immer\";\r\nimport { ITypeProvider } from \"../MachineStore/ITypeProvider\";\r\nimport { IsStartMachine } from \"../MachineStore/IMachine\";\r\n\r\nexport function CalculateExits(setup: Draft<GridSetupModel>, typeProvider: ITypeProvider): ExitCellModel[] {\r\n    const exitCells: ExitCellModel[] = [];\r\n    let cells: ExitCellModel[] = [];\r\n    const starts = GetStartMachines(setup);\r\n    cells = cells.concat(starts.map((s) => ({ Cell: s.Cell, Direction: s.OutputChannels[0].Direction })));\r\n    for (let i = 0; i < cells.length; i++) {\r\n        let cell: CellModel = cells[i].Cell;\r\n        let machine: Draft<MachineInstanceModel> | undefined;\r\n        let cellModel: CellModel | undefined;\r\n        while (machine === undefined) {\r\n            cellModel = Move(setup, cell, cells[i].Direction);\r\n            if (cellModel === undefined) {\r\n                break;\r\n            }\r\n\r\n            cell = cellModel;\r\n            // eslint-disable-next-line\r\n            machine = setup.MachineInstances.find((mi) => mi.Cell.Column === cell!.Column && mi.Cell.Row === cell!.Row);\r\n        }\r\n\r\n        if (cellModel === undefined) {\r\n            exitCells.push({ Direction: cells[i].Direction, Cell: cell });\r\n            continue;\r\n        }\r\n\r\n        const api = typeProvider.GetMachineType(machine!.MachineId).Api;\r\n        // eslint-disable-next-line\r\n        const existingChannel = machine!.InputChannels.find((ic) => ic.Direction === cells[i].Direction);\r\n        if (existingChannel !== undefined) {\r\n            if (!api.InputChannels.some((ic) => ic === existingChannel.Channel)) {\r\n                existingChannel.Channel = api.InputChannels[0];\r\n            }\r\n            existingChannel.Status = \"Exists\";\r\n        } else {\r\n            machine!.InputChannels.push({\r\n                Channel: api.InputChannels[0],\r\n                Direction: cells[i].Direction,\r\n                Status: \"Exists\"\r\n            });\r\n        }\r\n\r\n        if (!cells.some((c) => c.Cell.Column === cell.Column && c.Cell.Row === cell.Row)) {\r\n            cells = cells.concat(machine!.OutputChannels.map((c) => ({ Cell: cell, Direction: c.Direction })));\r\n        }\r\n    }\r\n    return exitCells;\r\n}\r\n\r\nexport function Move(setup: {NumberOfRows: number, NumberOfColumns: number}, cell: CellModel, direction: DirectionEnum): CellModel | undefined {\r\n    switch (direction) {\r\n        case DirectionEnum.Down:\r\n            if (cell.Row >= setup.NumberOfRows - 1) {\r\n                return;\r\n            }\r\n            return { Column: cell.Column, Row: cell.Row + 1 };\r\n        case DirectionEnum.Up:\r\n            if (cell.Row <= 0) {\r\n                return;\r\n            }\r\n            return { Column: cell.Column, Row: cell.Row - 1 };\r\n        case DirectionEnum.Right:\r\n            if (cell.Column >= setup.NumberOfColumns - 1) {\r\n                return;\r\n            }\r\n            return { Column: cell.Column + 1, Row: cell.Row };\r\n        case DirectionEnum.Left:\r\n            if (cell.Column <= 0) {\r\n                return;\r\n            }\r\n            return { Column: cell.Column - 1, Row: cell.Row };\r\n    }\r\n}\r\n\r\nexport function GetStartMachines(setup: GridSetupModel): MachineInstanceModel[] {\r\n    const startMachines: MachineInstanceModel[] = [];\r\n    for (const machineInstance of setup.MachineInstances) {\r\n        if (IsStartMachine(machineInstance.MachineId)) {\r\n            startMachines.push(machineInstance);\r\n        }\r\n    }\r\n\r\n    return startMachines;\r\n}","import { MachineApi } from \"../../../Models/MachineApi\";\r\nimport { MachineInstanceModel } from \"../../../Models/MachineInstanceModel\";\r\nimport { Draft } from \"immer\";\r\n\r\nexport function UpdateMachineStatus(api: MachineApi, machineInstance: Draft<MachineInstanceModel>): void {\r\n    for (const newOutputChannel of api.OutputChannels) {\r\n        const matchingOutput = machineInstance.OutputChannels.find((i) => i.Channel === newOutputChannel);\r\n        if (matchingOutput === undefined || matchingOutput.Status === \"DoesNotExist\") {\r\n            machineInstance.Status = \"ChannelsInvalid\";\r\n            return;\r\n        }\r\n    }\r\n    for (const outputChannel of machineInstance.OutputChannels.filter((c) => c.Status === \"Exists\")) {\r\n        if (!api.OutputChannels.some((i) => i === outputChannel.Channel)) {\r\n            machineInstance.Status = \"ChannelsInvalid\";\r\n            return;\r\n        }\r\n    }\r\n    for (const inputChannel of machineInstance.InputChannels.filter((c) => c.Status === \"Exists\")) {\r\n        if (!api.InputChannels.some((i) => i === inputChannel.Channel)) {\r\n            machineInstance.Status = \"ChannelsInvalid\";\r\n            return;\r\n        }\r\n    }\r\n    machineInstance.Status = \"Valid\";\r\n}","import { ITypeProvider } from \"../../../MachineStore/ITypeProvider\";\r\nimport { IMachineType } from \"../../../MachineStore/IMachineType\";\r\nimport { CustomMachineModel } from \"./GridSetup/CustomMachineModel\";\r\nimport { MachineStore } from \"../../../MachineStore/MachineStore\";\r\nimport { IsDefaultMachine } from \"../../../MachineStore/IMachine\";\r\n\r\nexport class TypeProvider implements ITypeProvider {\r\n\r\n    private customMachines: CustomMachineModel[];\r\n    constructor(customMachines: CustomMachineModel[]) {\r\n        this.customMachines = customMachines;\r\n    }\r\n    public GetMachineType(machineId: string): IMachineType {\r\n        if (!IsDefaultMachine(machineId)){\r\n            const customMachine = this.customMachines.find((cm) =>  cm.Id === machineId);\r\n            if (customMachine === undefined){\r\n                throw Error(`CustomMachine not found, Id: '${machineId}'`);\r\n            }\r\n\r\n            return customMachine;\r\n        } else {\r\n            return MachineStore.GetStore().GetMachineType(machineId);\r\n        }\r\n    }\r\n\r\n}","export function CreateGuid(): string {\r\n    let array = new Int32Array(4);\r\n    array = window.crypto.getRandomValues(array);\r\n    let text = \"\";\r\n    array.forEach((s) => {text += s.toString(16)});\r\n\r\n    return text;\r\n}","import { ChannelColorEnum } from \"../../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../../Models/DirectionEnum\";\r\nimport { GridSetupReducer } from \"./GridSetup/GridSetupReducer\";\r\nimport { CustomMachineModel } from \"./GridSetup/CustomMachineModel\";\r\nimport { MachineApi, ApiAreEqual } from \"../../../Models/MachineApi\";\r\nimport { MachineInstanceModel } from \"../../../Models/MachineInstanceModel\";\r\nimport { Draft } from \"immer\";\r\nimport { GetRandomColor } from \"../../../Helper/ColorHelper\";\r\nimport { Actions } from \"../../Actions\";\r\nimport { CalculateExits, GetStartMachines } from \"../../../Helper/SetupHelper\";\r\nimport { UpdateMachineStatus } from \"./CustomMachinesHelper\";\r\nimport { TypeProvider } from \"./TypeProvider\";\r\nimport { PlayerModel } from \"./PlayerModel\";\r\nimport { CreateGuid } from \"../../../Helper/Guid\";\r\nimport { IsDefaultMachine } from \"../../../MachineStore/IMachine\";\r\nimport { LevelStore } from \"../../../Levels/LevelStore\";\r\nimport { LevelState } from \"./LevelData\";\r\nimport { Constants } from \"../../../Components/Constants\";\r\n\r\nexport function PlayerReducer(draft: Draft<PlayerModel>, action: Actions): PlayerModel {\r\n    switch (action.type) {\r\n        case \"LoadLevelActionType\":\r\n            {\r\n                const levelData = draft.levelData.find((ld) => ld.Id === action.id);\r\n                if (levelData !== undefined) {\r\n                    draft.activeMachineId = levelData.LastUsedMachineId;\r\n                } else {\r\n                    draft.levelData.push({ Id: action.id, State: LevelState.NoMachineLinked, LastUsedMachineId: undefined })\r\n                    draft.activeMachineId = undefined;\r\n                }\r\n                draft.activeLevel = action.id;\r\n                break;\r\n            }\r\n        case \"ChangePlayerName\":\r\n            draft.name = action.name;\r\n            break;\r\n        case \"UpdateShowAnimations\":\r\n            draft.showAnimations = action.show;\r\n            break;\r\n        case \"UpdateStepTime\":\r\n            draft.stepTime = action.stepTime;\r\n            break;\r\n        case \"AddNewMachineActionType\":\r\n            let newMachine: CustomMachineModel | undefined;\r\n\r\n            const levelData = draft.levelData.find((ld) => ld.Id === draft.activeLevel!);\r\n            if (levelData === undefined || levelData.LastUsedMachineId === undefined) {\r\n                const levelModel = LevelStore.GetStore().GetLevel(draft.activeLevel!);\r\n                newMachine = CreateNewMachine(levelModel.Name, levelModel.MachineDescription, levelModel.Style.Color, levelModel.Style.BorderColor);\r\n            } else {\r\n                newMachine = CreateNewMachine(\"New machine\", \"\");\r\n            }\r\n\r\n            draft.machines.push(newMachine);\r\n            draft.activeMachineId = newMachine.Id;\r\n\r\n            if (levelData !== undefined) {\r\n                if (levelData.LastUsedMachineId === undefined) {\r\n                    levelData.LastUsedMachineId = newMachine.Id;\r\n                }\r\n\r\n                if (levelData.State === LevelState.NoMachineLinked) {\r\n                    levelData.State = LevelState.InProgress;\r\n                }\r\n            }\r\n\r\n            break;\r\n        case \"LoadCustomMachineActionType\":\r\n            const newActiveMachine = draft.machines.find((m) => m.Id === action.machineId);\r\n            if (newActiveMachine === undefined) {\r\n                throw Error(\"Loading an unknown machine, with id \" + action.machineId);\r\n            }\r\n            draft.activeMachineId = action.machineId;\r\n            break;\r\n        case \"ChangeCellSizeActionType\":\r\n            draft.cellSize = action.cellSize;\r\n            break;\r\n        case \"DeleteMachineActionType\":\r\n            if (draft.activeMachineId === action.machineId) {\r\n                draft.activeMachineId = undefined;\r\n            }\r\n\r\n            const usedInLevel = draft.levelData.find((ld) => ld.LastUsedMachineId === action.machineId);\r\n            if (usedInLevel !== undefined) {\r\n                usedInLevel.LastUsedMachineId = undefined;\r\n                usedInLevel.State = LevelState.NoMachineLinked;\r\n            }\r\n\r\n            const directlyDependentMachines = draft.machines.filter((m) => m.DirectlyDependingOn.some((dp) => dp === action.machineId));\r\n            for (const dependentMachine of directlyDependentMachines) {\r\n                const updatedMachines: MachineInstanceModel[] = dependentMachine.Setup.MachineInstances.map((mi) => mi.MachineId === action.machineId ? { ...mi, Status: \"Deleted\" } : mi);\r\n                dependentMachine.Setup.MachineInstances = updatedMachines;\r\n                dependentMachine.DirectlyDependingOn = dependentMachine.DirectlyDependingOn.filter((i) => i !== action.machineId);\r\n                dependentMachine.DependingOnDeleted.push(action.machineId);            \r\n            }\r\n\r\n            if (directlyDependentMachines.length > 0) {\r\n                draft.deletedMachines.push(draft.machines.find((m) => m.Id === action.machineId)!);\r\n            }\r\n\r\n            const dependentMachines = draft.machines.filter((m) => m.DependingOn.some((dp) => dp === action.machineId));\r\n            for (const dependentMachine of dependentMachines) {\r\n                dependentMachine.DependingOn = dependentMachine.DependingOn.filter((i) => i !== action.machineId);\r\n            }\r\n\r\n            draft.machines = draft.machines.filter((m) => m.Id !== action.machineId);\r\n\r\n            draft.deletedMachines = draft.deletedMachines.filter((dm) =>\r\n                draft.machines.some((m) => m.DependingOnDeleted.some((dp) => dp === action.machineId))\r\n            )\r\n            break;\r\n        default:\r\n            if (draft.activeMachineId === undefined) {\r\n                return draft;\r\n            }\r\n\r\n            const activeMachine = draft.machines.find((m) => m.Id === draft.activeMachineId)!;\r\n\r\n            GridSetupReducer(activeMachine, action, new TypeProvider(draft.machines), draft.cellSize);\r\n            break;\r\n    }\r\n\r\n    switch (action.type) {\r\n        case \"AddNewMachineActionType\":\r\n        case \"ChannelChangedActionType\":\r\n        case \"DeleteMachineActionType\":\r\n        case \"FixMachineActionType\":\r\n        case \"MachineAddedActionType\":\r\n        case \"MachineMovedActionType\":\r\n        case \"MachineRemovedActionType\":\r\n            if (draft.activeMachineId !== undefined) {\r\n                EnrichState(draft);\r\n            }\r\n            break;\r\n    }\r\n\r\n    return draft;\r\n};\r\n\r\nfunction CreateNewMachine(name: string, description: string, color?: string, borderColor?: string): CustomMachineModel {\r\n    return {\r\n        Id: CreateGuid(),\r\n        DirectlyDependingOn: [],\r\n        Style: {\r\n            BorderColor: borderColor ?? GetRandomColor(),\r\n            Color: color ?? GetRandomColor(),\r\n            Name: name,\r\n            Description: description\r\n        },\r\n        Api: {\r\n            InputChannels: [ChannelColorEnum.Green],\r\n            OutputChannels: []\r\n        },\r\n        Setup: {\r\n            NumberOfRows: Constants.MinimumRows,\r\n            NumberOfColumns: Constants.MinimumColumns,\r\n            MachineInstances: [{\r\n                MachineId: \"0\",\r\n                OutputChannels: [{ Direction: DirectionEnum.Right, Channel: ChannelColorEnum.Green, Status: \"Exists\" }],\r\n                InputChannels: [], Id: 1,\r\n                Cell: { Row: 2, Column: 1 },\r\n                Status: \"Valid\"\r\n            }]\r\n        },\r\n        ExitCells: [{ Cell: { Row: 2, Column: Constants.MinimumColumns - 1 }, Direction: DirectionEnum.Right }],\r\n        DependingOn: [\"0\"],\r\n        DependingOnDeleted: [],\r\n        Status: \"Valid\"\r\n    };\r\n}\r\n\r\nexport function GetNewPlayer(name: string): PlayerModel {\r\n    return {\r\n        deletedMachines: [],\r\n        id: CreateGuid(),\r\n        levelData: [],\r\n        machines: [],\r\n        name,\r\n        showAnimations: true,\r\n        stepTime: 10,\r\n        activeMachineId: undefined,\r\n        activeLevel: undefined,\r\n        cellSize: Constants.CellSize\r\n    }\r\n}\r\n\r\nconst EnrichState = (draft: PlayerModel) => {\r\n\r\n    DetermineDependencies(draft);\r\n    SetApi(draft);\r\n\r\n    return draft;\r\n};\r\n\r\nfunction DetermineDependencies(draft: Draft<PlayerModel>) {\r\n    const dependingDirectly: string[] = [];\r\n    const depending: string[] = [];\r\n    const DependingOnDeleted: string[] = [];\r\n    const activeMachine = draft.machines.find((m) => m.Id === draft.activeMachineId)!;\r\n\r\n    for (const machine of activeMachine.Setup.MachineInstances) {\r\n        if (machine.Status === \"Deleted\") {\r\n            DependingOnDeleted.push(machine.MachineId);\r\n            continue;\r\n        }\r\n        if (!IsDefaultMachine(machine.MachineId)) {\r\n            if (!dependingDirectly.some((d) => d === machine.MachineId)) {\r\n                dependingDirectly.push(machine.MachineId);\r\n            }\r\n        }\r\n        if (!depending.some((d) => d === machine.MachineId)) {\r\n            depending.push(machine.MachineId);\r\n            if (!IsDefaultMachine(machine.MachineId)) {\r\n                const machineType = draft.machines.find((m) => m.Id === machine.MachineId)!;\r\n                for (const depMachine of machineType.DependingOn) {\r\n                    if (!depending.some((d) => d === depMachine)) {\r\n                        depending.push(depMachine);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    activeMachine.DependingOn = depending;\r\n    activeMachine.DirectlyDependingOn = dependingDirectly;\r\n    return draft;\r\n}\r\n\r\nfunction SetApi(draft: Draft<PlayerModel>) {\r\n    const activeMachine = draft.machines.find((m) => m.Id === draft.activeMachineId)!;\r\n\r\n    activeMachine.Setup.MachineInstances.forEach((mi) => {\r\n        mi.InputChannels.forEach((ic) => {\r\n            ic.Status = \"DoesNotExist\";\r\n        });\r\n    });\r\n\r\n    activeMachine.ExitCells = CalculateExits(activeMachine.Setup, new TypeProvider([...draft.machines, ...draft.deletedMachines]));\r\n\r\n    const exitColors = activeMachine.ExitCells.map((ec) => {\r\n        switch (ec.Direction) {\r\n            case DirectionEnum.Right:\r\n                return ChannelColorEnum.Green;\r\n            case DirectionEnum.Up:\r\n                return ChannelColorEnum.Blue;\r\n            case DirectionEnum.Down:\r\n                return ChannelColorEnum.Red;\r\n            case DirectionEnum.Left:\r\n                return ChannelColorEnum.Yellow;\r\n            default:\r\n                throw Error(\"Invalid value for direction\");\r\n        }\r\n    });\r\n\r\n    const outputs: ChannelColorEnum[] = [];\r\n    for (const color of exitColors) {\r\n        if (!outputs.some((o) => o === color)) {\r\n            outputs.push(color);\r\n        }\r\n    }\r\n    const startMachines = GetStartMachines(activeMachine.Setup);\r\n    const inputs = startMachines.map((mi) => {\r\n        switch (mi.MachineId) {\r\n            case \"0\":\r\n                return ChannelColorEnum.Green;\r\n            case \"1\":\r\n                return ChannelColorEnum.Red;\r\n            case \"2\":\r\n                return ChannelColorEnum.Blue;\r\n            case \"3\":\r\n                return ChannelColorEnum.Yellow;\r\n            default:\r\n                throw Error(\"Unknown startmachine \" + mi.MachineId);\r\n        }\r\n    });\r\n    const newApi: MachineApi = { InputChannels: inputs, OutputChannels: outputs };\r\n    if (!ApiAreEqual(newApi, activeMachine.Api)) {\r\n        UpdateStatusDependentMachines(draft, newApi);\r\n    }\r\n    activeMachine.Api = newApi;\r\n    CheckMachineStatus(activeMachine);\r\n    return draft;\r\n}\r\n\r\nfunction CheckMachineStatus(draft: Draft<CustomMachineModel>) {\r\n    if (draft.Setup.MachineInstances.some((m) => m.Status !== \"Valid\")) {\r\n        draft.Status = \"Invalid\";\r\n    } else {\r\n        draft.Status = \"Valid\";\r\n    }\r\n}\r\n\r\nfunction UpdateStatusDependentMachines(draft: Draft<PlayerModel>, api: MachineApi) {\r\n    const activeMachineId = draft.activeMachineId!;\r\n    const dependentMachines = draft.machines.filter((m) => m.DirectlyDependingOn.some((dp) => dp === activeMachineId));\r\n    for (const dependentMachine of dependentMachines) {\r\n        for (const machineInstance of dependentMachine.Setup.MachineInstances.filter((mi) => mi.Status !== \"Deleted\" && mi.MachineId === activeMachineId)) {\r\n            UpdateMachineStatus(api, machineInstance);\r\n        }\r\n\r\n        CheckMachineStatus(dependentMachine);\r\n    }\r\n}","import { ChannelColorEnum } from \"./ChannelColorsEnum\";\n\nexport interface MachineApi {\n    readonly OutputChannels: ChannelColorEnum[];\n    readonly InputChannels: ChannelColorEnum[];\n}\n\nexport function ApiAreEqual(first: MachineApi, second: MachineApi): boolean {\n    if (first.InputChannels.length !== second.InputChannels.length) {\n        return false;\n    }\n    if (first.OutputChannels.length !== second.OutputChannels.length) {\n        return false;\n    }\n    if (first.InputChannels.some((i) => !second.InputChannels.some((o) => i === o))) {\n        return false;\n    }\n    if (first.OutputChannels.some((i) => !second.OutputChannels.some((o) => i === o))) {\n        return false;\n    }\n\n    return true;\n}","import produce, { Draft } from \"immer\";\r\nimport { GetActiveMachine } from \"../../Helper/StoreHelper\";\r\nimport { IsDefaultMachine } from \"../../MachineStore/IMachine\";\r\nimport { Actions } from \"../Actions\";\r\nimport { GameData } from \"./GameModel\";\r\nimport { LevelReducer } from \"./Level/Reducer\";\r\nimport { LevelState } from \"./PlayerReducer/LevelData\";\r\nimport { PlayerReducer } from \"./PlayerReducer/PlayerReducer\";\r\n\r\nexport const GameReducer: (state: GameData, action: Actions) => GameData = produce((draft: Draft<GameData>, action: Actions) => {\r\n    switch (action.type) {\r\n        case \"SwitchScreen\":\r\n            draft.screen = action.screen;\r\n            break;\r\n        case \"SetMessagesActionType\":\r\n            draft.messages = action.messages;\r\n            break;\r\n        case \"SetMovingOutput\":\r\n            draft.movingOutput = action.outputChannel;\r\n            break;\r\n        default:\r\n            switch (action.type) {\r\n                case \"AddNewMachineActionType\":\r\n                    draft.messages = [];\r\n                    break;\r\n                case \"LoadLevelActionType\":\r\n                    draft.screen = \"playing\";\r\n                    break;\r\n                case \"ChannelChangedActionType\":\r\n                    if (action.channel.Status === \"Exists\") {\r\n                        draft.movingOutput = undefined;\r\n                    }\r\n            }\r\n\r\n            if (draft.activePlayerId === \"\") {\r\n                return;\r\n            }\r\n\r\n            const activePlayer = draft.players.find((p) => p.id === draft.activePlayerId)!;\r\n            PlayerReducer(activePlayer, action);\r\n            break;\r\n    }\r\n\r\n    draft.activeLevel = LevelReducer(draft.activeLevel, action);\r\n\r\n    switch (action.type) {\r\n        case \"ReportOutputActionType\":\r\n            CheckLevelCompleted(draft);\r\n            break;\r\n        case \"MachineRemovedActionType\":\r\n            const activePlayer = draft.players.find((p) => p.id === draft.activePlayerId)!;\r\n            const levelData = activePlayer.levelData.find((l) => l.Id === draft.activeLevel!.id)!;\r\n            if (levelData.State === LevelState.NonValidMachineUsed) {\r\n                if (CheckValidMachinesUsed(draft)) {\r\n                    levelData.State = LevelState.InProgress;\r\n                }\r\n            }\r\n            break;\r\n    }\r\n\r\n    return;\r\n});\r\n\r\nfunction CheckValidMachinesUsed(gameData: GameData): boolean {\r\n    return GetActiveMachine(gameData)?.DependingOn.filter((mu) => IsDefaultMachine(mu)).every((mu) => gameData.activeLevel!.allowedMachines.some((am) => am === mu)) !== false;\r\n}\r\n\r\nfunction CheckLevelCompleted(draft: Draft<GameData>) {\r\n    const activePlayer = draft.players.find((p) => p.id === draft.activePlayerId)!;\r\n    const levelData = activePlayer.levelData.find((l) => l.Id === draft.activeLevel!.id)!;\r\n\r\n    const onlyAllowedMachinesUsed = CheckValidMachinesUsed(draft);\r\n    if (!onlyAllowedMachinesUsed) {\r\n        levelData.State = LevelState.NonValidMachineUsed;\r\n    } else {\r\n        const isCompleted = draft.activeLevel!.tests.every((t) => {\r\n            if (t.actualOutputs?.length !== t.expectedOutputs.length) {\r\n                return false;\r\n            }\r\n\r\n            for (let j = 0; j < t.expectedOutputs.length; j++) {\r\n                const expected = t.expectedOutputs[j];\r\n                if (t.actualOutputs !== undefined) {\r\n                    const indexActual = (t.actualOutputs.findIndex((o) => o.Channel === expected.Channel && o.Content === expected.Content));\r\n                    if (indexActual === -1) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return true;\r\n        });\r\n        if (isCompleted) {\r\n            levelData.State = LevelState.Completed;\r\n        } else {\r\n            levelData.State = LevelState.InProgress;\r\n        }\r\n    }\r\n\r\n    levelData.LastUsedMachineId = activePlayer.activeMachineId;\r\n}\r\n","import { createStore } from \"redux\";\r\nimport { CustomMachinesActionTypes } from \"./GameDataReducer/PlayerReducer/Actions\";\r\nimport { GridSetupActionTypes } from \"./GameDataReducer/PlayerReducer/GridSetup/Actions\";\r\nimport { MachineInstanceActionTypes } from \"./GameDataReducer/PlayerReducer/GridSetup/MachineInstances/Actions\";\r\nimport { LevelActionTypes } from \"./GameDataReducer/Level/Actions\";\r\nimport { ActionTypes } from \"./GameDataReducer/Actions\";\r\nimport { GameReducer } from \"./GameDataReducer/GameReducer\";\r\nimport { GameData } from \"./GameDataReducer/GameModel\";\r\nimport { GetNewPlayer } from \"./GameDataReducer/PlayerReducer/PlayerReducer\";\r\nimport { TestState } from \"../TestState\";\r\nimport { Constants } from \"../Components/Constants\";\r\nimport { Draft } from \"immer\";\r\n\r\nfunction rootReducer(state: GameData | undefined, action: CustomMachinesActionTypes | GridSetupActionTypes | MachineInstanceActionTypes | LevelActionTypes | ActionTypes): GameData {\r\n    if (state === undefined) {\r\n        const player = GetNewPlayer(\"anonymous\");\r\n        return {\r\n            players: [player],\r\n            activePlayerId: player.id,\r\n            messages: [],\r\n            screen: \"startMenu\",\r\n            activeLevel: undefined,\r\n            movingOutput: undefined\r\n        };\r\n    }\r\n\r\n    const returnValue = GameReducer(state, action);\r\n    window.localStorage.setItem(\"Players\", JSON.stringify(returnValue.players));\r\n    window.localStorage.setItem(\"activePlayer\", returnValue.activePlayerId);\r\n\r\n    return returnValue;\r\n}\r\n\r\nfunction getInitialState(): GameData| undefined {\r\n\r\n    // return TestState as GameData;\r\n\r\n    const version = Number.parseInt(window.localStorage.getItem(\"Version\") ?? \"0\", 10);\r\n    if (version === 0) {\r\n        window.localStorage.removeItem(\"State\");\r\n        window.localStorage.setItem(\"Version\", \"1\");\r\n\r\n        return undefined;\r\n    }\r\n\r\n    const state: Draft<GameData> = {\r\n        players: JSON.parse(window.localStorage.getItem(\"Players\")!),\r\n        activePlayerId: window.localStorage.getItem(\"activePlayer\")!,\r\n        messages: [],\r\n        screen: \"startMenu\",\r\n        movingOutput: undefined,\r\n    };\r\n\r\n    if (state.players === null){\r\n        return undefined;\r\n    }\r\n    \r\n    return state;\r\n}\r\n\r\nexport const AppStore = createStore(rootReducer, getInitialState(), (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\r\nexport const AppState = () => {\r\n    return AppStore.getState();\r\n};","import { IActor } from \"../IActor\";\nimport { MessageModel } from \"../../Models/MessageModel\";\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\n\nexport class JoinActor implements IActor {\n    private greenInput: string | undefined;\n    private redInput: string | undefined;\n    public Act(message: MessageModel): Promise<MessageModel[]> {\n        switch (message.Channel) {\n            case ChannelColorEnum.Green:\n                this.greenInput = message.Content;\n                break;\n            case ChannelColorEnum.Red:\n                this.redInput = message.Content;\n                break;\n            default:\n                throw Error(\"Machine does not have inputchannel \" + message.Channel);\n        }\n\n        if (this.greenInput === undefined || this.redInput === undefined) {\n            return Promise.resolve([]);\n        }\n        const returnMessage = this.greenInput.concat(this.redInput);\n        this.greenInput = undefined;\n        this.redInput = undefined;\n        const returnValue: MessageModel[] = [{ Channel: ChannelColorEnum.Green, Content: returnMessage }];\n\n        return Promise.resolve(returnValue);\n    }\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\nimport { JoinActor } from \"./JoinActor\";\r\n\r\nexport class JoinMachine implements IMachine {\r\n    public GetActor(): IActor {\r\n        return new JoinActor();\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"Orange\",\r\n                Color: \"Grey\",\r\n                Name: \"Join\",\r\n                Description: \"Exits with the input from the green channel before the red channel\",\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green, ChannelColorEnum.Red],\r\n                OutputChannels: [ChannelColorEnum.Green]\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id = \"14\";\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class SplitMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            const firstCharacterLength = message.Content[0] !== \"{\" ? 1 : message.Content.indexOf(\"}\") + 1;         \r\n\r\n            returnValue.push({ Content: message.Content.slice(0, firstCharacterLength), Channel: ChannelColorEnum.Green });\r\n            returnValue.push({ Content: message.Content.slice(firstCharacterLength), Channel: ChannelColorEnum.Red });\r\n\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                BorderColor: \"Orange\",\r\n                Color: \"Black\",\r\n                Name: \"Split\",\r\n\r\n                Description: \"The first character exits green, the other characters exit red\",\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green, ChannelColorEnum.Red],\r\n\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public id =\"13\";\r\n}\r\n","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class BlueStartMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            returnValue.push({ Content: message.Content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                Color: \"white\",\r\n                BorderColor: \"blue\",\r\n                Name: \"Start\",\r\n                Description: \"Starting point of the computation. Acts as a move machine for all other purposes\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public readonly id = \"2\";\r\n}","import { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachine } from \"../IMachine\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class YellowStartMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            returnValue.push({ Content: message.Content, Channel: ChannelColorEnum.Green });\r\n            return Promise.resolve(returnValue);\r\n        }\r\n    };\r\n    public GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    public GetType(): IMachineType {\r\n        return {\r\n            Style: {\r\n                Color: \"white\",\r\n                BorderColor: \"#fff020\",\r\n                Name: \"Start\",\r\n                Description: \"Starting point of the computation. Acts as a move machine for all other purposes\"\r\n            },\r\n            Api: {\r\n                InputChannels: [ChannelColorEnum.Green],\r\n                OutputChannels: [ChannelColorEnum.Green],\r\n            },\r\n            DependingOn: [],\r\n            DirectlyDependingOn: []\r\n        };\r\n    }\r\n    public readonly id = \"3\";\r\n}","import { Computer } from \"../Computing/Computer\";\r\nimport { CleanStars, RestoreStars } from \"../Computing/MessageCleaner\";\r\nimport { MessageModel } from \"../Models/MessageModel\";\r\nimport { GridSetupModel } from \"../Redux/GameDataReducer/PlayerReducer/GridSetup/GridModel\";\r\nimport { AddStarMachine } from \"./DefaultMachines/AddStarMachine\";\r\nimport { AddZeroMachine } from \"./DefaultMachines/AddZeroMachine\";\r\nimport { CompareMachine } from \"./DefaultMachines/CompareMachine\";\r\nimport { CopyMachine } from \"./DefaultMachines/CopyMachine\";\r\nimport { DeleteMachine } from \"./DefaultMachines/DeleteMachine\";\r\nimport { GreenStartMachine } from \"./DefaultMachines/GreenStartMachine\";\r\nimport { IncrementMachine } from \"./DefaultMachines/IncrementMachine\";\r\nimport { MoveMachine } from \"./DefaultMachines/MoveMachine\";\r\nimport { RedStartMachine } from \"./DefaultMachines/RedStartMachine\";\r\nimport { RotateMachine } from \"./DefaultMachines/RotateMachine\";\r\nimport { IActor } from \"./IActor\";\r\nimport { IMachine, IsDefaultMachine } from \"./IMachine\";\r\nimport { IMachineType } from \"./IMachineType\";\r\nimport { AppState } from \"../Redux/Store\";\r\nimport { JoinMachine } from \"./DefaultMachines/JoinMachine\";\r\nimport { SplitMachine } from \"./DefaultMachines/SplitMachine\";\r\nimport { BlueStartMachine } from \"./DefaultMachines/BlueStartMachine\";\r\nimport { YellowStartMachine } from \"./DefaultMachines/YellowStartMachine\";\r\nimport { ITypeProvider } from \"./ITypeProvider\";\r\nimport { GetActivePlayer } from \"../Helper/StoreHelper\";\r\n\r\nexport class MachineStore implements ITypeProvider {\r\n    private static machineStore: MachineStore;\r\n    private machines: IMachine[];\r\n\r\n    private constructor() {\r\n        this.machines = [];\r\n        this.init();\r\n    }\r\n\r\n    public static GetStore(): MachineStore {\r\n        if (MachineStore.machineStore === undefined) {\r\n            MachineStore.machineStore = new MachineStore();\r\n        }\r\n\r\n        return MachineStore.machineStore;\r\n    }\r\n\r\n    private init(): void {\r\n        this.machines = [];\r\n        this.machines.push(new GreenStartMachine());\r\n        this.machines.push(new RedStartMachine());\r\n        this.machines.push(new BlueStartMachine());\r\n        this.machines.push(new YellowStartMachine());\r\n        this.machines.push(new MoveMachine());\r\n        this.machines.push(new CopyMachine());\r\n        this.machines.push(new DeleteMachine());\r\n        this.machines.push(new RotateMachine());\r\n        this.machines.push(new CompareMachine());\r\n        this.machines.push(new AddStarMachine());\r\n        this.machines.push(new AddZeroMachine());\r\n        this.machines.push(new IncrementMachine());\r\n        this.machines.push(new SplitMachine());\r\n        this.machines.push(new JoinMachine());\r\n    }\r\n\r\n    private FindMachine(id: string): IMachine {\r\n        const machine = this.machines.find((m) => m.id === id);\r\n        if (machine === undefined) {\r\n            throw new Error(\"No default machine found with id \" + id);\r\n        }\r\n\r\n        return machine;\r\n    }\r\n\r\n    public GetActor(id: string, parentStarNumber: number): IActor {\r\n        if (IsDefaultMachine(id)) {\r\n            return this.FindMachine(id).GetActor();\r\n        } else {\r\n            const customMachine = GetActivePlayer(AppState())?.machines.find((cm) => cm.Id === id);\r\n            if (customMachine === undefined) {\r\n                throw new Error(\"No custom machine found with id \" + id);\r\n            }\r\n            return this.CreateCustomActor(customMachine.Setup, parentStarNumber);\r\n        }\r\n    }\r\n\r\n    public GetMachineType(id: string): IMachineType {\r\n        if (IsDefaultMachine(id)) {\r\n            return this.FindMachine(id).GetType();\r\n        } else {\r\n            const appState = GetActivePlayer(AppState());\r\n            let customMachine = appState?.machines.find((cm) => cm.Id === id);\r\n            if (customMachine === undefined){\r\n                customMachine = appState.deletedMachines.find((cm) => cm.Id === id);\r\n                if (customMachine === undefined) {\r\n                    throw new Error(\"No custom machine found with id \" + id);\r\n                }\r\n            }\r\n\r\n            return customMachine;\r\n        }\r\n    }\r\n\r\n    public GetAllMachines(): string[] {\r\n        const machines: string[] = this.machines.map((m) => m.id);\r\n        return machines;\r\n    }\r\n\r\n    private CreateCustomActor(setup: GridSetupModel, parentStarNumber: number): IActor {\r\n        const computer = new Computer(setup, false);\r\n\r\n        return {\r\n            Act: (message) => {\r\n                const saveMessage = RestoreStars(CleanStars(message.Content, parentStarNumber), computer.starNumber);\r\n                const cleanedMessage: MessageModel = { Content: saveMessage, Channel: message.Channel };\r\n\r\n                const computedMessages = computer.RunInput(cleanedMessage);\r\n                const returnValue: Promise<MessageModel[]> = computedMessages.then((messages) => messages.map((mm) => ({ Channel: mm.Channel, Content: RestoreStars(CleanStars(mm.Content, computer.starNumber), parentStarNumber) })));\r\n                return returnValue;\r\n            }\r\n        };\r\n    }\r\n}","import { OrderedMessageModel } from \"../../../Models/OrderedMessageModel\";\r\n\r\nexport const LoadLevelActionType = \"LoadLevelActionType\";\r\ninterface LoadLevelActionType {\r\n    type: typeof LoadLevelActionType;\r\n    id: string;\r\n}\r\n\r\nexport function LoadLevel(id: string): LevelActionTypes {\r\n    return {\r\n        type: \"LoadLevelActionType\",\r\n        id\r\n    };\r\n}\r\n\r\nexport const ReportOutputActionType = \"ReportOutputActionType\";\r\ninterface ReportOutputActionType {\r\n    type: typeof ReportOutputActionType;\r\n    outputMessage: OrderedMessageModel;\r\n    testId: number;\r\n}\r\n\r\nexport function ReportOutput(outputMessage: OrderedMessageModel, testId: number): LevelActionTypes {\r\n    return {\r\n        type: \"ReportOutputActionType\",\r\n        outputMessage,\r\n        testId\r\n    };\r\n}\r\nexport const ClearTestOutputActionType = \"ClearTestOutputActionType\";\r\ninterface ClearTestOutputActionType {\r\n    type: typeof ClearTestOutputActionType;\r\n    testId: number;\r\n}\r\n\r\nexport function ClearTestOutput(testId: number): LevelActionTypes {\r\n    return {\r\n        type: \"ClearTestOutputActionType\",\r\n        testId\r\n    };\r\n}\r\nexport const AddTestActionType = \"AddTestActionType\";\r\ninterface AddTestActionType {\r\n    type: typeof AddTestActionType;\r\n}\r\n\r\nexport function AddTest(): LevelActionTypes {\r\n    return {\r\n        type: \"AddTestActionType\",\r\n    };\r\n}\r\n\r\nexport const RemoveTestActionType = \"RemoveTestActionType\";\r\ninterface RemoveTestActionType {\r\n    type: typeof RemoveTestActionType;\r\n    testId: number;\r\n}\r\n\r\nexport function RemoveTest(testId: number): LevelActionTypes {\r\n    return {\r\n        type: \"RemoveTestActionType\",\r\n        testId\r\n    };\r\n}\r\n\r\nexport const UpdateInputActionType = \"UpdateInputActionType\";\r\ninterface UpdateInputActionType {\r\n    type: typeof UpdateInputActionType;\r\n    testId: number;\r\n    input: OrderedMessageModel;\r\n}\r\n\r\nexport function UpdateInput(input: OrderedMessageModel, testId: number): LevelActionTypes {\r\n    return {\r\n        type: \"UpdateInputActionType\",\r\n        input,\r\n        testId\r\n    };\r\n}\r\n\r\nexport const AddInputActionType = \"AddInputActionType\";\r\ninterface AddInputActionType {\r\n    type: typeof AddInputActionType;\r\n    testId: number;\r\n}\r\n\r\nexport function AddInput(testId: number): LevelActionTypes {\r\n    return {\r\n        type: \"AddInputActionType\",\r\n        testId\r\n    };\r\n}\r\n\r\nexport const RemoveInputActionType = \"RemoveInputActionType\";\r\ninterface RemoveInputActionType {\r\n    type: typeof RemoveInputActionType;\r\n    testId: number;\r\n    order: number;\r\n}\r\n\r\nexport function RemoveInput(testId: number, order: number): LevelActionTypes {\r\n    return {\r\n        type: \"RemoveInputActionType\",\r\n        testId,\r\n        order\r\n    };\r\n}\r\n\r\nexport type LevelActionTypes = LoadLevelActionType\r\n    | ReportOutputActionType\r\n    | ClearTestOutputActionType\r\n    | AddTestActionType\r\n    | RemoveTestActionType\r\n    | UpdateInputActionType\r\n    | AddInputActionType\r\n    | RemoveInputActionType;\r\n\r\n ","import { MessageLocationModel } from \"../../../../Models/MessageLocationModel\";\r\nimport { MachineInstanceActionTypes } from \"./MachineInstances/Actions\";\r\ninterface SetMessagesActionType {\r\n    type: \"SetMessagesActionType\";\r\n    messages: MessageLocationModel[];\r\n}\r\n\r\nexport function SetMessages(messages: MessageLocationModel[]): GridSetupActionTypes {\r\n    return {\r\n        type: \"SetMessagesActionType\",\r\n        messages\r\n    };\r\n}\r\n\r\nexport function ClearMessages(): GridSetupActionTypes {\r\n    return {\r\n        type: \"SetMessagesActionType\",\r\n        messages: []\r\n    };\r\n}\r\n\r\ninterface SetColorActionType {\r\n    type: \"SetColorActionType\";\r\n    color: string;\r\n}\r\n\r\nexport function SetColor(color: string): GridSetupActionTypes {\r\n    return {\r\n        type: \"SetColorActionType\",\r\n        color\r\n    };\r\n}\r\n\r\ninterface SetBorderColorActionType {\r\n    type: \"SetBorderColorActionType\";\r\n    borderColor: string;\r\n}\r\n\r\nexport function SetBorderColor(borderColor: string): GridSetupActionTypes {\r\n    return {\r\n        type: \"SetBorderColorActionType\",\r\n        borderColor\r\n    };\r\n}\r\ninterface SetDescriptionActionType {\r\n    type: \"SetDescriptionActionType\";\r\n    description: string;\r\n}\r\n\r\nexport function SetDescription(description: string): GridSetupActionTypes {\r\n    return {\r\n        type: \"SetDescriptionActionType\",\r\n        description\r\n    };\r\n}\r\n\r\ninterface SetNameActionType {\r\n    type: \"SetNameActionType\";\r\n    name: string;\r\n}\r\n\r\nexport function SetName(name: string): GridSetupActionTypes {\r\n    return {\r\n        type: \"SetNameActionType\",\r\n        name\r\n    };\r\n}\r\n\r\nexport type GridSetupActionTypes =\r\n    | SetMessagesActionType\r\n    | SetColorActionType\r\n    | SetBorderColorActionType\r\n    | SetNameActionType\r\n    | SetDescriptionActionType\r\n    | MachineInstanceActionTypes;","import { IActor } from \"../MachineStore/IActor\";\r\nimport { MachineStore } from \"../MachineStore/MachineStore\";\r\nimport { CellModel } from \"../Models/CellModel\";\r\nimport { ChannelColorEnum } from \"../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../Models/DirectionEnum\";\r\nimport { Move } from \"../Helper/SetupHelper\";\r\nimport { MachineInstanceModel } from \"../Models/MachineInstanceModel\";\r\nimport { MessageLocationModel } from \"../Models/MessageLocationModel\";\r\nimport { MessageModel } from \"../Models/MessageModel\";\r\nimport { GridSetupModel } from \"../Redux/GameDataReducer/PlayerReducer/GridSetup/GridModel\";\r\nimport { OrderedMessageModel } from \"../Models/OrderedMessageModel\";\r\nimport { ClearTestOutput, ReportOutput } from \"../Redux/GameDataReducer/Level/Actions\";\r\nimport { SetMessages } from \"../Redux/GameDataReducer/PlayerReducer/GridSetup/Actions\";\r\nimport { IStore } from \"../Redux/IStore\";\r\nimport { GetActivePlayer } from \"../Helper/StoreHelper\";\r\nexport class Computer {\r\n    private setup: GridSetupModel;\r\n    private machines: Array<{ id: number, actor: IActor }> = [];\r\n    private store: MachineStore;\r\n    private outputs: MessageModel[] = [];\r\n    private static cancelComputation: (() => void) | undefined = undefined;\r\n    private static stepCount: number;\r\n    private static starNumberCounter: number;\r\n    private activeSetup: boolean;\r\n    public starNumber: number;\r\n\r\n    constructor(setup: GridSetupModel, activeSetup: boolean) {\r\n        this.setup = setup;\r\n        this.activeSetup = activeSetup;\r\n        this.starNumber = Computer.starNumberCounter++;\r\n        this.store = MachineStore.GetStore();\r\n        this.HandleNextMessages = this.HandleNextMessages.bind(this);\r\n        this.CalculateNextMessages = this.CalculateNextMessages.bind(this);\r\n        this.RunInput = this.RunInput.bind(this);\r\n        this.RunComputation = this.RunComputation.bind(this);\r\n        this.SetDelay = this.SetDelay.bind(this);\r\n    }\r\n\r\n    public GetStartMachine(color: ChannelColorEnum): MachineInstanceModel | undefined {\r\n\r\n        let id: string = \"0\";\r\n        switch (color) {\r\n            case ChannelColorEnum.Green:\r\n                id = \"0\";\r\n                break;\r\n            case ChannelColorEnum.Red:\r\n                id = \"1\";\r\n                break;\r\n            case ChannelColorEnum.Blue:\r\n                id = \"2\";\r\n                break;\r\n            case ChannelColorEnum.Yellow:\r\n                id = \"3\";\r\n                break;\r\n        }\r\n\r\n        return this.setup.MachineInstances.find((mi) => mi.MachineId === id);\r\n    }\r\n\r\n    public async RunComputation(testId: number, store: IStore): Promise<OrderedMessageModel[]> {\r\n        Computer.StopComputation();\r\n        Computer.starNumberCounter = 1;\r\n        this.starNumber = 0;\r\n        this.machines = [];\r\n        store.dispatch(ClearTestOutput(testId));\r\n        const test = store.getState().activeLevel!.tests.find((t) => t.id === testId);\r\n        if (test === undefined) {\r\n            return Promise.resolve([]);\r\n        } else {\r\n            let orderedOutputs: OrderedMessageModel[] = [];\r\n\r\n            for (const input of test.inputs) {\r\n                const results = await this.RunInput(input, store, testId, input.Order).catch((reason) => Promise.reject(reason));\r\n                orderedOutputs = orderedOutputs.concat(results.map((mm) => ({ Content: mm.Content, Channel: mm.Channel, Order: input.Order })));\r\n            }\r\n\r\n            return Promise.resolve(orderedOutputs);\r\n        }\r\n    }\r\n\r\n    public static StopComputation(): void {\r\n        if (Computer.cancelComputation) {\r\n            Computer.cancelComputation();\r\n            Computer.cancelComputation = undefined;\r\n        }\r\n\r\n        Computer.stepCount = 0;\r\n    }\r\n\r\n    public RunInput(input: MessageModel, store?: IStore, testId?: number, order?: number): Promise<MessageModel[]> {\r\n        this.outputs = [];\r\n        const messageLocations: MessageLocationModel[] = [];\r\n        const machineInstance = this.GetStartMachine(input.Channel);\r\n        if (machineInstance !== undefined) {\r\n            const direction = machineInstance.OutputChannels[0].Direction;\r\n            const messageLocation: MessageLocationModel = { Content: input.Content, Direction: direction, Cell: machineInstance.Cell };\r\n            messageLocations.push(messageLocation);\r\n        }\r\n\r\n        if (store !== undefined && this.activeSetup && GetActivePlayer(store.getState())!.showAnimations) {\r\n            store.dispatch(SetMessages(messageLocations));\r\n        }\r\n\r\n        return this.OrderNewCalculation({ messageLocations, store, testId, order });\r\n    }\r\n\r\n    private SetDelay<U, T>(callback: (args: U) => Promise<T>, args: U, timeout: number): Promise<T> {\r\n        return new Promise<T>((resolve, reject) => {\r\n            const clearHandle = window.setTimeout(() => callback(args).then(resolve).catch(reject), timeout);\r\n            Computer.cancelComputation = () => {\r\n                window.clearTimeout(clearHandle);\r\n                reject(\"Computation cancelled\");\r\n            };\r\n        });\r\n    }\r\n\r\n    private async HandleNextMessages(args: { messageLocations: MessageLocationModel[], store?: IStore, testId?: number, order?: number }): Promise<MessageModel[]> {\r\n        const [nextMessages, outputMessages] = await this.CalculateNextMessages(args.messageLocations);\r\n        if (outputMessages.length > 0) {\r\n            this.outputs = this.outputs.concat(outputMessages);\r\n        }\r\n\r\n        if (args.store !== undefined) {\r\n            for (const message of outputMessages) {\r\n                args.store.dispatch(ReportOutput({ Channel: message.Channel, Content: message.Content, Order: args.order! }, args.testId!));\r\n            }\r\n        }\r\n\r\n        if (args.store !== undefined && this.activeSetup && GetActivePlayer(args.store.getState())!.showAnimations) {\r\n            args.store.dispatch(SetMessages(nextMessages));\r\n        }\r\n\r\n        if (nextMessages.length > 0) {\r\n            return this.OrderNewCalculation({ ...args, messageLocations: nextMessages });\r\n        } else {\r\n            return Promise.resolve(this.outputs);\r\n        }\r\n    }\r\n\r\n    private OrderNewCalculation(args: { messageLocations: MessageLocationModel[], store?: IStore, testId?: number, order?: number }): Promise<MessageModel[]> {\r\n        Computer.stepCount++;\r\n        const showAnimations = args.store === undefined || GetActivePlayer(args.store.getState())!.showAnimations;\r\n        if ((this.activeSetup && showAnimations) || Computer.stepCount % 100000 === 0) {\r\n            const timeout = args.store !== undefined && showAnimations ? GetActivePlayer(args.store.getState())!.stepTime * 100 : 0;\r\n\r\n            return this.SetDelay(this.HandleNextMessages, args, timeout);\r\n        } else {\r\n            return this.HandleNextMessages(args);\r\n        }\r\n    }\r\n\r\n    private async CalculateNextMessages(messages: MessageLocationModel[]): Promise<[MessageLocationModel[], MessageModel[]]> {\r\n        const doneMessages: MessageLocationModel[] = [];\r\n        const nextMessages: MessageLocationModel[] = [];\r\n        for (const message of messages) {\r\n            let machine: MachineInstanceModel | undefined;\r\n            let messageCell: CellModel | undefined = message.Cell;\r\n\r\n            while (machine === undefined) {\r\n                messageCell = Move(this.setup, messageCell!, message.Direction);\r\n                if (messageCell === undefined) {\r\n                    break;\r\n                }\r\n\r\n                // eslint-disable-next-line\r\n                machine = this.setup.MachineInstances.find((mi) => mi.Cell.Column === messageCell!.Column && mi.Cell.Row === messageCell!.Row);\r\n            }\r\n\r\n            if (messageCell === undefined) {\r\n                doneMessages.push({ Cell: undefined, Direction: message.Direction, Content: message.Content });\r\n                continue;\r\n            }\r\n\r\n            if (machine!.Status !== \"Valid\") {\r\n                return Promise.reject(\"Encountered invalid machine, check your machines\");\r\n            }\r\n\r\n            let channel = ChannelColorEnum.Green;\r\n            const inputChannel = machine!.InputChannels.find((ic) => ic.Direction === message.Direction);\r\n            if (inputChannel !== undefined) {\r\n                channel = inputChannel.Channel;\r\n            }\r\n\r\n            let cachedMachine = this.machines.find((m) => m.id === machine!.Id);\r\n            if (cachedMachine === undefined) {\r\n                const machineInstance = this.setup.MachineInstances.find((mi) => mi.Id === machine!.Id)!;\r\n                cachedMachine = { id: machineInstance.Id, actor: this.store.GetActor(machineInstance.MachineId, this.starNumber) };\r\n                this.machines.push(cachedMachine);\r\n            }\r\n\r\n            const actor = cachedMachine.actor;\r\n\r\n            const nextContents = await actor.Act({ Content: message.Content, Channel: channel });\r\n            for (const nextContent of nextContents) {\r\n                const channelMap = machine!.OutputChannels.find((cm) => cm.Channel === nextContent.Channel);\r\n                if (channelMap === undefined) {\r\n                    throw Error(\"Channelmap \" + nextContent.Channel + \"undefined\");\r\n                }\r\n\r\n                const messageLocation: MessageLocationModel = { Cell: machine!.Cell, Content: nextContent.Content, Direction: channelMap.Direction };\r\n                nextMessages.push(messageLocation);\r\n            }\r\n        }\r\n\r\n        const outputs: MessageModel[] = [];\r\n        for (const doneMessage of doneMessages) {\r\n            switch (doneMessage.Direction) {\r\n                case DirectionEnum.Up:\r\n                    outputs.push({ Content: doneMessage.Content, Channel: ChannelColorEnum.Blue });\r\n                    break;\r\n                case DirectionEnum.Down:\r\n                    outputs.push({ Content: doneMessage.Content, Channel: ChannelColorEnum.Red });\r\n                    break;\r\n                case DirectionEnum.Right:\r\n                    outputs.push({ Content: doneMessage.Content, Channel: ChannelColorEnum.Green });\r\n                    break;\r\n                case DirectionEnum.Left:\r\n                    outputs.push({ Content: doneMessage.Content, Channel: ChannelColorEnum.Yellow });\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return [nextMessages, outputs];\r\n    }\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport NumberInput from \"../NumberInput/NumberInput\";\r\nimport { Props } from \"./Props\";\r\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\r\nimport { GetActivePlayer } from \"../../Helper/StoreHelper\";\r\nimport { UpdateStepTime, UpdateShowAnimations } from \"../../Redux/GameDataReducer/Actions\";\r\nimport { Computer } from \"../../Computing/Computer\";\r\n\r\nconst DashboardInternal: React.FC<Props> = (props) => {\r\n\r\n    const onClicked = () => {\r\n        props.UpdateShowAnimations(!props.ShowAnimations);\r\n    };\r\n    return (\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", width: \"100%\", height: \"100%\" }}>\r\n            <div style={{paddingRight: 30}}>\r\n                <button onClick={Computer.StopComputation} title=\"Stop the running computation\">Stop</button>\r\n            </div>\r\n            <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n                <label title=\"Show animations, will calculate as fast as possible when turned of\">Animations</label>\r\n                {props.ShowAnimations && <label title=\"Step time in tenths of seconds, lower for faster animations\">Step Time</label>}\r\n            </div>\r\n\r\n            <div style={{ display: \"flex\", flexDirection: \"column\", width: 100 }}>\r\n                <button onClick={onClicked} style={{ marginLeft: 5, width: 63}}>{props.ShowAnimations ? \"On\" : \"Off\"}</button>\r\n                {props.ShowAnimations && <NumberInput value={props.StepTime} valueChanged={props.UpdateStepTime} />}\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n    return {\r\n        ShowAnimations: GetActivePlayer(state)!.showAnimations,\r\n        StepTime: GetActivePlayer(state)!.stepTime,\r\n    };\r\n};\r\n\r\nexport const Dashboard = connect(\r\n    mapStateToProps,\r\n    {\r\n        UpdateStepTime, UpdateShowAnimations\r\n    }\r\n)(DashboardInternal);","import { CellModel } from \"../../../../../Models/CellModel\";\r\nimport { ChannelModel } from \"../../../../../Models/ChannelModel\";\r\nimport { MachineApi } from \"../../../../../Models/MachineApi\";\r\n\r\ninterface ChannelChangedActionType {\r\n    type: \"ChannelChangedActionType\";\r\n    machineInstanceId: number;\r\n    channel: ChannelModel;\r\n    angle?: number;\r\n}\r\n\r\nexport function ChangeChannel(machineInstanceId: number, channel: ChannelModel, angle?: number): MachineInstanceActionTypes {\r\n    return {\r\n        type: \"ChannelChangedActionType\",\r\n        machineInstanceId,\r\n        channel,\r\n        angle\r\n    };\r\n}\r\n\r\ninterface InputChannelChangedActionType {\r\n    type: \"InputChannelChangedActionType\";\r\n    machineInstanceId: number;\r\n    channelIndex: number;\r\n    channel: ChannelModel;\r\n}\r\n\r\nexport function ChangeInputChannel(machineInstanceId: number, channelIndex: number, channel: ChannelModel): MachineInstanceActionTypes {\r\n    return {\r\n        type: \"InputChannelChangedActionType\",\r\n        machineInstanceId,\r\n        channelIndex,\r\n        channel\r\n    };\r\n}\r\n\r\ninterface MachineRemovedActionType {\r\n    type: \"MachineRemovedActionType\";\r\n    machineInstanceId: number;\r\n}\r\n\r\nexport function RemoveMachine(machineInstanceId: number): MachineInstanceActionTypes {\r\n    return {\r\n        type: \"MachineRemovedActionType\",\r\n        machineInstanceId\r\n    };\r\n}\r\n\r\ninterface MachineAddedActionType {\r\n    type: \"MachineAddedActionType\";\r\n    machineId: string;\r\n    cell: CellModel;\r\n    api: MachineApi;\r\n}\r\n\r\nexport function AddMachine(machineId: string, api: MachineApi, cellId: CellModel): MachineInstanceActionTypes {\r\n    return {\r\n        type: \"MachineAddedActionType\",\r\n        machineId,\r\n        cell: cellId,\r\n        api\r\n    };\r\n}\r\n\r\ninterface MachineMovedActionType {\r\n    type: \"MachineMovedActionType\";\r\n    machineInstanceId: number;\r\n    newCell: CellModel;\r\n}\r\n\r\nexport function MoveMachine(machineInstanceId: number, newCell: CellModel): MachineInstanceActionTypes {\r\n    return {\r\n        type: \"MachineMovedActionType\",\r\n        machineInstanceId,\r\n        newCell\r\n    };\r\n}\r\n\r\ninterface FixMachineActionType {\r\n    type: \"FixMachineActionType\";\r\n    machineInstanceId: number;\r\n}\r\n\r\nexport function FixMachine(machineInstanceId: number): MachineInstanceActionTypes {\r\n    return {\r\n        type: \"FixMachineActionType\",\r\n        machineInstanceId\r\n    };\r\n}\r\n\r\nexport type MachineInstanceActionTypes = ChannelChangedActionType |\r\n    MachineRemovedActionType |\r\n    MachineAddedActionType |\r\n    MachineMovedActionType |\r\n    FixMachineActionType |\r\n    InputChannelChangedActionType;\r\n","import { ChannelModel } from \"../Models/ChannelModel\";\n\nexport const DragItemTypes = {\n  MachineInstance: \"MachineInstance\",\n  NewMachine: \"NewMachine\",\n  OutputChannel: \"OutputChannel\",\n  Grid: \"Grid\"\n};\n\nexport interface DraggedOutputChannel {\n  type: typeof DragItemTypes.OutputChannel;\n  channel: ChannelModel;\n  machineInstanceId: number;\n  offsetX: number;\n  offsetY: number;\n}\n\nexport interface DraggedNewMachine {\n  type: typeof DragItemTypes.NewMachine;\n  id: string;\n}\n\nexport interface MovingOutputChannel extends DraggedOutputChannel {\n  angle: number;\n}","export const FormatMessage = (content: string): string => {\n    let formattedMessage: string | undefined;\n\n    if (content === \"\") {\n        formattedMessage = \"<Empty>\";\n    } else {\n        formattedMessage = content;\n        let seekPosition = 0;\n\n        while (true) {\n            seekPosition = formattedMessage.indexOf(\"{\", seekPosition);\n            if (seekPosition === -1) {\n                break;\n            }\n\n            const lastIndex = formattedMessage.indexOf(\"}\", seekPosition);\n            formattedMessage = formattedMessage.substring(0, seekPosition) + \"?\" + formattedMessage.substring(lastIndex + 1);\n        }\n    }\n    return formattedMessage;\n};\n","import { ChannelModel } from \"../../../../../Models/ChannelModel\";\nimport React, { useEffect } from \"react\";\nimport { heightFactor, widthFactor, marginFactor } from \"./ChannelGroup\";\nimport { useDrag } from \"react-dnd\";\nimport { DragItemTypes, DraggedOutputChannel } from \"../../../../DragItemTypes\";\nimport { DirectionEnum } from \"../../../../../Models/DirectionEnum\";\nimport { getEmptyImage } from \"react-dnd-html5-backend\";\nimport { GetAngleFromMonitor } from \"../../../../../Helper/AngleHelper\";\n\nexport const ChannelClickArea: React.FC<{\n    Channel: ChannelModel,\n    MachineInstanceId: number,\n    OnClick: (channel: ChannelModel, angle?: number) => void,\n    OffsetX: number,\n    OffsetY: number,\n    CellSize: number\n}> = (props) => {\n\n    const [{ isDragging }, drag, preview] = useDrag<DraggedOutputChannel, unknown, { isDragging: boolean }>({\n        item: { type: DragItemTypes.OutputChannel, channel: props.Channel, machineInstanceId: props.MachineInstanceId, offsetX: props.OffsetX, offsetY: props.OffsetY},\n        begin: () => {\n            props.OnClick({ ...props.Channel, Status: \"DoesNotExist\" });\n        },\n        end: (dropResult, monitor) => {\n            if (!monitor.didDrop()) {\n                const outputItem = monitor.getItem() as DraggedOutputChannel;\n                const angle = GetAngleFromMonitor(monitor, props.OffsetX, props.OffsetY);\n                if (angle !== undefined) {\n                    const adjustedAngle = angle + Math.PI * 2.75;\n                    const direction = Math.floor(adjustedAngle / (Math.PI * 0.5)) % 4;\n                    props.OnClick({ Direction: direction, Channel: props.Channel.Channel, Status: outputItem.channel.Status }, angle);\n                }\n            }\n        },\n        collect: (monitor) => ({ isDragging: monitor.isDragging() })\n    });\n\n    const onClicked = () => {\n        const newDirection: DirectionEnum = props.Channel.Direction === 3 ? 0 : props.Channel.Direction + 1;\n        props.OnClick({ Direction: newDirection, Channel: props.Channel.Channel, Status: props.Channel.Status });\n    };\n\n    const channelStyle: React.CSSProperties = {\n        width: widthFactor * props.CellSize,\n        marginLeft: marginFactor * props.CellSize,\n        opacity: isDragging ? 0 : 1,\n        height: heightFactor*props.CellSize,\n        pointerEvents: \"all\"\n    };\n\n    useEffect(() => {\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    return <div ref={drag} style={channelStyle} onClick={onClicked}>\n    </div>;\n};\n","import React from \"react\";\nimport { DirectionEnum } from \"../../../../../Models/DirectionEnum\";\nimport { Props } from \"./Props\";\nimport { ChannelClickArea } from \"./ChannelClickArea\";\n\nexport const widthFactor = 0.07;\nexport const heightFactor = 0.31;\nexport const marginFactor = 0.05;\n\nexport const ChannelGroup: React.FC<Props> = (props) => {\n\n    if (props.ChannelModels.length === 0) {\n        return <></>;\n    }\n\n    const width = props.cellSize * widthFactor;\n    const height = props.cellSize * heightFactor;\n    const heightOffset = props.cellSize * 0.06;\n    const margin = props.cellSize * marginFactor;\n\n    let baseOffsetX = (props.cellSize - (props.ChannelModels.length * (width + margin) - margin)) / 2;\n    let baseOffsetY = props.cellSize / 2 - height - heightOffset;\n    let deltaX = width + margin;\n    let deltaY = 0;\n\n    const channelSetStyle: React.CSSProperties = {\n        position: \"absolute\",\n        marginLeft: baseOffsetX - margin,\n        marginTop: baseOffsetY,\n        display: \"flex\",\n        flexDirection: \"row\"\n    };\n\n    let rotate: string = \"\";\n\n    switch (props.ChannelModels[0].Direction) {\n        case DirectionEnum.Down:\n            rotate = \"rotate(180deg)\";\n            baseOffsetY = props.cellSize / 2 + heightOffset;\n            baseOffsetX = props.cellSize - baseOffsetX - width;\n            deltaX = -deltaX;\n            break;\n        case DirectionEnum.Left:\n            rotate = \"rotate(270deg)\";\n            const tempBaseOffsetX = baseOffsetY;\n            baseOffsetY = props.cellSize - baseOffsetX - width;\n            baseOffsetX = tempBaseOffsetX;\n            deltaY = -deltaX;\n            deltaX = 0;\n            break;\n        case DirectionEnum.Right:\n            rotate = \"rotate(90deg)\";\n            baseOffsetY = baseOffsetX;\n            baseOffsetX = props.cellSize / 2 + heightOffset;\n            deltaY = deltaX;\n            deltaX = 0;\n            break;\n    }\n\n    const rotation: React.CSSProperties = {\n        transform: rotate,\n        height: props.cellSize,\n        width: props.cellSize,\n        position: \"absolute\",\n        pointerEvents: \"none\"\n    };\n\n    return (\n        <div style={rotation}>\n            <div style={channelSetStyle}>\n                {props.ChannelModels.map((cm, index) => <ChannelClickArea key={index} Channel={cm} OnClick={props.OnChanged} MachineInstanceId={props.MachineInstanceId} OffsetX={baseOffsetX + deltaX * index} OffsetY={baseOffsetY + deltaY * index} CellSize={props.cellSize} />)}\n            </div>\n        </div>\n    );\n}\n","import { DrawModel } from \"./DrawModel\";\nimport { DirectionEnum } from \"../../../../../Models/DirectionEnum\";\nimport { InputChannelModel } from \"./InputChannelModel\";\nimport { ChannelModel } from \"../../../../../Models/ChannelModel\";\nimport { DraggedOutputModel } from \"./DraggedOutputModel\";\nimport { GetAngleFromDirection } from \"../../../../../Helper/AngleHelper\";\nimport { DrawConstants } from \"./DrawConstants\";\n\nexport abstract class MachineDrawer {\n    protected ctx: CanvasRenderingContext2D;\n    protected innerColor: string;\n    protected borderColor: string;\n    protected inputChannels: InputChannelModel[];\n    protected outputChannels: ChannelModel[][];\n    protected draggedOutput: DraggedOutputModel | undefined;\n    protected draggedDirection: DirectionEnum | undefined;\n    protected backgroundColor: string;\n    public drawConstants: DrawConstants;\n\n    constructor(ctx: CanvasRenderingContext2D, props: DrawModel) {\n        this.ctx = ctx;\n        this.innerColor = props.MachineStyle.Color;\n        this.borderColor = props.MachineStyle.BorderColor;\n        this.inputChannels = props.InputChannels.sort((ic, id) => ic.Direction > id.Direction ? 1 : -1);\n        this.outputChannels = props.OutputChannels;\n        this.draggedOutput = props.MovingOutput;\n        this.backgroundColor = props.BackgroundColor;\n        this.drawConstants = new DrawConstants(props.CellSize);\n        if (this.draggedOutput !== undefined) {\n            if (this.draggedOutput !== undefined) {\n                const adjustedAngle = this.draggedOutput.angle + Math.PI * 2.75;\n                this.draggedDirection = Math.floor(adjustedAngle / (Math.PI * 0.5)) % 4;\n            }\n        }\n    }\n\n    public DrawMachine() {\n\n        this.DrawBody();\n\n        for (const input of this.inputChannels) {\n            this.DrawInputGradient(input);\n        }\n\n        for (const outputGroup of this.outputChannels) {\n            this.DrawOutputGroup(outputGroup, true);\n        }\n\n        if (this.draggedOutput !== undefined) {\n            this.DraggedOutputDrawer(true);\n        }\n\n        if (this.inputChannels.length === 0) {\n            this.DrawNoInputOutline();\n        } else {\n            let startIndex = 0;\n            let endIndex = 0;\n            do {\n                endIndex = (endIndex + 1) % this.inputChannels.length;\n                this.DrawInputOutline(this.inputChannels[startIndex].Direction, this.inputChannels[endIndex].Direction);\n                startIndex++;\n            } while (startIndex < this.inputChannels.length);\n        }\n\n        for (const outputGroup of this.outputChannels) {\n            this.DrawOutputGroup(outputGroup, false);\n        }\n\n        if (this.draggedOutput !== undefined) {\n            this.DraggedOutputDrawer(false);\n        }\n    }\n    protected abstract DrawInputOutline(startDirection: DirectionEnum, endDirection: DirectionEnum): void;\n    protected abstract DrawBody(): void;\n    protected abstract DrawNoInputOutline(): void;\n    protected abstract DrawInputGradient(input: InputChannelModel): void;\n\n    protected SetShadowStyle() {\n        this.ctx.shadowColor = \"black\";\n        this.ctx.shadowOffsetX = this.drawConstants.shadeOffset;\n        this.ctx.shadowOffsetY = this.drawConstants.shadeOffset;\n    }\n\n    protected ClearShadowStyle() {\n        this.ctx.shadowColor = \"transparent\";\n        this.ctx.shadowOffsetX = 0;\n        this.ctx.shadowOffsetY = 0;\n    }\n    private DrawOutputGroup(outputs: ChannelModel[], isShade: boolean) {\n\n        this.ClearShadowStyle();\n\n        const baseAngle = GetAngleFromDirection(outputs[0].Direction) + Math.PI;\n        const filteredOutputs = outputs.filter((c) => c.Status !== \"DoesNotExist\");\n        let split = -(filteredOutputs.length - 1) / 2 * this.drawConstants.outputSplit;\n\n        if (this.draggedDirection === outputs[0].Direction) {\n            let increasedSplit = -(filteredOutputs.length) / 2 * this.drawConstants.outputSplit;\n            let draggedIsDrawn = false;\n            const draggedSplit = Math.sin(this.draggedOutput!.angle - baseAngle) * this.drawConstants.outputStartLength;\n            for (let index = 0; index < filteredOutputs.length; index++) {\n                if (!draggedIsDrawn && draggedSplit < split) {\n                    draggedIsDrawn = true;\n                    increasedSplit += this.drawConstants.outputSplit;\n                }\n\n                if (isShade) {\n                    this.DrawOutputChannel(\"black\", baseAngle, increasedSplit, this.drawConstants.shadeOffset * 2);\n                } else {\n                    this.DrawOutputChannel(\"black\", baseAngle, increasedSplit, this.drawConstants.shadeOffset);\n                    this.DrawOutputChannel(filteredOutputs[index].Channel, baseAngle, increasedSplit);\n                }\n\n                split += this.drawConstants.outputSplit;\n                increasedSplit += this.drawConstants.outputSplit;\n            }\n        } else {\n            for (const output of filteredOutputs) {\n                if (isShade) {\n                    this.DrawOutputChannel(\"black\", baseAngle, split, this.drawConstants.shadeOffset * 2);\n                } else {\n                    this.DrawOutputChannel(\"black\", baseAngle, split, this.drawConstants.shadeOffset);\n                    this.DrawOutputChannel(output.Channel, baseAngle, split);\n                }\n\n                split += this.drawConstants.outputSplit;\n            }\n        }\n    }\n\n    private DraggedOutputDrawer(isShade: boolean) {\n        this.ClearShadowStyle();\n        if (isShade) {\n            this.DrawDraggedOutput(\"black\", this.drawConstants.shadeOffset * 2);\n        } else {\n            this.DrawDraggedOutput(\"black\", this.drawConstants.shadeOffset);\n            this.DrawDraggedOutput(this.draggedOutput!.channel.Channel, 0);\n        }\n    }\n\n    private DrawDraggedOutput(color: string, offset: number) {\n        const adjustedAngle = this.draggedOutput!.angle! + Math.PI * 0.25;\n        const direction = Math.floor(adjustedAngle / (Math.PI * 0.5)) * Math.PI * 0.5;\n\n        const firstX = this.drawConstants.center + this.drawConstants.outputStartLength * Math.cos(this.draggedOutput!.angle!) + offset;\n        const firstY = this.drawConstants.center + this.drawConstants.outputStartLength * Math.sin(this.draggedOutput!.angle!) + offset;\n        const endX = firstX + (this.drawConstants.outputLength - this.drawConstants.outputStartLength) * Math.cos(direction);\n        const endY = firstY + (this.drawConstants.outputLength - this.drawConstants.outputStartLength) * Math.sin(direction);\n\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.drawConstants.center, this.drawConstants.center);\n\n        const gradient = this.ctx.createRadialGradient(this.drawConstants.center, this.drawConstants.center, 0, this.drawConstants.center, this.drawConstants.center, this.drawConstants.outputLength);\n        gradient.addColorStop(0, this.innerColor);\n        gradient.addColorStop(0.6, color);\n\n        this.ctx.arcTo(firstX, firstY, endX, endY, this.drawConstants.outputRadius);\n        this.ctx.lineTo(endX, endY);\n        this.ctx.strokeStyle = gradient;\n        this.ctx.lineWidth = this.drawConstants.outputWidth;\n\n        this.ctx.stroke();\n    }\n\n    private DrawOutputChannel(color: string, mainAngle: number, outputOffset: number, offset = 0) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.drawConstants.center, this.drawConstants.center);\n        const differenceAngle = Math.asin(outputOffset / this.drawConstants.outputStartLength);\n\n        const firstX = this.drawConstants.center + this.drawConstants.outputStartLength * Math.cos(mainAngle + differenceAngle) + offset;\n        const firstY = this.drawConstants.center + this.drawConstants.outputStartLength * Math.sin(mainAngle + differenceAngle) + offset;\n        const endX = firstX + (this.drawConstants.outputLength - this.drawConstants.outputStartLength) * Math.cos(mainAngle);\n        const endY = firstY + (this.drawConstants.outputLength - this.drawConstants.outputStartLength) * Math.sin(mainAngle);\n\n        const gradient = this.ctx.createRadialGradient(this.drawConstants.center, this.drawConstants.center, 0, this.drawConstants.center, this.drawConstants.center, this.drawConstants.outputLength)\n        gradient.addColorStop(0, this.innerColor);\n        gradient.addColorStop(0.6, color);\n\n        this.ctx.arcTo(firstX, firstY, endX, endY, this.drawConstants.outputRadius);\n        this.ctx.lineTo(endX, endY);\n        this.ctx.strokeStyle = gradient;\n        this.ctx.lineWidth = this.drawConstants.outputWidth;\n\n        this.ctx.stroke();\n    }\n}","import { DirectionEnum } from \"../../../../../Models/DirectionEnum\";\nimport { InputChannelModel } from \"./InputChannelModel\";\nimport { MachineDrawer } from \"./MachineDrawer\";\nimport { GetAngleFromDirection } from \"../../../../../Helper/AngleHelper\";\n\nexport class MachineCircleDrawer extends MachineDrawer {\n    protected DrawBody() {\n        this.ctx.beginPath();\n        this.ClearShadowStyle();\n        this.ctx.moveTo(this.drawConstants.center + this.drawConstants.circleRadius, this.drawConstants.center);\n        this.ctx.arc(this.drawConstants.center, this.drawConstants.center, this.drawConstants.circleRadius, 0, Math.PI * 2);\n        this.ctx.fillStyle = this.innerColor;\n        this.ctx.fill();\n    }\n    \n    protected DrawInputOutline(startDirection: DirectionEnum, endDirection: DirectionEnum): void {\n        const localcenter = this.drawConstants.center;\n        const startDirectionAngle = GetAngleFromDirection(startDirection);\n        const startAngle = startDirectionAngle + this.drawConstants.apertureAngle;\n\n        const startInnerX = localcenter + this.drawConstants.circleRadius * Math.cos(startAngle);\n        const startInnerY = localcenter + this.drawConstants.circleRadius * Math.sin(startAngle);\n        const startOuterX = startInnerX + this.drawConstants.armLength * Math.cos(startDirectionAngle + this.drawConstants.armAngle);\n        const startOuterY = startInnerY + this.drawConstants.armLength * Math.sin(startDirectionAngle + this.drawConstants.armAngle);\n\n        const endDirectionAngle = GetAngleFromDirection(endDirection);\n        const endAngle = endDirectionAngle - this.drawConstants.apertureAngle;\n        const endInnerX = localcenter + this.drawConstants.circleRadius * Math.cos(endAngle);\n        const endInnerY = localcenter + this.drawConstants.circleRadius * Math.sin(endAngle);\n\n        const endOuterX = endInnerX + this.drawConstants.armLength * Math.cos(endDirectionAngle - this.drawConstants.armAngle);\n        const endOuterY = endInnerY + this.drawConstants.armLength * Math.sin(endDirectionAngle - this.drawConstants.armAngle);\n\n        this.ctx.beginPath();\n        this.ctx.moveTo(startOuterX, startOuterY);\n        this.ctx.lineTo(startInnerX, startInnerY);\n        this.ctx.arc(localcenter, localcenter, this.drawConstants.circleRadius, startAngle, endAngle);\n        this.ctx.lineTo(endOuterX, endOuterY);\n\n        this.ctx.strokeStyle = this.borderColor;\n        this.ctx.lineWidth = this.drawConstants.borderWidth;\n        this.SetShadowStyle();\n        this.ctx.stroke();\n\n    }\n\n    protected DrawNoInputOutline(): void {\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.drawConstants.center + this.drawConstants.circleRadius, this.drawConstants.center);\n        this.ctx.arc(this.drawConstants.center, this.drawConstants.center, this.drawConstants.circleRadius, 0, Math.PI * 2);\n\n        this.ctx.strokeStyle = this.borderColor;\n        this.SetShadowStyle();\n        this.ctx.lineWidth = this.drawConstants.borderWidth;\n\n        this.ctx.stroke();\n    }\n    protected DrawInputGradient(input: InputChannelModel): void {\n\n        const directionAngle = GetAngleFromDirection(input.Direction);\n        const endAngle = directionAngle - this.drawConstants.apertureAngle;\n\n        const endInnerX = this.drawConstants.center + this.drawConstants.circleRadius * Math.cos(endAngle);\n        const endInnerY = this.drawConstants.center + this.drawConstants.circleRadius * Math.sin(endAngle);\n\n        const endOuterX = endInnerX + this.drawConstants.armLength * Math.cos(directionAngle - this.drawConstants.armAngle);\n        const endOuterY = endInnerY + this.drawConstants.armLength * Math.sin(directionAngle - this.drawConstants.armAngle);\n\n        const startAngle = directionAngle + this.drawConstants.apertureAngle;\n\n        const startInnerX = this.drawConstants.center + this.drawConstants.circleRadius * Math.cos(startAngle);\n        const startInnerY = this.drawConstants.center + this.drawConstants.circleRadius * Math.sin(startAngle);\n\n        const startOuterX = startInnerX + this.drawConstants.armLength * Math.cos(directionAngle + this.drawConstants.armAngle);\n        const startOuterY = startInnerY + this.drawConstants.armLength * Math.sin(directionAngle + this.drawConstants.armAngle);\n\n        this.ctx.beginPath();\n\n        this.ClearShadowStyle();\n        this.ctx.moveTo(endInnerX, endInnerY);\n        const endOuterAngle = Math.atan2(endOuterY - this.drawConstants.center, endOuterX - this.drawConstants.center);\n        const startOuterAngle = Math.atan2(startOuterY - this.drawConstants.center, startOuterX - this.drawConstants.center);\n\n        this.ctx.arc(this.drawConstants.center, this.drawConstants.center, this.drawConstants.circleRadius + this.drawConstants.protrudingArm, endOuterAngle, startOuterAngle);\n        this.ctx.arc(this.drawConstants.center, this.drawConstants.center, this.drawConstants.circleRadius - this.drawConstants.borderWidth * 0.5, startAngle, endAngle, true);\n\n        const grd = this.ctx.createRadialGradient(this.drawConstants.center, this.drawConstants.center, this.drawConstants.circleRadius, this.drawConstants.center, this.drawConstants.center, this.drawConstants.circleRadius + this.drawConstants.protrudingArm);\n\n        if (input.UseMachineColor) {\n            grd.addColorStop(0, this.innerColor);\n        } else {\n            grd.addColorStop(0, input.Channel);\n            grd.addColorStop(0.7, input.Channel);\n            grd.addColorStop(0.8, this.backgroundColor);\n        }\n        grd.addColorStop(1, this.backgroundColor);\n        this.ctx.fillStyle = grd;\n        this.ctx.fill();\n    }\n}","import { DirectionEnum } from \"../../../../../Models/DirectionEnum\";\nimport { DrawModel } from \"./DrawModel\";\nimport { InputChannelModel } from \"./InputChannelModel\";\nimport { MachineDrawer } from \"./MachineDrawer\";\n\n\n\nexport class MachineSquareDrawer extends MachineDrawer {\n    private closeSide: number;\n    private farSide : number;\n    private innerClose : number;\n    private innerFar : number;\n    private armProtrudingClose : number;\n    private armProtrudingFar: number;\n    private armWidthClose : number;\n    private armWidthFar: number;\n\n    constructor(ctx: CanvasRenderingContext2D, props: DrawModel) {\n        super(ctx, props);\n        this.closeSide = this.drawConstants.center - this.drawConstants.halfSquareSize;\n        this.farSide = this.drawConstants.center + this.drawConstants.halfSquareSize;\n        this.innerClose = this.drawConstants.center - 0.5 * this.drawConstants.aperture;\n        this.innerFar = this.drawConstants.center + 0.5 * this.drawConstants.aperture;\n        this.armProtrudingClose = this.closeSide - Math.cos(this.drawConstants.armAngle) * this.drawConstants.armLength;\n        this.armProtrudingFar = this.farSide + Math.cos(this.drawConstants.armAngle) * this.drawConstants.armLength;\n        this.armWidthClose = this.innerClose - Math.sin(this.drawConstants.armAngle) * this.drawConstants.armLength;\n        this.armWidthFar = this.innerFar + Math.sin(this.drawConstants.armAngle) * this.drawConstants.armLength;\n    }\n    protected DrawBody() {\n        this.ctx.beginPath();\n        this.ClearShadowStyle();\n        this.ctx.moveTo(this.drawConstants.center + this.drawConstants.circleRadius, this.drawConstants.center);\n        this.ctx.rect(this.drawConstants.center - this.drawConstants.halfSquareSize, this.drawConstants.center - this.drawConstants.halfSquareSize, this.drawConstants.halfSquareSize * 2, this.drawConstants.halfSquareSize * 2);\n        this.ctx.fillStyle = this.innerColor;\n        this.ctx.fill();\n        this.ctx.beginPath();\n    }\n    protected DrawInputOutline(startDirection: DirectionEnum, endDirection: DirectionEnum): void {\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = this.borderColor;\n        this.SetShadowStyle();\n        this.ctx.lineWidth = this.drawConstants.borderWidth;\n\n        switch (startDirection) {\n            case DirectionEnum.Down:\n                this.ctx.moveTo(this.armWidthFar, this.armProtrudingClose);\n                this.ctx.lineTo(this.innerFar, this.closeSide);\n                break;\n            case DirectionEnum.Left:\n                this.ctx.moveTo(this.armProtrudingFar, this.armWidthFar);\n                this.ctx.lineTo(this.farSide, this.innerFar);\n                break;\n            case DirectionEnum.Up:\n                this.ctx.moveTo(this.armWidthClose, this.armProtrudingFar);\n                this.ctx.lineTo(this.innerClose, this.farSide);\n                break;\n            case DirectionEnum.Right:\n                this.ctx.moveTo(this.armProtrudingClose, this.armWidthClose);\n                this.ctx.lineTo(this.closeSide, this.innerClose);\n                break;\n            default:\n                throw Error(\"Unknown direction\");\n        }\n\n        let currentDirection = startDirection;\n\n        do {\n            switch (currentDirection) {\n                case DirectionEnum.Down:\n                    this.ctx.lineTo(this.farSide, this.closeSide);\n                    break;\n                case DirectionEnum.Left:\n                    this.ctx.lineTo(this.farSide, this.farSide);\n                    break;\n                case DirectionEnum.Up:\n                    this.ctx.lineTo(this.closeSide, this.farSide);\n                    break;\n                case DirectionEnum.Right:\n                    this.ctx.lineTo(this.closeSide, this.closeSide);\n                    break;\n                default:\n                    throw Error(\"Unknown direction\");\n            }\n\n            currentDirection = (currentDirection + 1) % 4;\n        } while (currentDirection !== endDirection);\n\n        switch (endDirection) {\n            case DirectionEnum.Down:\n                this.ctx.lineTo(this.innerClose, this.closeSide);\n                this.ctx.lineTo(this.armWidthClose, this.armProtrudingClose);\n                break;\n            case DirectionEnum.Left:\n                this.ctx.lineTo(this.farSide, this.innerClose);\n                this.ctx.lineTo(this.armProtrudingFar, this.armWidthClose);\n                break;\n            case DirectionEnum.Up:\n                this.ctx.lineTo(this.innerFar, this.farSide);\n                this.ctx.lineTo(this.armWidthFar, this.armProtrudingFar);\n                break;\n            case DirectionEnum.Right:\n                this.ctx.lineTo(this.closeSide, this.innerFar);\n                this.ctx.lineTo(this.armProtrudingClose, this.armWidthFar);\n                break;\n            default:\n                throw Error(\"Unknown direction\");\n        }\n\n        this.ctx.stroke();\n    }\n\n    protected DrawNoInputOutline(): void {\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.drawConstants.center + this.drawConstants.circleRadius, this.drawConstants.center);\n        this.ctx.rect(this.drawConstants.center - this.drawConstants.halfSquareSize, this.drawConstants.center - this.drawConstants.halfSquareSize, this.drawConstants.halfSquareSize * 2, this.drawConstants.halfSquareSize * 2);\n        this.ctx.strokeStyle = this.borderColor;\n        this.SetShadowStyle();\n        this.ctx.lineWidth = this.drawConstants.borderWidth;\n\n        this.ctx.stroke();\n    }\n    protected DrawInputGradient(input: InputChannelModel): void {\n        this.ctx.beginPath();\n        this.ClearShadowStyle();\n        let grd: CanvasGradient;\n        switch (input.Direction) {\n            case DirectionEnum.Down:\n                this.ctx.moveTo(this.innerClose, this.closeSide + 0.4 * this.drawConstants.borderWidth);\n                this.ctx.lineTo(this.armWidthClose, this.armProtrudingClose);\n                this.ctx.lineTo(this.armWidthFar, this.armProtrudingClose);\n                this.ctx.lineTo(this.innerFar, this.closeSide + 0.4 * this.drawConstants.borderWidth);\n                this.ctx.lineTo(this.innerClose, this.closeSide + 0.4 * this.drawConstants.borderWidth);\n                grd = this.ctx.createLinearGradient(this.drawConstants.center, this.closeSide + 0.4 * this.drawConstants.borderWidth, this.drawConstants.center, this.armProtrudingClose);\n                break;\n            case DirectionEnum.Left:\n                this.ctx.moveTo(this.farSide - 0.4 * this.drawConstants.borderWidth, this.innerClose);\n                this.ctx.lineTo(this.armProtrudingFar, this.armWidthClose);\n                this.ctx.lineTo(this.armProtrudingFar, this.armWidthFar);\n                this.ctx.lineTo(this.farSide - 0.4 * this.drawConstants.borderWidth, this.innerFar);\n                this.ctx.lineTo(this.farSide - 0.4 * this.drawConstants.borderWidth, this.innerClose);\n                grd = this.ctx.createLinearGradient(this.farSide - 0.4 * this.drawConstants.borderWidth, this.drawConstants.center, this.armProtrudingFar, this.drawConstants.center);\n                break;\n            case DirectionEnum.Up:\n                this.ctx.moveTo(this.innerFar, this.farSide - 0.4 * this.drawConstants.borderWidth);\n                this.ctx.lineTo(this.armWidthFar, this.armProtrudingFar);\n                this.ctx.lineTo(this.armWidthClose, this.armProtrudingFar);\n                this.ctx.lineTo(this.innerClose, this.farSide - 0.4 * this.drawConstants.borderWidth);\n                this.ctx.lineTo(this.innerFar, this.farSide - 0.4 * this.drawConstants.borderWidth);\n                grd = this.ctx.createLinearGradient(this.drawConstants.center, this.farSide - 0.4 * this.drawConstants.borderWidth, this.drawConstants.center, this.armProtrudingFar);\n                break;\n            case DirectionEnum.Right:\n                this.ctx.moveTo(this.closeSide + 0.4 * this.drawConstants.borderWidth, this.innerFar);\n                this.ctx.lineTo(this.armProtrudingClose, this.armWidthFar);\n                this.ctx.lineTo(this.armProtrudingClose, this.armWidthClose);\n                this.ctx.lineTo(this.closeSide + 0.4 * this.drawConstants.borderWidth, this.innerClose);\n                this.ctx.lineTo(this.closeSide + 0.4 * this.drawConstants.borderWidth, this.innerFar);\n                grd = this.ctx.createLinearGradient(this.closeSide + 0.4 * this.drawConstants.borderWidth, this.drawConstants.center, this.armProtrudingClose, this.drawConstants.center);\n                break;\n            default:\n                throw Error(\"Unknown direction\");\n        }\n\n        if (input.UseMachineColor) {\n            grd.addColorStop(0, this.innerColor);\n        } else {\n            grd.addColorStop(0, input.Channel);\n            grd.addColorStop(0.9, input.Channel);\n            grd.addColorStop(0.9, this.backgroundColor);\n        }\n        grd.addColorStop(1, this.backgroundColor);\n        this.ctx.fillStyle = grd;\n        this.ctx.fill();\n    }\n}","import React, { useRef, useEffect } from \"react\";\nimport { DrawModel } from \"./DrawModel\";\nimport { MachineCircleDrawer } from \"./MachineCircleDrawer\";\nimport { MachineDrawer } from \"./MachineDrawer\";\nimport { MachineSquareDrawer } from \"./MachineSquareDrawer\";\n\nexport const MachineCanvasHolder: React.FC<DrawModel> = (props) => {\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n\n    useEffect(() => {\n        if (canvasRef.current) {\n            const ctx = canvasRef.current.getContext(\"2d\")!;\n            ctx.clearRect(0, 0, props.CellSize, props.CellSize);\n            let drawer: MachineDrawer;\n            if (props.IsDefault) {\n                drawer = new MachineCircleDrawer(ctx, props);\n            } else {\n                drawer = new MachineSquareDrawer(ctx, props);\n            }\n\n            drawer.DrawMachine();\n        }\n    });\n\n    return <div style={{\n        height: props.CellSize,\n        width: props.CellSize,\n        position: \"absolute\"\n    }}>\n        <canvas ref={canvasRef} style={{ position: \"absolute\" }} height={props.CellSize} width={props.CellSize}></canvas>\n    </div>;\n};","import React from \"react\";\nimport { DirectionEnum } from \"../../../../../Models/DirectionEnum\";\nimport { Props } from \"./Props\";\n\nexport class InputChannelClickArea extends React.Component<Props> {\n\n    constructor(props: Props) {\n        super(props);\n        this.onClicked = this.onClicked.bind(this);\n    }\n    public render() {\n\n        const cellSize = this.props.cellSize - 2;\n\n        const channelStyle: React.CSSProperties = {\n            position: \"absolute\",\n            height: cellSize * 0.20,\n            width: cellSize * 0.4,\n            marginLeft: cellSize * 0.3,\n            marginTop: cellSize * 0.05,\n            pointerEvents: \"all\",\n        };\n\n        let rotate: string = \"\";\n        switch (this.props.Direction) {\n            case DirectionEnum.Left:\n                rotate = \"rotate(90deg)\";\n                break;\n            case DirectionEnum.Up:\n                rotate = \"rotate(180deg)\";\n                break;\n            case DirectionEnum.Right:\n                rotate = \"rotate(270deg)\";\n                break;\n        }\n\n        const rotation: React.CSSProperties = {\n            transform: rotate,\n            height: cellSize,\n            width: cellSize,\n            position: \"absolute\",\n            pointerEvents: \"none\"\n        };\n\n        return (\n            <div style={rotation}>\n                <div style={channelStyle} onClick={this.onClicked}></div>\n            </div>\n        );\n    }\n\n    public onClicked(event: React.MouseEvent<HTMLDivElement, MouseEvent>): void {\n        this.props.OnClick(this.props.Direction);\n    }\n}","import React, { Dispatch } from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { connect } from \"react-redux\";\r\nimport { MachineStore } from \"../../../../MachineStore/MachineStore\";\r\nimport { ChannelModel } from \"../../../../Models/ChannelModel\";\r\nimport { ChangeChannel, MachineInstanceActionTypes, FixMachine, ChangeInputChannel } from \"../../../../Redux/GameDataReducer/PlayerReducer/GridSetup/MachineInstances/Actions\";\r\nimport { DragItemTypes } from \"../../../DragItemTypes\";\r\nimport { ChannelGroup } from \"./ChannelClickArea/ChannelGroup\";\r\nimport { Props } from \"./Props\";\r\nimport { GetLighterColor } from \"../../../../Helper/ColorHelper\";\r\nimport { MachineCanvasHolder } from \"./MachineDrawer/MachineCanvasHolder\";\r\nimport { DirectionEnum } from \"../../../../Models/DirectionEnum\";\r\nimport { InputChannelModel } from \"./MachineDrawer/InputChannelModel\";\r\nimport { InputChannelClickArea } from \"./InputChannelClickArea/InputChannelClickArea\";\r\nimport * as dc from \"./MachineDrawer/DrawConstants\";\r\nimport { IsDefaultMachine } from \"../../../../MachineStore/IMachine\";\r\nimport { GameData } from \"../../../../Redux/GameDataReducer/GameModel\";\r\nimport { GetActiveMachine, GetActivePlayer } from \"../../../../Helper/StoreHelper\";\r\n\r\nconst MachineInstanceInternal: React.FC<Props> = (props) => {\r\n    const [{ isDragging }, drag, preview] = useDrag({\r\n        item: { type: DragItemTypes.MachineInstance, id: props.MachineInstanceId },\r\n        collect: (monitor) => ({\r\n            isDragging: !!monitor.isDragging(),\r\n        }),\r\n    });\r\n\r\n    const OnClick = () => {\r\n        if (props.MachineInstance.Status !== \"Valid\") {\r\n            props.FixMachine();\r\n        }\r\n    };\r\n\r\n    const api = MachineStore.GetStore().GetMachineType(props.MachineInstance.MachineId).Api;\r\n    const onInputChannelClick = (direction: DirectionEnum) => {\r\n\r\n        const channelIndex = props.MachineInstance.InputChannels.findIndex((ic) => ic.Direction === direction)!;\r\n        const channel = props.MachineInstance.InputChannels[channelIndex];\r\n        const currentIndex = api.InputChannels.indexOf(channel.Channel);\r\n        const newChannel: ChannelModel = {\r\n            Channel: currentIndex === api.InputChannels.length - 1 ? api.InputChannels[0] : api.InputChannels[currentIndex + 1],\r\n            Direction: channel.Direction,\r\n            Status: channel.Status\r\n        };\r\n\r\n        props.ChangeInputChannel(channelIndex, newChannel);\r\n    };\r\n\r\n    const machineStyle = props.MachineStyle ?? MachineStore.GetStore().GetMachineType(props.MachineInstance.MachineId).Style;\r\n\r\n    const hasMultipleInputs = api.InputChannels.length > 1 || props.MachineInstance.InputChannels.some((ic) => ic.Status === \"Exists\" && ic.Channel !== api.InputChannels[0]);\r\n\r\n    const inputChannels: InputChannelModel[] = props.MachineInstance.InputChannels.filter((ic) => ic.Status !== \"DoesNotExist\").map((c) =>\r\n    ({\r\n        UseMachineColor: !hasMultipleInputs,\r\n        ...c\r\n    })\r\n    );\r\n\r\n    const machineSize: React.CSSProperties = { height: props.CellSize, width: props.CellSize, margin: 1 };\r\n\r\n    switch (props.MachineInstance.Status) {\r\n        case \"Deleted\":\r\n            machineSize.borderBottom = props.CellSize / 18 + \"px dotted red\";\r\n            machineSize.boxSizing = \"border-box\";\r\n            machineSize.opacity = 0.4;\r\n            break;\r\n        case \"ChannelsInvalid\":\r\n            machineSize.borderBottom = props.CellSize / 18 + \"px dotted orange\";\r\n            machineSize.boxSizing = \"border-box\";\r\n            break;\r\n    }\r\n\r\n    const outputChannels: ChannelModel[][] = [];\r\n    for (const channel of props.MachineInstance.OutputChannels) {\r\n        const group = outputChannels.find((o) => o[0].Direction === channel.Direction);\r\n        if (group === undefined) {\r\n            outputChannels.push([channel]);\r\n        } else {\r\n            group.push(channel);\r\n        }\r\n    }\r\n\r\n    const machineMargin = props.CellSize * 0.5 - dc.halfSquareFactor * props.CellSize;\r\n\r\n    return (\r\n        <div ref={preview} style={machineSize}>\r\n            {!isDragging && <MachineCanvasHolder\r\n                MachineStyle={machineStyle}\r\n                IsDefault={IsDefaultMachine(props.MachineInstance.MachineId)}\r\n                BackgroundColor={props.BackgroundColor}\r\n                InputChannels={inputChannels}\r\n                OutputChannels={outputChannels}\r\n                MovingOutput={props.MovingOutput !== undefined ? props.MovingOutput : undefined}\r\n                CellSize={props.CellSize}\r\n            />}\r\n            <div style={{ position: \"absolute\", marginLeft: machineMargin, marginTop: machineMargin, height: dc.halfSquareFactor * props.CellSize * 2, width: dc.halfSquareFactor * props.CellSize * 2 }} ref={drag} onClick={OnClick}></div>\r\n            {inputChannels.filter((ic) => !ic.UseMachineColor).map((ic, index) => <InputChannelClickArea key={index} Direction={ic.Direction} OnClick={onInputChannelClick} cellSize={props.CellSize} />)}\r\n            {outputChannels.map((oc, index) => <ChannelGroup key={index} ChannelModels={oc} OnChanged={props.ChangeOwnChannel} MachineInstanceId={props.MachineInstanceId} cellSize={props.CellSize}/>)}\r\n        </div >\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData, ownProps: { MachineInstanceId: number }) => {\r\n    const activeMachine = GetActiveMachine(state);\r\n\r\n    const background = GetLighterColor(activeMachine!.Style.Color, 0.3);\r\n    const MachineInstanceProp = activeMachine!.Setup.MachineInstances.find((mi) => mi.Id === ownProps.MachineInstanceId)!;\r\n    const machineStyle = IsDefaultMachine(MachineInstanceProp.MachineId) ? undefined\r\n        : MachineInstanceProp.Status === \"Deleted\" ? GetActivePlayer(state)!.deletedMachines.find((dm) => dm.Id === MachineInstanceProp.MachineId)!.Style\r\n            : GetActivePlayer(state)!.machines.find((m) => m.Id === MachineInstanceProp.MachineId)!.Style;\r\n    const MovingOutput = state.movingOutput?.machineInstanceId === ownProps.MachineInstanceId ? state.movingOutput : undefined;\r\n\r\n    return {\r\n        MachineInstance: MachineInstanceProp,\r\n        MachineStyle: machineStyle,\r\n        BackgroundColor: background,\r\n        MovingOutput\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<MachineInstanceActionTypes>, ownProps: { MachineInstanceId: number }) => {\r\n\r\n    return {\r\n        ChangeOwnChannel: (channel: ChannelModel, angle?: number) => dispatch(ChangeChannel(ownProps.MachineInstanceId, channel, angle)),\r\n        ChangeChannel: (machineInstanceId: number, channel: ChannelModel, angle?: number) => dispatch(ChangeChannel(machineInstanceId, channel, angle)),\r\n        ChangeInputChannel: (index: number, channel: ChannelModel) => dispatch(ChangeInputChannel(ownProps.MachineInstanceId, index, channel)),\r\n        FixMachine: () => dispatch(FixMachine(ownProps.MachineInstanceId))\r\n    };\r\n};\r\n\r\nexport const MachineInstance = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MachineInstanceInternal);\r\n","import React from \"react\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { connect } from \"react-redux\";\r\nimport { AreEqual, CellModel } from \"../../../Models/CellModel\";\r\nimport { DirectionEnum } from \"../../../Models/DirectionEnum\";\r\nimport { AddMachine, MoveMachine, ChangeChannel } from \"../../../Redux/GameDataReducer/PlayerReducer/GridSetup/MachineInstances/Actions\";\r\nimport { DragItemTypes, DraggedOutputChannel } from \"../../DragItemTypes\";\r\nimport { FormatMessage } from \"../../MessageFormatter\";\r\nimport { MachineInstance } from \"./MachineInstance/MachineInstance\";\r\nimport { Props } from \"./Props\";\r\nimport { MachineStore } from \"../../../MachineStore/MachineStore\";\r\nimport { GetAngleFromMonitor } from \"../../../Helper/AngleHelper\";\r\nimport { GameData } from \"../../../Redux/GameDataReducer/GameModel\";\r\nimport { GetActiveMachine, GetActivePlayer } from \"../../../Helper/StoreHelper\";\r\n\r\nconst CellInternal: React.FC<Props> = (props) => {\r\n\r\n    const [, drop] = useDrop({\r\n        accept: [DragItemTypes.MachineInstance, DragItemTypes.NewMachine, DragItemTypes.OutputChannel],\r\n        drop: (item, monitor) => {\r\n            switch (item.type) {\r\n                case DragItemTypes.MachineInstance:\r\n                    props.OnMovedMachine(monitor.getItem().id, props.cellId);\r\n                    break;\r\n                case DragItemTypes.NewMachine:\r\n                    const itemProps = monitor.getItem() as { id: string };\r\n                    const machineType = MachineStore.GetStore().GetMachineType(itemProps.id);\r\n                    props.OnNewMachine(itemProps.id, machineType.Api, props.cellId);\r\n                    break;\r\n                case DragItemTypes.OutputChannel:\r\n                    const outputItem = monitor.getItem() as DraggedOutputChannel;\r\n                    const angle = GetAngleFromMonitor(monitor, outputItem.offsetX, outputItem.offsetY);\r\n                    if (angle !== undefined) {\r\n                        const adjustedAngle = angle + Math.PI * 2.75;\r\n                        const direction = Math.floor(adjustedAngle / (Math.PI * 0.5)) % 4;\r\n                        props.ChangeChannel(outputItem.machineInstanceId, { Direction: direction, Channel: outputItem.channel.Channel, Status: outputItem.channel.Status }, angle);\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n    });\r\n\r\n    const style: React.CSSProperties = {\r\n        height: props.smallHeigth ? props.CellSize * 0.625 : props.CellSize,\r\n        width: props.smallWidth ? props.CellSize * 0.625 : props.CellSize,\r\n        border: \"1px solid black\",\r\n        float: \"left\",\r\n        marginTop: -1,\r\n        marginLeft: -1,\r\n        position: \"relative\"\r\n    };\r\n\r\n    const ExitThickness = props.CellSize * 0.2;\r\n\r\n    if (props.Exit !== undefined) {\r\n        switch (props.Exit) {\r\n            case DirectionEnum.Up:\r\n                style.borderRight = \"1px solid black\";\r\n                style.borderBottom = \"1px solid black\";\r\n                style.borderLeft = \"1px solid black\";\r\n                style.borderTop = ExitThickness + \"px solid blue\";\r\n                style.marginTop = -ExitThickness;\r\n                break;\r\n            case DirectionEnum.Down:\r\n                style.borderRight = \"1px solid black\";\r\n                style.borderTop = \"1px solid black\";\r\n                style.borderLeft = \"1px solid black\";\r\n                style.borderBottom = ExitThickness + \"px solid red\";\r\n                style.marginBottom = -ExitThickness + 1;\r\n                break;\r\n            case DirectionEnum.Right:\r\n                style.borderTop = \"1px solid black\";\r\n                style.borderBottom = \"1px solid black\";\r\n                style.borderLeft = \"1px solid black\";\r\n                style.borderRight = ExitThickness + \"px solid green\";\r\n                style.marginRight = -ExitThickness + 1;\r\n                break;\r\n            case DirectionEnum.Left:\r\n                style.borderRight = \"1px solid black\";\r\n                style.borderBottom = \"1px solid black\";\r\n                style.borderTop = \"1px solid black\";\r\n                style.borderLeft = ExitThickness + \"px solid #fff020\";\r\n                style.marginLeft = -ExitThickness;\r\n                break;\r\n        }\r\n    } else {\r\n        style.borderRight = \"1px solid black\";\r\n        style.borderBottom = \"1px solid black\";\r\n        style.borderLeft = \"1px solid black\";\r\n        style.borderTop = \"1px solid black\";\r\n    }\r\n\r\n    let formattedMessage: string | undefined;\r\n    if (props.Message !== undefined) {\r\n        formattedMessage = FormatMessage(props.Message);\r\n    }\r\n\r\n    return (\r\n        <div style={style} ref={drop}>\r\n            {formattedMessage !== undefined && formattedMessage}\r\n            {props.MachineInstanceId !== undefined ? <MachineInstance MachineInstanceId={props.MachineInstanceId} CellSize={props.CellSize - 2} /> : \"\"}\r\n        </div >\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData, ownProps: { cellId: CellModel }) => {\r\n    const activeMachine = GetActiveMachine(state);\r\n    const machineInstance = activeMachine!.Setup.MachineInstances.find((mi) => AreEqual(mi.Cell, ownProps.cellId));\r\n    const exit = activeMachine!.ExitCells.find((ec) => AreEqual(ec.Cell, ownProps.cellId));\r\n    const message = state.messages.find((m) => AreEqual(m.Cell!, ownProps.cellId));\r\n    const CellSize = GetActivePlayer(state).cellSize;\r\n\r\n    return {\r\n        Exit: exit === undefined ? undefined : exit.Direction,\r\n        Message: message === undefined ? undefined : message.Content,\r\n        MachineInstanceId: machineInstance === undefined ? undefined : machineInstance.Id,\r\n        CellSize\r\n    };\r\n};\r\n\r\nexport const Cell = connect(\r\n    mapStateToProps,\r\n    {\r\n        OnNewMachine: AddMachine,\r\n        OnMovedMachine: MoveMachine,\r\n        ChangeChannel\r\n    }\r\n\r\n)(CellInternal);","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Cell } from \"./Cell/Cell\";\r\nimport { GetLighterColor } from \"../../Helper/ColorHelper\";\r\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\r\nimport { GetActiveMachine, GetActivePlayer } from \"../../Helper/StoreHelper\";\r\nimport { MachineStyleModel } from \"../../Models/MachineStyleModel\";\r\n\r\nconst GridInternal: React.FC<{\r\n    Rows: number;\r\n    Columns: number;\r\n    CellSize: number;\r\n    Style: MachineStyleModel;\r\n}> = (props) => {\r\n    const rows = [];\r\n    for (let rowIndex = 0; rowIndex < props.Rows; rowIndex++) {\r\n        const row = [];\r\n        for (let columnIndex = 0; columnIndex < props.Columns; columnIndex++) {\r\n\r\n            row.push(<Cell key={columnIndex} cellId={{ Row: rowIndex, Column: columnIndex }} smallHeigth={rowIndex === 0 || rowIndex === props.Rows - 1} smallWidth={columnIndex === 0 || columnIndex === props.Columns - 1} />);\r\n        }\r\n        rows.push(<div key={rowIndex} style={{ display: \"flex\", flexDirection: \"row\", opacity: 1 }}>{row}</div>);\r\n    }\r\n\r\n    return (\r\n        <div style={{ position: \"absolute\", borderColor: GetLighterColor(props.Style.BorderColor, 0.4), borderWidth: props.CellSize * 0.2, borderStyle: \"solid\", marginBottom: 0 }}>\r\n            <div style={{ display: \"flex\", flexDirection: \"column\", backgroundColor: GetLighterColor(props.Style.Color, 0.3) }}>\r\n                {rows}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state: GameData) {\r\n    const activeMachine = GetActiveMachine(state);\r\n    const CellSize = GetActivePlayer(state).cellSize;\r\n    return {\r\n        Rows: activeMachine!.Setup.NumberOfRows,\r\n        Columns: activeMachine!.Setup.NumberOfColumns,\r\n        Style: activeMachine!.Style,\r\n        CellSize\r\n    };\r\n}\r\n\r\nexport const Grid = connect(\r\n    mapStateToProps\r\n)(GridInternal);","export enum OutputStatus {\n    NotChecked,\n    NotFullfilled,\n    Fullfilled,\n    NotMatched\n}","import React from \"react\";\nimport { FormatMessage } from \"../../../MessageFormatter\";\nimport { Props } from \"./Props\";\nimport { OutputStatus } from \"../../../../Models/OutputStatusEnum\";\nimport { ChannelColorEnum } from \"../../../../Models/ChannelColorsEnum\";\n\nexport const MessageDisplay: React.FC<Props> = (props) => {\n    const onContentChanged: ((event: React.ChangeEvent<HTMLInputElement>) => void) = (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (props.OnMessageChanged !== undefined) {\n            props.OnMessageChanged({ Content: event.target.value, Channel: props.Message.Channel });\n        }\n    };\n    const onChannelChanged = (event: React.ChangeEvent<HTMLSelectElement>) => {\n        if (props.OnMessageChanged !== undefined) {\n            props.OnMessageChanged({ Content: props.Message.Content, Channel: event.target.value as ChannelColorEnum });\n        }\n    };\n\n    const style: React.CSSProperties = { display: \"flex\", flexFlow: \"row\", justifyContent: props.Input ? \"flex-start\" : \"flex-end\", marginBottom: 1 };\n    const statusStyle: React.CSSProperties = { display: \"flex\", flexFlow: \"row\" };\n    switch (props.Status) {\n        case OutputStatus.Fullfilled:\n            statusStyle.backgroundColor = \"#d9ffb3\";\n            if (props.Editable) {\n                statusStyle.borderRight = \"solid green\";\n                statusStyle.borderBottom = \"solid green\";\n            }\n            break;\n        case OutputStatus.NotFullfilled:\n            // statusStyle.backgroundColor = \"#ffb3b3\";\n            break;\n        case OutputStatus.NotMatched:\n            statusStyle.border = \"solid red\";\n            statusStyle.backgroundColor = \"#ffb3b3\";\n            break;\n        default:\n            break;\n    }\n\n    return (<div style={style}>\n        <div style={statusStyle}>\n            {props.Input && props.Editable && <button onClick={props.Remove}>-</button>}\n            {props.Input && (props.Editable && props.AllowedInputColors.length > 1 ? <select value={props.Message.Channel} style={{ backgroundColor: props.Message.Channel }} onChange={onChannelChanged}>\n                {props.AllowedInputColors.map((cc, index) => <option value={cc} key={index} style={{ backgroundColor: cc }}></option>)}\n            </select> : <div style={{ backgroundColor: props.Message.Channel, width: 10 }} />)}\n            {props.Editable ?\n                <input value={props.Message.Content} onChange={onContentChanged}></input>\n                :\n                <label>{FormatMessage(props.Message.Content)}</label>}\n            {!props.Input && <div style={{ backgroundColor: props.Message.Channel, width: 10 }} /> }\n        </div>\n    </div>);\n};","import React, { useState } from \"react\";\r\nimport { OrderedMessageModel } from \"../../../Models/OrderedMessageModel\";\r\nimport { OutputStatus } from \"../../../Models/OutputStatusEnum\";\r\nimport { MessageDisplay } from \"./MessageDisplay/MessageDisplay\";\r\nimport { Props } from \"./Props\";\r\nimport { AppStore, AppState } from \"../../../Redux/Store\";\r\nimport { RemoveTest, RemoveInput, UpdateInput, AddInput } from \"../../../Redux/GameDataReducer/Level/Actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { ChannelColorEnum } from \"../../../Models/ChannelColorsEnum\";\r\nimport { Computer } from \"../../../Computing/Computer\";\r\nimport { GetActiveMachine } from \"../../../Helper/StoreHelper\";\r\n\r\nconst TestDisplayInternal: React.FC<Props> = (props) => {\r\n\r\n    const [error, setError] = useState<string | undefined>(undefined);\r\n    const PlayTest = () => {\r\n        setError(undefined);\r\n        const activeMachine = GetActiveMachine(AppState());\r\n\r\n        if (activeMachine !== undefined) {\r\n            const computer = new Computer(activeMachine.Setup, true);\r\n            computer.RunComputation(props.Test.id, AppStore).catch((reason) => {\r\n                setError(reason.toString());\r\n            });\r\n        }\r\n    };\r\n\r\n    const inputs = props.Test.inputs;\r\n    const outputs = props.Test.expectedOutputs;\r\n    let messages: JSX.Element[] = [];\r\n    let index = 0;\r\n\r\n    for (let i = 0; i < inputs.length; i++) {\r\n        messages.push(\r\n            <div key={index++} style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                <MessageDisplay Message={inputs[i]} Input={true} Status={OutputStatus.NotChecked} Editable={props.Test.editable} AllowedInputColors={[ChannelColorEnum.Green, ChannelColorEnum.Blue, ChannelColorEnum.Red, ChannelColorEnum.Yellow]} Remove={() => props.RemoveInput(props.Test.id, i)} OnMessageChanged={(message) => props.UpdateInput({ ...message, Order: i }, props.Test.id)} />\r\n            </div>\r\n        );\r\n        const expectedOutputs = outputs.filter((o) => o.Order === i);\r\n        let actuals: OrderedMessageModel[] | undefined;\r\n\r\n        if (props.Test.actualOutputs !== undefined) {\r\n            actuals = props.Test.actualOutputs.filter((o) => o.Order === i);\r\n        }\r\n\r\n        for (let j = 0; j < expectedOutputs.length; j++) {\r\n            const expected = expectedOutputs[j];\r\n            let valid = OutputStatus.NotChecked;\r\n            if (actuals !== undefined) {\r\n                const indexActual = (actuals.findIndex((o) => o.Channel === expected.Channel && o.Content === expected.Content));\r\n                if (indexActual > -1) {\r\n                    valid = OutputStatus.Fullfilled;\r\n                    actuals.splice(indexActual, 1);\r\n                } else {\r\n                    valid = OutputStatus.NotFullfilled;\r\n                }\r\n            }\r\n\r\n            /* eslint-disable */\r\n            messages = messages.concat(<MessageDisplay Message={expectedOutputs[j]} Input={false} key={index++} Status={valid} Editable={props.Test.editable} AllowedInputColors={[ChannelColorEnum.Green, ChannelColorEnum.Blue, ChannelColorEnum.Red, ChannelColorEnum.Yellow]}/>);\r\n        }\r\n\r\n        if (actuals !== undefined) {\r\n            messages = messages.concat(actuals.map((o) => <MessageDisplay Message={o} Input={false} key={index++} Status={props.Test.editable ? OutputStatus.NotFullfilled : OutputStatus.NotMatched} AllowedInputColors={[ChannelColorEnum.Green]} Editable={false} />));\r\n        }\r\n    }\r\n    /* eslint-enable */\r\n\r\n    const style: React.CSSProperties = { display: \"flex\", flexDirection: \"row\", borderBottom: \"solid 0.5px\", marginTop: 5 };\r\n    const verticalStyle: React.CSSProperties = { display: \"flex\", flexDirection: \"column\", flexGrow: 1 };\r\n\r\n    return (\r\n        <div style={style}>\r\n            {props.Test.editable && <button onClick={() => props.RemoveTest(props.Test.id)}>-</button>}\r\n            <button onClick={PlayTest}>Play</button>\r\n            <div style={verticalStyle}>\r\n                {error !== undefined && <div style={{ color: \"red\" }}>\r\n                    <label>{error}</label>\r\n                </div>}\r\n                {messages}\r\n                {props.Test.editable && <button style={{ alignSelf: \"start\" }} onClick={() => props.AddInput(props.Test.id)}>+</button>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const TestDisplay = connect(\r\n    undefined,\r\n    { RemoveTest, RemoveInput, UpdateInput, AddInput }\r\n)(TestDisplayInternal);","import React from \"react\";\r\nimport { Props } from \"./Props\";\r\nimport { TestDisplay } from \"./TestDisplay/TestDisplay\";\r\nimport { connect } from \"react-redux\";\r\nimport { AddTest } from \"../../Redux/GameDataReducer/Level/Actions\";\r\nimport { SwitchScreen } from \"../../Redux/GameDataReducer/Actions\";\r\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\r\nimport { GetActiveMachine, GetActivePlayer } from \"../../Helper/StoreHelper\";\r\nimport { LevelState } from \"../../Redux/GameDataReducer/PlayerReducer/LevelData\";\r\nimport { AppState, AppStore } from \"../../Redux/Store\";\r\nimport { Computer } from \"../../Computing/Computer\";\r\n\r\nconst LevelDisplayInternal: React.FC<Props> = (props) => {\r\n\r\n    const tests = props.Level.tests.map((t, index) => <TestDisplay Test={t} key={index} />);\r\n\r\n    async function PlayAll() {\r\n        const activeMachine = GetActiveMachine(AppState());\r\n\r\n        if (activeMachine !== undefined) {\r\n            for (let test of props.Level.tests) {\r\n                const computer = new Computer(activeMachine.Setup, true);\r\n                const result = await computer.RunComputation(test.id, AppStore).catch((reason) => {\r\n                    return false;\r\n                });\r\n\r\n                if (result === false) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <b>{props.Level.name}</b>\r\n                <br />\r\n                <i>{props.Level.description}</i>\r\n            </div>\r\n            {tests}\r\n            {props.Level.id === \"12\" && <><button onClick={props.AddTest}>Add custom test</button><br /></>}\r\n            <button onClick={PlayAll}>Play all tests</button><br />\r\n\r\n            {props.Status === LevelState.Completed &&\r\n                <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", marginTop: 10 }} >\r\n                    <b style={{ color: \"green\" }}>Level completed!</b>\r\n                    <button onClick={() => props.SwitchScreen(\"levelSelect\")}>Select next level</button>\r\n                </div>\r\n            }\r\n            { props.Status === LevelState.NonValidMachineUsed && <b style={{ color: \"red\" }}>Machine used that is not allowed this level</b>}\r\n\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n    return {\r\n        Level: state.activeLevel!,\r\n        Status: GetActivePlayer(state)!.levelData.find((l) => l.Id === state.activeLevel!.id)!.State\r\n    };\r\n};\r\n\r\nexport const LevelDisplay = connect(\r\n    mapStateToProps,\r\n    { AddTest, SwitchScreen }\r\n)(LevelDisplayInternal);","import React from \"react\";\nimport { Constants } from \"../../../Constants\";\nimport { Props } from \"./Props\";\nimport { GetDirectedChannelSet } from \"../../../../Helper/NewChannelSet\";\nimport { MachineCanvasHolder } from \"../../../Grid/Cell/MachineInstance/MachineDrawer/MachineCanvasHolder\";\n\nconst size = Constants.CellSize * 0.33;\nexport const MachineDisplay: React.FC<Props> = (props) => {\n\n    const { inputChannels, outputChannels } = GetDirectedChannelSet(props.MachineType.Api);\n    \n    return (\n        <div style={{display:\"flex\"}}>\n            <div style={{height:size , width: size}}>\n                <MachineCanvasHolder\n                    MachineStyle={props.MachineType.Style}\n                    IsDefault={props.IsDefault}\n                    BackgroundColor={\"White\"}\n                    InputChannels={inputChannels}\n                    OutputChannels={outputChannels}\n                    CellSize={size}\n                />\n            </div>\n            <label>{props.MachineType.Style.Name}</label>\n        </div>);\n};\n","import { GridSetupActionTypes } from \"./GridSetup/Actions\";\r\n\r\ninterface AddNewMachineActionType {\r\n    type: \"AddNewMachineActionType\";\r\n}\r\n\r\nexport function AddNewMachine(): CustomMachinesActionTypes {\r\n    return {\r\n        type: \"AddNewMachineActionType\",\r\n    };\r\n}\r\n\r\ninterface DeleteMachineActionType {\r\n    type: \"DeleteMachineActionType\";\r\n    machineId: string;\r\n}\r\n\r\nexport function DeleteMachine(machineId: string): CustomMachinesActionTypes {\r\n    return {\r\n        type: \"DeleteMachineActionType\",\r\n        machineId\r\n    };\r\n}\r\n\r\ninterface LoadCustomMachineActionType {\r\n    type: \"LoadCustomMachineActionType\";\r\n    machineId: string;\r\n}\r\n\r\nexport function LoadCustomMachine(machineId: string): CustomMachinesActionTypes {\r\n    return {\r\n        type: \"LoadCustomMachineActionType\",\r\n        machineId\r\n    };\r\n}\r\n\r\ninterface ChangeCellSizeActionType {\r\n    type: \"ChangeCellSizeActionType\";\r\n    cellSize: number;\r\n}\r\n\r\nexport function ChangeCellSize(cellSize: number): ChangeCellSizeActionType {\r\n    return {\r\n        type: \"ChangeCellSizeActionType\",\r\n        cellSize\r\n    };\r\n}\r\n\r\nexport type CustomMachinesActionTypes = AddNewMachineActionType\r\n    | LoadCustomMachineActionType\r\n    | DeleteMachineActionType\r\n    | GridSetupActionTypes\r\n    | ChangeCellSizeActionType;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { DraggedNewMachine, DragItemTypes } from \"../../DragItemTypes\";\r\nimport { MachineDisplay } from \"./MachineDisplay/MachineDisplay\";\r\nimport { MachineStore } from \"../../../MachineStore/MachineStore\";\r\nimport { LoadCustomMachine, DeleteMachine } from \"../../../Redux/GameDataReducer/PlayerReducer/Actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { Constants } from \"../../Constants\";\r\nimport { GameData } from \"../../../Redux/GameDataReducer/GameModel\";\r\nimport { IsDefaultMachine } from \"../../../MachineStore/IMachine\";\r\nimport { GetActivePlayer } from \"../../../Helper/StoreHelper\";\r\nimport { getEmptyImage } from \"react-dnd-html5-backend\";\r\nimport { IMachineType } from \"../../../MachineStore/IMachineType\";\r\n\r\nconst StoredMachineInternal: React.FC<{\r\n    machine: string;\r\n    LoadCustomMachine: typeof LoadCustomMachine;\r\n    DeleteMachine: typeof DeleteMachine;\r\n    status: \"Valid\" | \"Invalid\";\r\n    machineType: IMachineType; \r\n}> = (props) => {\r\n    const [, drag, preview] = useDrag<DraggedNewMachine, unknown, unknown>({\r\n        item: { type: DragItemTypes.NewMachine, id: props.machine },\r\n        collect: (monitor) => ({\r\n            isDragging: !!monitor.isDragging(),\r\n        }),\r\n    });\r\n    const [showMenu, changeShow] = useState(false);\r\n    useEffect(() => {\r\n        preview(getEmptyImage(), { captureDraggingState: true })\r\n    }, [preview])\r\n\r\n    const isDefault = IsDefaultMachine(props.machine);\r\n    const machineStyle: React.CSSProperties = props.status === \"Invalid\" ? { borderBottom: Constants.CellSize / 18 + \"px dotted orange\", boxSizing: \"border-box\" } : {};\r\n\r\n    return (\r\n        <div ref={drag} title={props.machineType.Style.Description} onClick={() => changeShow(!showMenu)}>\r\n            <div style={machineStyle}>\r\n                <MachineDisplay MachineType={props.machineType} IsDefault={isDefault} />\r\n            </div>\r\n            {!isDefault && showMenu && <div style={{ display: \"flex\" }}>\r\n                <button onClick={(event) => props.LoadCustomMachine(props.machine)}>Edit</button>\r\n                <button onClick={(event) => {\r\n                    props.DeleteMachine(props.machine);\r\n                }}>Delete</button>\r\n            </div>}\r\n        </div>);\r\n};\r\n\r\nconst mapStateToProps = (state: GameData, ownProps: { machine: string }) => {\r\n    return {\r\n        status: IsDefaultMachine(ownProps.machine) ? \"Valid\" : GetActivePlayer(state)!.machines.find((m) => m.Id === ownProps.machine)!.Status,\r\n        machineType: MachineStore.GetStore().GetMachineType(ownProps.machine)\r\n    };\r\n};\r\n\r\nexport const StoredMachine = connect(\r\n    mapStateToProps,\r\n    {\r\n        LoadCustomMachine, DeleteMachine\r\n    }\r\n)(StoredMachineInternal);","import React from \"react\";\nimport { Props } from \"./Props\";\nimport { StoredMachine } from \"./StoredMachine/StoredMachine\";\nimport { AddNewMachine } from \"../../Redux/GameDataReducer/PlayerReducer/Actions\";\nimport { connect } from \"react-redux\";\nimport { MachineStore } from \"../../MachineStore/MachineStore\";\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\nimport { GetActiveMachine, GetActivePlayer } from \"../../Helper/StoreHelper\";\nimport { IsStartMachine, IsDefaultMachine } from \"../../MachineStore/IMachine\";\n\nconst MachineCollectionInternal: React.FC<Props> = (props) => {\n\n    const storedMachines = props.allowedMachines.map((m) => <div key={m}><StoredMachine machine={m} /></div>);\n\n    return (\n        <div style={{ overflow: \"auto\", height: props.height, position: \"absolute\" }}>\n            <button onClick={props.AddNewMachine}>Create new machine</button>\n            {storedMachines}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state: GameData) => {\n    const store = MachineStore.GetStore();\n    const machines = store.GetAllMachines();\n    let allowedMachines: string[] = [];\n    const disallowedMachines: string[] = [];\n    const allowedStartMachines: string[] = [];\n\n    for (const machine of machines) {\n        if (state.activeLevel!.allowedMachines.some((am) => machine === am)) {\n            if (IsStartMachine(machine)) {\n                allowedStartMachines.push(machine);\n            }\n            else {\n                allowedMachines.push(machine);\n            }\n        } else {\n            disallowedMachines.push(machine);\n        }\n    }\n\n    const activeMachine = GetActiveMachine(state);\n    if (activeMachine !== undefined) {\n        const usedStartMachines = activeMachine.Setup.MachineInstances.filter((m) => IsStartMachine(m.MachineId));\n\n        const nextStartMachine = allowedStartMachines.find((m) => !usedStartMachines.some((s) => s.MachineId === m));\n        if (nextStartMachine !== undefined) {\n            allowedMachines = [nextStartMachine, ...allowedMachines];\n        }\n    }\n\n    const allowedCustomMachines: string[] = GetActivePlayer(state)!.machines.filter((customMachine) => !customMachine.DependingOn.some((dm) => IsDefaultMachine(dm) && disallowedMachines.some((dis) => dis === dm))).map((cm) => cm.Id);\n    allowedMachines = allowedMachines.concat(allowedCustomMachines);\n\n    return {\n        allowedMachines\n    };\n};\n\nexport const MachineCollection = connect(\n    mapStateToProps,\n    { AddNewMachine }\n)(MachineCollectionInternal);","export function StopPropagation(event: React.MouseEvent<HTMLDivElement, MouseEvent>): void{\r\n    event.stopPropagation();\r\n}","import React, { useState } from \"react\";\r\nimport { ChangeCellSize } from \"../../../Redux/GameDataReducer/PlayerReducer/Actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { IMachineType } from \"../../../MachineStore/IMachineType\";\r\nimport { GetDirectedChannelSet } from \"../../../Helper/NewChannelSet\";\r\nimport { MachineCanvasHolder } from \"../../Grid/Cell/MachineInstance/MachineDrawer/MachineCanvasHolder\";\r\nimport { GetActiveMachine, GetActivePlayer } from \"../../../Helper/StoreHelper\";\r\nimport { GameData } from \"../../../Redux/GameDataReducer/GameModel\";\r\nimport { GetLighterColor, GetRandomColor } from \"../../../Helper/ColorHelper\";\r\nimport { MachineApi } from \"../../../Models/MachineApi\";\r\nimport { ChannelColorEnum } from \"../../../Models/ChannelColorsEnum\";\r\nimport { MachineStyleModel } from \"../../../Models/MachineStyleModel\";\r\n\r\nconst ChangeSizeInternal: React.FC<{ MachineType: IMachineType | undefined; CellSize: number; ChangeCellSize: typeof ChangeCellSize; Close(): void }> = (props) => {\r\n\r\n    const [size, setSize] = useState(props.CellSize);\r\n    const [borderColor] = useState(GetRandomColor());\r\n    const [backgroundColor] = useState(GetLighterColor(GetRandomColor(), 0.3));\r\n\r\n    function SizeChanged(newSize: number) {\r\n        props.ChangeCellSize(newSize);\r\n        setSize(newSize);\r\n    }\r\n\r\n    const api: MachineApi = props.MachineType?.Api ?? { OutputChannels: [ChannelColorEnum.Green], InputChannels: [ChannelColorEnum.Green] };\r\n    const style: MachineStyleModel = props.MachineType?.Style ?? { BorderColor: \"red\", Color: \"green\", Name: \"Dummy\", Description: \"dummy\" }\r\n    const channels = GetDirectedChannelSet(api);\r\n    return (\r\n        <div style={{ margin: 10, width: 500, borderColor, backgroundColor, borderWidth: 20, borderStyle: \"solid\", padding: 30 }}>\r\n            <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n                <div style={{ height: props.CellSize, width: props.CellSize, alignSelf: \"center\" }}>\r\n                    <MachineCanvasHolder MachineStyle={style}\r\n                        IsDefault={false}\r\n                        BackgroundColor={backgroundColor}\r\n                        InputChannels={channels.inputChannels}\r\n                        OutputChannels={channels.outputChannels}\r\n                        MovingOutput={undefined}\r\n                        CellSize={props.CellSize} />\r\n                </div>\r\n                <input type=\"range\" min=\"10\" max=\"200\" onChange={(event) => SizeChanged(Number(event.currentTarget.value))} value={size} />\r\n                {size}\r\n            </div>\r\n            <button className=\"startMenu\" onClick={props.Close}>Close</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n    const activeMachine = GetActiveMachine(state);\r\n    const cellSize = GetActivePlayer(state).cellSize;\r\n    return ({\r\n        MachineType: activeMachine,\r\n        CellSize: cellSize\r\n    });\r\n};\r\n\r\nexport const ChangeSizeComponent = connect(\r\n    mapStateToProps,\r\n    { ChangeCellSize }\r\n)(ChangeSizeInternal);\r\n","import React, { useState } from \"react\";\r\nimport { SetName, SetDescription, SetColor, SetBorderColor } from \"../../../../Redux/GameDataReducer/PlayerReducer/GridSetup/Actions\";\r\nimport { Props } from \"./Props\";\r\nimport { connect } from \"react-redux\";\r\nimport { GameData } from \"../../../../Redux/GameDataReducer/GameModel\";\r\nimport { GetActiveMachine, GetActivePlayer } from \"../../../../Helper/StoreHelper\";\r\nimport { MachineCanvasHolder } from \"../../../Grid/Cell/MachineInstance/MachineDrawer/MachineCanvasHolder\";\r\nimport { GetDirectedChannelSet } from \"../../../../Helper/NewChannelSet\";\r\nimport { GetLighterColor, GetRandomColor } from \"../../../../Helper/ColorHelper\";\r\n\r\nconst EditMachineInternal: React.FC<Props> = (props) => {\r\n    const [color, setColor] = useState<string>(props.MachineType.Style.Color);\r\n    const [borderColor, setBorderColor] = useState<string>(props.MachineType.Style.BorderColor);\r\n    const [dialogBorderColor] = useState(GetRandomColor());\r\n    const [backgroundColor] = useState(GetLighterColor(GetRandomColor(), 0.3));\r\n\r\n    function colorChanged(color: string): void {\r\n        setColor(color);\r\n        props.SetColor(color);\r\n    }\r\n\r\n    function borderChanged(borderColor: string): void {\r\n        setBorderColor(borderColor);\r\n        props.SetBorderColor(borderColor);\r\n    }\r\n\r\n    const channels = GetDirectedChannelSet(props.MachineType.Api);\r\n    return (\r\n        <div style={{ margin: 10, width: 500, borderColor: dialogBorderColor, backgroundColor, borderWidth: 20, borderStyle: \"solid\", padding: 30 }}>\r\n            {props.MachineType !== undefined &&\r\n                <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n                    <div style={{ height: props.CellSize, width: props.CellSize, alignSelf: \"center\" }}>\r\n                        <MachineCanvasHolder MachineStyle={props.MachineType.Style}\r\n                            IsDefault={false}\r\n                            BackgroundColor={backgroundColor}\r\n                            InputChannels={channels.inputChannels}\r\n                            OutputChannels={channels.outputChannels}\r\n                            MovingOutput={undefined}\r\n                            CellSize={props.CellSize} />\r\n                    </div>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                        <label>Name</label>\r\n                        <input onChange={(event) => props.SetName(event.target.value)} value={props.MachineType.Style.Name}></input>\r\n                    </div>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                        <label>Color</label>\r\n                        <input onChange={(event) => colorChanged(event.target.value)} value={color}></input>\r\n                    </div>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                        <label>BorderColor</label>\r\n                        <input onChange={(event) => borderChanged(event.target.value)} value={borderColor}></input>\r\n                    </div>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                        <label>Description</label>\r\n                        <textarea cols={50} rows={5} onChange={(event) => props.SetDescription(event.target.value)} value={props.MachineType.Style.Description}></textarea>\r\n                    </div>\r\n                </div>}\r\n                <button className=\"startMenu\" onClick={props.Close}>Close</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n    const activeMachine = GetActiveMachine(state);\r\n    const cellSize = GetActivePlayer(state).cellSize;\r\n    return ({\r\n        MachineType: activeMachine!,\r\n        CellSize: cellSize\r\n    });\r\n};\r\n\r\nexport const EditMachine = connect(\r\n    mapStateToProps,\r\n    { SetName, SetDescription, SetColor, SetBorderColor }\r\n)(EditMachineInternal);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { StopPropagation } from \"../../../Helper/ClickHelper\";\r\nimport { GetLighterColor, GetRandomColor } from \"../../../Helper/ColorHelper\";\r\nimport { GetActiveMachine } from \"../../../Helper/StoreHelper\";\r\nimport { SwitchScreen } from \"../../../Redux/GameDataReducer/Actions\";\r\nimport { GameData } from \"../../../Redux/GameDataReducer/GameModel\";\r\nimport { ChangeSizeComponent } from \"./ChangeSizeComponent\";\r\nimport { EditMachine } from \"./EditMachine/EditMachine\";\r\n\r\n\r\nconst GameMenuInternal: React.FC<{ SwitchScreen: typeof SwitchScreen; Close(): void, hasActiveMachine: boolean }> = (props) => {\r\n\r\n    const [dialog, setdialog] = useState<\"none\" | \"editMachine\" | \"changeCellSize\">(\"none\");\r\n\r\n    const [borderColor] = useState(GetRandomColor());\r\n    const [backgroundColor] = useState(GetLighterColor(GetRandomColor(), 0.3));\r\n\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }} onClick={StopPropagation}>\r\n            {dialog !== \"none\" && <div style={{ width: 220 }} ></div>}\r\n            <div style={{ borderColor, backgroundColor, borderWidth: 20, borderStyle: \"solid\", padding: 30, display: \"flex\", flexDirection: \"column\" }}>\r\n                <button className=\"startMenu\" onClick={() => props.SwitchScreen(\"startMenu\")}>Back to menu</button>\r\n                {props.hasActiveMachine && <button className=\"startMenu\" onClick={() => setdialog(\"editMachine\")}>Edit machine style</button>}\r\n                <button className=\"startMenu\" onClick={() => setdialog(\"changeCellSize\")}>Change cell size</button>\r\n\r\n                <button className=\"startMenu\" onClick={props.Close}>Continue playing</button>\r\n            </div>\r\n            {dialog === \"editMachine\" && <EditMachine Close={() => setdialog(\"none\")}/>}\r\n            {dialog === \"changeCellSize\" && <ChangeSizeComponent Close={() => setdialog(\"none\")}/>}\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state: GameData){\r\n    const activeMachine = GetActiveMachine(state);\r\n    return {hasActiveMachine: activeMachine !== undefined}\r\n}\r\n\r\nexport const GameMenu = connect(\r\n    mapStateToProps,\r\n    { SwitchScreen }\r\n)(GameMenuInternal);\r\n","import React from \"react\";\r\nimport { XYCoord } from \"react-dnd\";\r\nimport { connect } from \"react-redux\";\r\nimport { GetDirectedChannelSet } from \"../../../Helper/NewChannelSet\";\r\nimport { GetActivePlayer } from \"../../../Helper/StoreHelper\";\r\nimport { IsDefaultMachine } from \"../../../MachineStore/IMachine\";\r\nimport { MachineStore } from \"../../../MachineStore/MachineStore\";\r\nimport { GameData } from \"../../../Redux/GameDataReducer/GameModel\";\r\nimport { MachineCanvasHolder } from \"../../Grid/Cell/MachineInstance/MachineDrawer/MachineCanvasHolder\";\r\n\r\nconst DraggedMachineInternal: React.FC<{ machineId: string, offset: XYCoord, cellSize: number }> = (props) => {\r\n    const machineType = MachineStore.GetStore().GetMachineType(props.machineId);\r\n    const { inputChannels, outputChannels } = GetDirectedChannelSet(machineType.Api);\r\n    const transform = `translate(${props.offset.x - props.cellSize / 2}px, ${props.offset.y - props.cellSize / 2}px)`\r\n    return <div style={{ position: \"absolute\", transform, pointerEvents: \"none\" }}>\r\n        <MachineCanvasHolder InputChannels={inputChannels}\r\n            OutputChannels={outputChannels}\r\n            MachineStyle={machineType.Style}\r\n            BackgroundColor={\"white\"}\r\n            CellSize={props.cellSize}\r\n            IsDefault={IsDefaultMachine(props.machineId)} />\r\n    </div>\r\n};\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n\r\n    return {\r\n        cellSize: GetActivePlayer(state).cellSize\r\n    };\r\n};\r\nexport const DraggedMachine = connect(\r\n    mapStateToProps,\r\n    {}\r\n)(DraggedMachineInternal);","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\r\nimport { GetActiveMachine, GetActivePlayer } from \"../../Helper/StoreHelper\";\r\nimport { useDrag, useDragLayer, XYCoord } from \"react-dnd\";\r\nimport { DragItemTypes } from \"../DragItemTypes\";\r\nimport { getEmptyImage } from \"react-dnd-html5-backend\";\r\n\r\nconst MovingElementInternal: React.FC<{\r\n    Rows: number;\r\n    Columns: number;\r\n    CellSize: number;\r\n    WindowHeight: number;\r\n    WindowWidth: number; \r\n    children?: React.ReactNode;\r\n}> = (props) => {\r\n    const calculatedHeight = props.CellSize * (props.Rows - .35);\r\n    const calculatedWidth = props.CellSize * (props.Columns - 0.35);\r\n\r\n    const [leftStart, setLeftStart] = useState((props.WindowWidth - calculatedWidth) / 2);\r\n    const [topStart, setTopStart] = useState((props.WindowHeight - calculatedHeight) / 2);\r\n    const [finalOffset, setFinalOffset] = useState<XYCoord>({ x: 0, y: 0 });\r\n    const [{ isDragging }, drag, preview] = useDrag({\r\n        item: { type: DragItemTypes.Grid },\r\n        end: (result, monitor) => {\r\n            const offSet = monitor.getDifferenceFromInitialOffset();\r\n            if (offSet !== null) {\r\n                setFinalOffset(offSet);\r\n            }\r\n        },\r\n        collect: (monitor) => ({ isDragging: monitor.isDragging() })\r\n    });\r\n\r\n    useEffect(() => {\r\n        setLeftStart((l) => l + finalOffset.x);\r\n        setTopStart((t) => t + finalOffset.y);\r\n    }, [finalOffset])\r\n\r\n    const offSet = useDragLayer((monitor) => {\r\n        if (monitor.getItemType() === DragItemTypes.Grid) {\r\n            const offSet = monitor.getDifferenceFromInitialOffset();\r\n            if (offSet !== null) {\r\n                return offSet;\r\n            } else {\r\n                return undefined;\r\n            }\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        preview(getEmptyImage(), { captureDraggingState: true })\r\n    }, [preview])\r\n\r\n    const left = isDragging && offSet !== undefined ? leftStart + offSet.x : leftStart;\r\n    const top = isDragging && offSet !== undefined ? topStart + offSet.y : topStart;\r\n\r\n    return (\r\n        <div ref={drag} style={{ position: \"absolute\", top, left, height: calculatedHeight, width: calculatedWidth }}>\r\n            {props.children}\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state: GameData) {\r\n    const activeMachine = GetActiveMachine(state);\r\n    const CellSize = GetActivePlayer(state).cellSize;\r\n    return {\r\n        Rows: activeMachine!.Setup.NumberOfRows,\r\n        Columns: activeMachine!.Setup.NumberOfColumns,\r\n        Style: activeMachine!.Style,\r\n        CellSize\r\n    };\r\n}\r\n\r\nexport const MovingElement = connect(\r\n    mapStateToProps\r\n)(MovingElementInternal);","import React, { useEffect, useState } from \"react\";\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\nimport { Dashboard } from \"../Dashboard/Dashboard\";\nimport { Grid } from \"../Grid/Grid\";\nimport { LevelDisplay } from \"../LevelDisplay/LevelDisplay\";\nimport { MachineCollection } from \"../MachineCollection/MachineCollection\";\nimport { Computer } from \"../../Computing/Computer\";\nimport { AddNewMachine } from \"../../Redux/GameDataReducer/PlayerReducer/Actions\";\nimport { RemoveMachine } from \"../../Redux/GameDataReducer/PlayerReducer/GridSetup/MachineInstances/Actions\";\nimport { connect } from \"react-redux\";\nimport { Props } from \"./Props\";\nimport { ClearMessages } from \"../../Redux/GameDataReducer/PlayerReducer/GridSetup/Actions\";\nimport { GetActiveMachine } from \"../../Helper/StoreHelper\";\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\nimport { useDragLayer, useDrop } from \"react-dnd\";\nimport { DraggedNewMachine, DraggedOutputChannel, DragItemTypes } from \"../DragItemTypes\";\nimport { GetAngleFromMonitor } from \"../../Helper/AngleHelper\";\nimport { SetMovingOutput } from \"../../Redux/GameDataReducer/Actions\";\nimport { GameMenu } from \"./GameMenu/GameMenu\";\nimport { Constants } from \"../Constants\";\nimport { DraggedMachine } from \"../MachineCollection/DraggedMachine/DraggedMachine\";\nimport { MovingElement } from \"../Grid/MovingElement\";\n\nconst GameInternal: React.FC<Props> = (props) => {\n    const [menu, setMenu] = useState<\"none\" | \"options\">(\"none\");\n\n    const [height, setHeight] = useState(window.innerHeight);\n    const [width, setWidth] = useState(window.innerWidth);\n\n    useEffect(() => {\n        document.addEventListener(\"keyup\", handleKeyPress, false);\n        window.addEventListener(\"resize\", handleResize);\n        return () => {\n            document.removeEventListener(\"keyup\", handleKeyPress, false);\n            window.removeEventListener(\"resize\", handleResize, false);\n\n        }\n    })\n\n    const [, drop] = useDrop({\n        accept: [DragItemTypes.MachineInstance],\n        drop: (item, monitor) => {\n            if (monitor.isOver()) {\n                switch (item.type) {\n                    case DragItemTypes.MachineInstance:\n                        props.RemoveMachine(monitor.getItem().id);\n                        break;\n                }\n            }\n        },\n    });\n\n    const dragPreviewElement = useDragLayer((monitor) => {\n        switch (monitor.getItemType()) {\n            case DragItemTypes.OutputChannel:\n\n                const outputItem: DraggedOutputChannel = monitor.getItem() as DraggedOutputChannel;\n                const draggedOutputAngle = GetAngleFromMonitor(monitor, outputItem.offsetX, outputItem.offsetY);\n                if (draggedOutputAngle !== undefined) {\n                    props.SetMovingOutput({ angle: draggedOutputAngle, ...outputItem });\n                }\n                break;\n            case DragItemTypes.NewMachine:\n                if (monitor.isDragging()) {\n                    const offset = monitor.getClientOffset();\n                    if (offset !== null) {\n                        const item = monitor.getItem() as DraggedNewMachine;\n                        return <DraggedMachine machineId={item.id} offset={offset} />\n                    }\n                }\n                break\n        }\n        return null;\n    });\n\n    function handleKeyPress(event: KeyboardEvent): void {\n        switch (event.key) {\n            case \" \":\n                Computer.StopComputation();\n                props.ClearMessages();\n                event.stopPropagation();\n                break;\n            default:\n                break;\n        }\n    }\n\n    function handleResize(): void {\n        setHeight(window.innerHeight);\n        setWidth(window.innerWidth);\n    }\n\n    const allowedInputColors = [ChannelColorEnum.Green];\n    const opagueBackground = \"rgba(255,255,255,.8)\";\n    return (\n        <div ref={drop} style={{ position: \"absolute\", height, width, overflow: \"hidden\" }}>\n            <div style={{ position: \"absolute\", height: \"100%\", width: \"100%\" }}>\n                {!props.HasActiveMachine ?\n                    <div style={{ display: \"flex\", height: \"100%\", width: \"100%\", justifyContent: \"center\", alignItems: \"center\" }}>\n                        <button title={\"Add new machine\"} onClick={props.AddNewMachine}>Create new machine</button>\n                    </div>\n                    :\n                    <MovingElement WindowHeight={height} WindowWidth={width}><Grid /></MovingElement>\n                }\n            </div >\n            <div style={{ position: \"absolute\", left: width / 2 - 150, padding: 10, width: 300, backgroundColor: opagueBackground }}>\n                <h2 style={{ textAlign: \"center\", margin: 0 }}>{props.MachineName}</h2>\n            </div>\n            <div style={{ position: \"absolute\", padding: 10, left: width - 220, width: 180, height: height - 20, backgroundColor: opagueBackground }}>\n                <button onClick={() => setMenu(\"options\")} title=\"Options\">Options</button>\n                <MachineCollection height={height - 40} />\n            </div>\n            <div style={{ position: \"absolute\", padding: 10, left: 10, top: 50, width: 300, backgroundColor: opagueBackground }}>\n                <LevelDisplay MultipleInputsAllowed={false} AllowedInputs={allowedInputColors} />\n            </div>\n            <div style={{ position: \"absolute\", padding: 10, height: 80, width: 240, left: width / 2 - 150, top: height - 80, backgroundColor: opagueBackground }}>\n                <Dashboard />\n            </div>\n            {menu === \"options\" &&\n                <div onClick={() => setMenu(\"none\")} style={{ position: \"absolute\", height: \"100%\", width: \"100%\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", background: Constants.MenuBackGround }}>\n                    <GameMenu Close={() => setMenu(\"none\")} />\n                </div>\n            }\n            {dragPreviewElement}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state: GameData) => {\n    const activeMachine = GetActiveMachine(state);\n\n    return {\n        HasActiveMachine: activeMachine !== undefined,\n        MachineName: activeMachine?.Style.Name\n    };\n};\nexport const Game = connect(\n    mapStateToProps,\n    { AddNewMachine, ClearMessages, SetMovingOutput, RemoveMachine }\n)(GameInternal);","import React, { useState } from \"react\";\r\nimport { Props } from \"./Props\";\r\n\r\nexport const Dialog: React.FC<Props> = (props) => {\r\n    const [name, setName] = useState(props.name);\r\n\r\n    function handleKeyUp(event: React.KeyboardEvent<HTMLInputElement>): void\r\n    {\r\n        switch (event.key) {\r\n            case \"Enter\":\r\n                props.close(name);\r\n                break;        \r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    return <div style={{width: 200, margin: 10}}>\r\n        <input onChange={(value) => setName(value.target.value)} onKeyUp={handleKeyUp} value={name} ></input>\r\n        <button onClick={() => props.close(name)}>OK</button>\r\n    </div>;\r\n};","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { SwitchScreen, ChangePlayerName } from \"../../Redux/GameDataReducer/Actions\";\r\nimport { LoadLevel } from \"../../Redux/GameDataReducer/Level/Actions\";\r\nimport { Props } from \"./Props\";\r\nimport { GetActivePlayer } from \"../../Helper/StoreHelper\";\r\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\r\nimport { GetRandomColor, GetLighterColor } from \"../../Helper/ColorHelper\";\r\nimport { Dialog } from \"./Dialog/Dialog\";\r\nimport { LevelState } from \"../../Redux/GameDataReducer/PlayerReducer/LevelData\";\r\nimport { LevelStore } from \"../../Levels/LevelStore\";\r\nimport { LevelModel } from \"../../Levels/LevelModel\";\r\n\r\nconst StartMenuInternal: React.FC<Props> = (props) => {\r\n\r\n    const [borderColor] = useState(GetRandomColor());\r\n    const [dialog, setdialog] = useState<\"none\" | \"changeName\">(\"none\");\r\n    const [backgroundColor] = useState(GetLighterColor(GetRandomColor(), 0.3));\r\n\r\n    return (\r\n        <div style={{ height: \"100%\", width: \"100%\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n            {dialog !== \"none\" && <div style={{ width: 220 }} />}\r\n            <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\r\n                <h1>Contexion</h1>\r\n\r\n                <div style={{ borderColor, backgroundColor, borderWidth: 20, borderStyle: \"solid\", padding: 30, display: \"flex\", flexDirection: \"column\" }}>\r\n                    {props.continueLevel !== undefined && <button className=\"startMenu\" onClick={() => props.LoadLevel(props.continueLevel!.Id)}>Continue with {props.continueLevel.Name}</button>}\r\n                    <button className=\"startMenu\" onClick={() => props.SwitchScreen(\"levelSelect\")}>Select level</button>\r\n                    <button className=\"startMenu\" onClick={() => props.LoadLevel(\"12\")}>Sandbox</button>\r\n                    <button className=\"startMenu\" onClick={() => setdialog(\"changeName\")}>Change player name</button>\r\n                </div>\r\n                <h4> Playing as {props.playerName}</h4>\r\n            </div>\r\n            {dialog === \"changeName\" && <Dialog name={props.playerName} close={(name) => {\r\n                props.ChangePlayerName(name);\r\n                setdialog(\"none\");\r\n            }}></Dialog>}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n    const player = GetActivePlayer(state);\r\n    let continueLevel: LevelModel | undefined = undefined;\r\n    if (player.activeLevel !== undefined) {     \r\n        const data = player.levelData.find((ld) => ld.Id === player.activeLevel);\r\n        if (data?.State === LevelState.InProgress || data?.State === LevelState.NonValidMachineUsed) {\r\n            continueLevel = LevelStore.GetStore().GetLevel(player.activeLevel);\r\n        }\r\n    }\r\n\r\n    return {\r\n        playerName: player.name,\r\n        continueLevel\r\n    };\r\n};\r\n\r\nexport const StartMenu = connect(\r\n    mapStateToProps,\r\n    { SwitchScreen, ChangePlayerName, LoadLevel }\r\n)(StartMenuInternal);\r\n","import { Props } from \"./Props\";\r\nimport React, { useState } from \"react\";\r\nimport { LoadLevel } from \"../../../Redux/GameDataReducer/Level/Actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { LevelState } from \"../../../Redux/GameDataReducer/PlayerReducer/LevelData\";\r\nimport { MachineCanvasHolder } from \"../../Grid/Cell/MachineInstance/MachineDrawer/MachineCanvasHolder\";\r\nimport { GetGrayScaleColor, GetLighterColor, GetOpaqueColor } from \"../../../Helper/ColorHelper\";\r\nimport { Constants } from \"../../Constants\";\r\nimport { MachineStore } from \"../../../MachineStore/MachineStore\";\r\nimport { ChannelModel } from \"../../../Models/ChannelModel\";\r\n\r\nconst LevelPreviewInternal: React.FC<Props> = (props) => {\r\n    const OnClick = () => props.LoadLevel(props.Level.Id);\r\n    const [showLabel, setShowLabel] = useState(props.Data?.LastUsedMachineId !== undefined || props.Level.InputChannels.length !== 0);\r\n\r\n    let color: string;\r\n    let borderColor: string;\r\n\r\n    let outputChannels: ChannelModel[][] = [];\r\n\r\n    if (props.Data?.LastUsedMachineId === undefined) {\r\n        color = \"rgb(200,200,200)\";\r\n        borderColor = \"rgb(160,160,160)\";\r\n    } else {\r\n        var machine = MachineStore.GetStore().GetMachineType(props.Data!.LastUsedMachineId);\r\n        switch (props.Data.State) {\r\n            case LevelState.Completed:\r\n                color = machine.Style.Color;\r\n                borderColor = machine.Style.BorderColor;\r\n                outputChannels = props.Level.OutputChannels.map((oc) => [oc]);\r\n                break;\r\n            case LevelState.InProgress:\r\n            case LevelState.NonValidMachineUsed:\r\n                color = GetLighterColor(GetGrayScaleColor(machine.Style.Color, 0.2), 0.6);\r\n                borderColor = GetLighterColor(GetGrayScaleColor(machine.Style.BorderColor, 0.2), 0.6);\r\n                break;\r\n            case LevelState.NoMachineLinked:\r\n                throw Error(\"State is not linked, but there is a machine linked\")\r\n        }\r\n    }\r\n\r\n    function onHover() {\r\n        if (props.Data?.LastUsedMachineId === undefined && props.Level.InputChannels.length === 0) {\r\n            setShowLabel(true);\r\n        }\r\n    }\r\n\r\n    function onExit() {\r\n        if (props.Data?.LastUsedMachineId === undefined && props.Level.InputChannels.length === 0) {\r\n            setShowLabel(false);\r\n        }\r\n    }\r\n\r\n    const machineStyle = {\r\n        Color: color,\r\n        BorderColor: borderColor,\r\n    }\r\n\r\n    return (<div onMouseOver={onHover} onMouseOut={onExit} style={{ position: \"absolute\", marginLeft: props.Level.Cell.Column * 140 + 50, marginTop: props.Level.Cell.Row * 115 + 20 }}>\r\n        <div onClick={OnClick}  title={props.Level.LevelDescription} style={{ height: Constants.CellSize - 2, width: Constants.CellSize - 2 }}>\r\n            <MachineCanvasHolder IsDefault={false} MachineStyle={machineStyle} BackgroundColor={\"white\"} InputChannels={props.Level.InputChannels} OutputChannels={outputChannels} CellSize={Constants.CellSize} />\r\n            {showLabel && <div style={{ display: \"flex\", position: \"absolute\", height: \"20%\", width: \"100%\", justifyContent: \"center\", alignItems: \"center\", pointerEvents: \"none\" }}>\r\n                <label style={{ fontFamily: \"Comic Sans MS\", background: GetOpaqueColor(\"White\", 0.7) }}>{props.Level.Name}</label>\r\n            </div>}\r\n        </div>\r\n    </div>);\r\n};\r\n\r\nexport const LevelPreview = connect(\r\n    undefined,\r\n    { LoadLevel }\r\n)(LevelPreviewInternal);","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { GameData } from \"../../Redux/GameDataReducer/GameModel\";\r\nimport { Props } from \"./Props\";\r\nimport { SwitchScreen } from \"../../Redux/GameDataReducer/Actions\";\r\nimport { GetActivePlayer } from \"../../Helper/StoreHelper\";\r\nimport { LevelStore } from \"../../Levels/LevelStore\";\r\nimport { LevelModel } from \"../../Levels/LevelModel\";\r\nimport { LevelData, LevelState } from \"../../Redux/GameDataReducer/PlayerReducer/LevelData\";\r\nimport { LevelPreview } from \"./LevelPreview/LevelPreview\";\r\nimport { Move } from \"../../Helper/SetupHelper\";\r\nimport { AreEqual } from \"../../Models/CellModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\n\r\nconst LevelSelectScreenInternal: React.FC<Props> = (props) => {\r\n    const [levelModels, setLevelModels] = useState<{ model: LevelModel; data: LevelData | undefined }[]>([]);\r\n    useEffect(() => {\r\n        const levels = LevelStore.GetStore().GetAllLevels();\r\n        const models = levels.filter((l) => l.Cell.Row >= 0).map((l) => {\r\n            const levelData = props.levels.find((ld) => ld.Id === l.Id);\r\n            return { model: l, data: levelData };\r\n        });\r\n\r\n        const maxColumn = Math.max(...levels.map((l) => l.Cell.Column));\r\n        const maxRow = Math.max(...levels.map((l) => l.Cell.Column));\r\n        const setup = { NumberOfRows: maxRow, NumberOfColumns: maxColumn };\r\n        const completedLevels = models.filter((lm) => lm.data?.State === LevelState.Completed).map((lm) => lm.model);\r\n        for (const completedLevel of completedLevels) {\r\n            for (const direction of completedLevel.OutputChannels.map((oc) => oc.Direction)) {\r\n                let newCell = Move(setup, completedLevel.Cell, direction);\r\n                while (newCell !== undefined) {\r\n                    // eslint-disable-next-line\r\n                    const nextLevel = models.find((cl) => AreEqual(cl.model.Cell, newCell!));\r\n                    if (nextLevel !== undefined) {\r\n                        nextLevel.model.InputChannels.push({ Channel: ChannelColorEnum.Green, Direction: direction, Status: \"Exists\", UseMachineColor: true });\r\n                        break;\r\n                    }\r\n\r\n                    newCell = Move(setup, newCell, direction);\r\n                }\r\n            }\r\n        }\r\n        setLevelModels(models);\r\n    }, [props.levels]);\r\n\r\n    return <div style={{ position: \"absolute\", width: \"100%\" }}>\r\n        <button style={{float: \"right\", marginRight: 10, marginTop: 10}} onClick={() => props.SwitchScreen(\"startMenu\")}>Back</button>\r\n        {levelModels.map((lm) => <LevelPreview Level={lm.model} Data={lm.data} key={lm.model.Id} />)}\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n    var levels = GetActivePlayer(state)!.levelData;\r\n    return {\r\n        levels\r\n    };\r\n};\r\n\r\nexport const LevelSelectScreen = connect(\r\n    mapStateToProps,\r\n    { SwitchScreen }\r\n)(LevelSelectScreenInternal);","import React from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport HTML5Backend from \"react-dnd-html5-backend\";\r\nimport { Game } from \"./Components/Game/Game\";\r\nimport { connect } from \"react-redux\";\r\nimport { GameData } from \"./Redux/GameDataReducer/GameModel\";\r\nimport { Props } from \"./Props\";\r\nimport { StartMenu } from \"./Components/StartMenu/StartMenu\";\r\nimport { LevelSelectScreen } from \"./Components/LevelSelectsScreen/LevelSelectScreen\";\r\n\r\nconst AppInternal: React.FC<Props> = (props) => {\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      {props.screen === \"startMenu\" && <StartMenu />}\r\n      {props.screen === \"levelSelect\" && <LevelSelectScreen />}\r\n      {props.screen === \"playing\" && <Game />}\r\n\r\n    </DndProvider>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: GameData) => {\r\n  return {\r\n      screen: state.screen,\r\n    };\r\n};\r\n\r\nexport const App = connect(\r\n  mapStateToProps\r\n)(AppInternal);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport {App} from \"./App\";\r\nimport \"./index.css\";\r\nimport { AppStore } from \"./Redux/Store\";\r\n\r\nReactDOM.render(\r\n    <Provider store={AppStore}>\r\n        <App />\r\n    </Provider>\r\n    , document.getElementById(\"root\"));\r\n"],"sourceRoot":""}