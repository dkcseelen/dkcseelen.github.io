(window.webpackJsonpdseoefen=window.webpackJsonpdseoefen||[]).push([[0],{10:function(e,t,n){e.exports=n(16)},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a,i=n(0),r=n.n(i),o=n(9),s=n.n(o),l=(n(15),n(7),n(1)),u=n(2),h=n(6),c=n(4),p=n(3),d=n(5);!function(e){e.Green="green",e.Red="red",e.Blue="blue",e.Yellow="yellow"}(a||(a={}));var C,f=function(){function e(){Object(l.a)(this,e),this.Id=2,this.Color="green",this.BorderColor="lightgreen",this.NumberOfOutputs=1,this.NumberOfInputs=1,this.Name="Move",this.Type="Default"}return Object(u.a)(e,[{key:"Act",value:function(e){var t=[];return t.push({Content:e.Content,Channel:a.Green}),t}}]),e}(),v=function(){function e(){Object(l.a)(this,e),this.Id=1,this.Color="darkgreen",this.BorderColor="red",this.NumberOfOutputs=1,this.NumberOfInputs=1,this.Name="Start",this.Type="Default"}return Object(u.a)(e,[{key:"Act",value:function(e){var t=[];return t.push({Content:e.Content,Channel:a.Green}),t}}]),e}(),m=function(){function e(){Object(l.a)(this,e),this.machines=void 0,this.machines=[],this.init()}return Object(u.a)(e,[{key:"init",value:function(){this.machines=[],this.machines.push(new v),this.machines.push(new f)}},{key:"GetMachine",value:function(e,t){var n=!0,a=!1,i=void 0;try{for(var r,o=this.machines[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;if(s.Id===e&&s.Type===t)return s}}catch(l){a=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}throw new Error("No machine found with id "+e+" and type "+t)}}]),e}();!function(e){e.Up="UP",e.Down="DOWN",e.Left="LEFT",e.Right="RIGHT"}(C||(C={}));var b=function(){function e(){Object(l.a)(this,e),this.GridSetup=void 0,this.LoadSetup()}return Object(u.a)(e,[{key:"LoadGridSetup",value:function(){if(void 0===this.GridSetup)throw new Error("Setup not loaded");return this.GridSetup}},{key:"LoadSetup",value:function(){var e=new m;this.GridSetup={NumberOfRows:3,NumberOfColumns:4,MachineInstances:[{Cell:{Row:0,Column:1},Channels:[{Channel:a.Green,Direction:C.Down}],InputChannels:void 0,Machine:e.GetMachine(1,"Default")},{Cell:{Row:1,Column:1},Channels:[{Channel:a.Green,Direction:C.Right}],InputChannels:void 0,Machine:e.GetMachine(2,"Default")},{Cell:{Row:1,Column:2},Channels:[{Channel:a.Green,Direction:C.Down}],InputChannels:void 0,Machine:e.GetMachine(2,"Default")}]}}}]),e}(),g=function e(){Object(l.a)(this,e)};g.CellSize=100;var O=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=g.CellSize/5*3,t=e/10,n={position:"absolute",height:e,width:e,backgroundColor:this.props.Machine.Color,borderStyle:"solid",borderColor:this.props.Machine.BorderColor,borderWidth:t,borderRadius:"50%",marginLeft:(g.CellSize-e)/2-t,marginTop:(g.CellSize-e)/2-t};return r.a.createElement("div",{style:n})}}]),t}(r.a.Component),y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(c.a)(t).call(this,e))).onClicked=n.onClicked.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={position:"absolute",height:g.CellSize/50*4,width:g.CellSize/50*20,backgroundColor:this.props.ChannelMap.Channel,marginLeft:g.CellSize/50*27,marginTop:g.CellSize/50*23},t="";switch(this.props.ChannelMap.Direction){case C.Down:t="rotate(90deg)";break;case C.Left:t="rotate(180deg)";break;case C.Up:t="rotate(270deg)";break;case C.Right:t="rotate(0deg)"}var n={transform:t,height:g.CellSize,width:g.CellSize};return r.a.createElement("div",{style:n},r.a.createElement("div",{style:e,onClick:this.onClicked}))}},{key:"onClicked",value:function(e){var t=C.Left;switch(this.props.ChannelMap.Direction){case C.Down:t=C.Left;break;case C.Left:t=C.Up;break;case C.Up:t=C.Right;break;case C.Right:t=C.Down}this.props.OnChanged({Direction:t,Channel:this.props.ChannelMap.Channel})}}]),t}(r.a.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.MachineInstance.Channels.map(function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(y,{OnChanged:function(t){return e.OnChannelChanged(t,n)},ChannelMap:t}))});return r.a.createElement("div",{draggable:!0},r.a.createElement(O,{Machine:this.props.MachineInstance.Machine}),t)}},{key:"OnChannelChanged",value:function(e,t){var n={Cell:this.props.MachineInstance.Cell,Machine:this.props.MachineInstance.Machine,Channels:this.props.MachineInstance.Channels.map(function(n,a){return a===t?e:n}),InputChannels:this.props.MachineInstance.InputChannels};this.props.OnChanged(n)}}]),t}(r.a.Component),M=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(c.a)(t).call(this,e))).onDrop=n.onDrop.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={height:g.CellSize,width:g.CellSize,border:"1px solid #999",float:"left",marginTop:-1,marginRight:-1,position:"relative"};return r.a.createElement("div",{style:e,onDrop:this.onDrop},void 0!==this.props.message?this.props.message.Message:"",void 0!==this.props.machineInstance?r.a.createElement(w,{MachineInstance:this.props.machineInstance,OnChanged:this.props.OnChanged}):".")}},{key:"onDrop",value:function(e){}}]),t}(r.a.Component),S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(c.a)(t).call(this,e))).ChannelChanged=n.ChannelChanged.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.GridSetup.NumberOfRows;t++){for(var n=[],a=0;a<this.props.GridSetup.NumberOfColumns;a++){var i=void 0,o=void 0,s=!0,l=!1,u=void 0;try{for(var h,c=this.props.GridSetup.MachineInstances[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){var p=h.value;p.Cell.Column===a&&p.Cell.Row===t&&(i=p)}}catch(g){l=!0,u=g}finally{try{s||null==c.return||c.return()}finally{if(l)throw u}}var d=!0,C=!1,f=void 0;try{for(var v,m=this.props.Messages[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var b=v.value;b.Cell.Column===a&&b.Cell.Row===t&&(o=b)}}catch(g){C=!0,f=g}finally{try{d||null==m.return||m.return()}finally{if(C)throw f}}n.push(r.a.createElement(M,{key:a,machineInstance:i,message:o,OnChanged:this.ChannelChanged}))}e.push(r.a.createElement("div",{key:t},n))}return r.a.createElement("div",null,e)}},{key:"ChannelChanged",value:function(e){var t={NumberOfColumns:this.props.GridSetup.NumberOfColumns,NumberOfRows:this.props.GridSetup.NumberOfRows,MachineInstances:this.props.GridSetup.MachineInstances.map(function(t){return t.Cell.Column===e.Cell.Column&&t.Cell.Row===e.Cell.Row?e:t})};this.props.OnChanged(t)}}]),t}(r.a.Component),j=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(h.a)(this,Object(c.a)(t).call(this,e))).startMachines=[],n.inputChanged=n.inputChanged.bind(Object(p.a)(n)),n.startComputation=n.startComputation.bind(Object(p.a)(n)),n.GetStartMachines=n.GetStartMachines.bind(Object(p.a)(n)),n.CalculateNextMessages=n.CalculateNextMessages.bind(Object(p.a)(n)),n.GridSetupChanged=n.GridSetupChanged.bind(Object(p.a)(n)),n.Move=n.Move.bind(Object(p.a)(n));var a=(new b).LoadGridSetup();return n.state={Computing:!1,Messages:[],GridSetup:a,Input:"",Output:""},n.GetStartMachines(),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"inputChanged",value:function(e){this.setState({Input:e.target.value})}},{key:"startComputation",value:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var i,r=this.startMachines[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.Channels[0].Direction,l={Message:this.state.Input,Direction:s,Cell:o.Cell};e.push(l)}}catch(u){n=!0,a=u}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}this.setState({Computing:!0,Messages:e}),setTimeout(this.CalculateNextMessages,1e3)}},{key:"GetStartMachines",value:function(){this.startMachines=[];var e=!0,t=!1,n=void 0;try{for(var a,i=this.state.GridSetup.MachineInstances[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;1===r.Machine.Id&&"Default"===r.Machine.Type&&this.startMachines.push(r)}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"CalculateNextMessages",value:function(){var e=this,t=[],n=!0,i=!1,r=void 0;try{for(var o,s=function(){for(var n=o.value,i=void 0,r=n.Cell;void 0===i;){if(void 0===(r=e.Move(r,n.Direction)))return e.setState({Output:n.Message,Computing:!1,Messages:[]}),{v:void 0};i=e.state.GridSetup.MachineInstances.find(function(e){return e.Cell.Column===r.Column&&e.Cell.Row===r.Row})}var s=a.Green;i.Machine.NumberOfInputs;var l=i.Machine.Act({Content:n.Message,Channel:s}),u=!0,h=!1,c=void 0;try{for(var p,d=function(){var e=p.value,n=i.Channels.find(function(t){return t.Channel===e.Channel});if(void 0===n)throw Error("Channelmap "+e.Channel+"undefined");var a={Cell:i.Cell,Message:e.Content,Direction:n.Direction};t.push(a)},C=l[Symbol.iterator]();!(u=(p=C.next()).done);u=!0)d()}catch(f){h=!0,c=f}finally{try{u||null==C.return||C.return()}finally{if(h)throw c}}},l=this.state.Messages[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=s();if("object"===typeof u)return u.v}}catch(h){i=!0,r=h}finally{try{n||null==l.return||l.return()}finally{if(i)throw r}}this.setState({Messages:t}),setTimeout(this.CalculateNextMessages,1e3)}},{key:"Move",value:function(e,t){switch(t){case C.Down:if(e.Row===this.state.GridSetup.NumberOfRows-1)return;return{Column:e.Column,Row:e.Row+1};case C.Up:if(0===e.Row)return;return{Column:e.Column,Row:e.Row-1};case C.Right:if(e.Column===this.state.GridSetup.NumberOfColumns-1)return;return{Column:e.Column+1,Row:e.Row};case C.Left:if(0===e.Row)return;return{Column:e.Column-1,Row:e.Row}}}},{key:"render",value:function(){var e={height:this.state.GridSetup.NumberOfRows*(g.CellSize+2),width:this.state.GridSetup.NumberOfColumns*(g.CellSize+2)};return r.a.createElement("div",null,"Hello World",r.a.createElement("div",{className:"App",style:e},r.a.createElement(S,{GridSetup:this.state.GridSetup,Computing:this.state.Computing,Messages:this.state.Messages,OnChanged:this.GridSetupChanged})),r.a.createElement("input",{value:this.state.Input,onChange:this.inputChanged}),r.a.createElement("button",{onClick:this.startComputation,title:"start"},"Start"),r.a.createElement("label",null,"Output: ",this.state.Output))}},{key:"GridSetupChanged",value:function(e){this.setState({GridSetup:e})}}]),t}(r.a.Component),k=function(){return r.a.createElement(j,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,t,n){}},[[10,1,2]]]);
//# sourceMappingURL=main.af643792.chunk.js.map