(window.webpackJsonpdseoefen=window.webpackJsonpdseoefen||[]).push([[0],{22:function(e,t,n){e.exports=n(32)},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(17),s=n.n(o),u=n(9),l=n(20),c=n(2),h=n(3),p=n(7),d=n(5),C=n(4),f=n(6);!function(e){e.Green="green",e.Red="red",e.Blue="blue",e.Yellow="yellow"}(a||(a={}));var m,v=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[],n="*"+e.Content;return t.push({Content:n,Channel:a.Green}),t}},this.Id={Id:10,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{BorderColor:"blue",Color:"grey",Name:"Add *",InputChannels:[],OutputChannels:[a.Green],Description:"Puts a star in front of the string. There is guaranteed not to be a star in the input"}}}]),e}(),g=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[],n="0"+e.Content;return t.push({Content:n,Channel:a.Green}),t}},this.Id={Id:11,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{BorderColor:"yellow",Color:"darkorange",Name:"Add 0",InputChannels:[],OutputChannels:[a.Green],Description:"Puts a zero in front of the string"}}}]),e}(),y=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[],n=e.Content.length>1&&e.Content[0]===e.Content[1]?a.Green:a.Red;return t.push({Content:e.Content,Channel:n}),t}},this.Id={Id:9,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{BorderColor:"red",Color:"green",Name:"Compare",InputChannels:[],OutputChannels:[a.Green,a.Red],Description:"Compares the first two characters in the string. If they are the same, exits green. If they are different exits red"}}}]),e}(),b=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[],n=e.Content.length>0?e.Content[0]+e.Content:"";return t.push({Content:n,Channel:a.Green}),t}},this.Id={Id:6,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{BorderColor:"green",Color:"yellow",Name:"Copy",InputChannels:[],OutputChannels:[a.Green],Description:"Copies the first character of the string and puts it in front of the string"}}}]),e}(),S=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[],n=e.Content.length>0?e.Content.slice(1):"";return t.push({Content:n,Channel:a.Green}),t}},this.Id={Id:7,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{BorderColor:"red",Color:"red",Name:"Delete",InputChannels:[],OutputChannels:[a.Green],Description:"Deletes the first character of the string"}}}]),e}(),O=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:a.Green}),t}},this.Id={Id:0,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Color:"white",BorderColor:"green",OutputChannels:[a.Green],InputChannels:[],Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"}}}]),e}(),w=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[],n="";if(e.Content.length>0){var r=e.Content[0];n=r>="0"&&r<="8"||r>="a"&&r<"z"||r>="A"&&r<"Z"?String.fromCharCode(r.charCodeAt(0)+1)+e.Content.slice(1):"9"===r?"0"+e.Content.slice(1):"z"===r?"a"+e.Content.slice(1):"Z"===r?"A"+e.Content.slice(1):e.Content}return t.push({Content:n,Channel:a.Green}),t}},this.Id={Id:12,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{BorderColor:"DodgerBlue",Color:"MediumVioletRed",Name:"Increment",InputChannels:[],OutputChannels:[a.Green],Description:"Increases a number in front of the string by 1, makes as letter the next letter in the alphabet. 9 becomes 0, z becomes a. All other starting characters are not changed"}}}]),e}(),G=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:a.Green}),t}},this.Id={Id:5,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Color:"green",BorderColor:"lightgreen",OutputChannels:[a.Green],InputChannels:[],Name:"Move",Description:"Does nothing with the string, only used to get the message to the right place"}}}]),e}(),I=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t=[];return t.push({Content:e.Content,Channel:a.Green}),t}},this.Id={Id:1,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{Color:"white",BorderColor:"red",OutputChannels:[a.Green],InputChannels:[],Name:"Start",Description:"Starting point of the computation. Acts as a move machine for all other purposes"}}}]),e}(),M=function(){function e(){Object(c.a)(this,e),this.actor={Act:function(e){var t,n=[];return t=e.Content.length>1?e.Content.slice(1)+e.Content.slice(0,1):e.Content,n.push({Content:t,Channel:a.Green}),n}},this.Id={Id:8,Type:"Default"}}return Object(h.a)(e,[{key:"GetActor",value:function(){return this.actor}},{key:"GetType",value:function(){return{BorderColor:"blue",Color:"cyan",Name:"Rotate",InputChannels:[],OutputChannels:[a.Green],Description:"Removes the first character of the string, and adds it to the end of the string"}}}]),e}(),k=function(){function e(){Object(c.a)(this,e),this.machines=void 0,this.machines=[],this.init()}return Object(h.a)(e,[{key:"init",value:function(){this.machines=[],this.machines.push(new O),this.machines.push(new I),this.machines.push(new G),this.machines.push(new b),this.machines.push(new S),this.machines.push(new M),this.machines.push(new y),this.machines.push(new v),this.machines.push(new g),this.machines.push(new w)}},{key:"FindMachine",value:function(e){var t=this.machines.find(function(t){return t.Id.Id===e.Id&&t.Id.Type===e.Type});if(void 0===t)throw new Error("No machine found with id "+e.Id+" and type "+e.Type);return t}},{key:"GetActor",value:function(e){return this.FindMachine(e).GetActor()}},{key:"GetMachineType",value:function(e){return this.FindMachine(e).GetType()}},{key:"GetAllMachine",value:function(){return this.machines}}],[{key:"GetStore",value:function(){return void 0===e.machineStore&&(e.machineStore=new e),e.machineStore}}]),e}();k.machineStore=void 0,function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(m||(m={}));var E,j=function(){function e(t){Object(c.a)(this,e),this.setup=void 0,this.machines=[],this.store=void 0,this.setup=t,this.store=k.GetStore(),this.GetMachines()}return Object(h.a)(e,[{key:"NewSetup",value:function(e){this.setup=e,this.GetMachines()}},{key:"GetMachines",value:function(){var e=this;this.machines=this.setup.MachineInstances.map(function(t){return{id:t.Id,actor:e.store.GetActor(t.MachineId)}})}},{key:"GetStartMachines",value:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var r,i=this.setup.MachineInstances[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.MachineId.Id<4&&"Default"===o.MachineId.Type&&e.push(o)}}catch(s){n=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return e}},{key:"GetStartMachine",value:function(e){var t=0;switch(e){case a.Green:t=0;break;case a.Red:t=1;break;case a.Blue:t=2;break;case a.Yellow:t=3}return this.setup.MachineInstances.find(function(e){return e.MachineId.Id===t&&"Default"===e.MachineId.Type})}},{key:"StartComputation",value:function(e){var t=[],n=this.GetStartMachine(e.Channel);if(void 0===n)return[];var a=n.Channels[0].Direction,r={Content:e.Content,Direction:a,Cell:n.Cell};return t.push(r),t}},{key:"GetNextMessages",value:function(e){var t=this,n=[],r=!0,i=!1,o=void 0;try{for(var s,u=function(){for(var e=s.value,r=void 0,i=e.Cell;void 0===r&&void 0!==(i=t.Move(i,e.Direction));)r=t.setup.MachineInstances.find(function(e){return e.Cell.Column===i.Column&&e.Cell.Row===i.Row});if(void 0===i)return n.push({Cell:void 0,Direction:e.Direction,Content:e.Content}),"continue";var o=a.Green,u=t.machines.find(function(e){return e.id===r.Id}).actor.Act({Content:e.Content,Channel:o}),l=!0,c=!1,h=void 0;try{for(var p,d=function(){var e=p.value,t=r.Channels.find(function(t){return t.Channel===e.Channel});if(void 0===t)throw Error("Channelmap "+e.Channel+"undefined");var a={Cell:r.Cell,Content:e.Content,Direction:t.Direction};n.push(a)},C=u[Symbol.iterator]();!(l=(p=C.next()).done);l=!0)d()}catch(f){c=!0,h=f}finally{try{l||null==C.return||C.return()}finally{if(c)throw h}}},l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)u()}catch(c){i=!0,o=c}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}},{key:"Move",value:function(e,t){switch(t){case m.Down:if(e.Row===this.setup.NumberOfRows-1)return;return{Column:e.Column,Row:e.Row+1};case m.Up:if(0===e.Row)return;return{Column:e.Column,Row:e.Row-1};case m.Right:if(e.Column===this.setup.NumberOfColumns-1)return;return{Column:e.Column+1,Row:e.Row};case m.Left:if(0===e.Column)return;return{Column:e.Column-1,Row:e.Row}}}}]),e}(),T=function(){return void 0===E&&(E=N()),E},N=function(){return{NumberOfColumns:6,NumberOfRows:5,MachineInstances:[{Cell:{Row:2,Column:0},MachineId:{Id:0,Type:"Default"},Channels:[{Direction:m.Right,Channel:a.Green}],InputChannels:[],Id:1}]}},D={AllowedMachines:[],Description:"Sandbox level, no specific goals",Name:"Sandbox",Tests:[]},A=function e(){Object(c.a)(this,e)};A.CellSize=100;var x,R=function(e){var t={marginLeft:5,marginRight:5};return i.a.createElement("div",null,i.a.createElement("button",{style:t,onClick:function(){e.valueChanged(e.value-1)}},"-"),i.a.createElement("label",null,e.value),i.a.createElement("button",{style:t,onClick:function(){e.valueChanged(e.value+1)}},"+"))},L=function(e){return i.a.createElement("div",null,i.a.createElement("label",{title:"Step time in tenths of seconds, lower for faster animations"},"Step Time"),i.a.createElement(R,{value:e.StepTime,valueChanged:e.OnStepTimeChanged}))},P=n(21),B=n(11),z="MachineInstance",F="NewMachine",U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).onClicked=n.onClicked.bind(Object(C.a)(n)),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=A.CellSize-2,t={position:"absolute",height:e/50*4,width:e/50*19,marginLeft:e/50*27.5,marginTop:e/50*22.5,backgroundColor:this.props.ChannelMap.Channel,borderStyle:"solid",borderWidth:"1px",pointerEvents:"visible"},n="";switch(this.props.ChannelMap.Direction){case m.Down:n="rotate(90deg)";break;case m.Left:n="rotate(180deg)";break;case m.Up:n="rotate(270deg)";break;case m.Right:n="rotate(0deg)"}var a={transform:n,height:e,width:e,position:"absolute",pointerEvents:"none"};return i.a.createElement("div",{style:a},i.a.createElement("div",{style:t,onClick:this.onClicked}))}},{key:"onClicked",value:function(e){if(void 0!==this.props.OnChanged){var t=m.Left;switch(this.props.ChannelMap.Direction){case m.Down:t=m.Left;break;case m.Left:t=m.Up;break;case m.Up:t=m.Right;break;case m.Right:t=m.Down}this.props.OnChanged({Direction:t,Channel:this.props.ChannelMap.Channel})}}}]),t}(i.a.Component),K=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=A.CellSize/5*3,t=e/10,n={height:e,width:e,backgroundColor:this.props.Machine.Color,borderStyle:"solid",borderColor:this.props.Machine.BorderColor,borderWidth:t,borderRadius:"50%",marginLeft:(A.CellSize-e)/2-t,marginTop:(A.CellSize-e)/2-t};return i.a.createElement("div",{style:n})}}]),t}(i.a.Component),J=function(e){var t=Object(u.c)({item:{type:z,id:e.MachineInstance.Id},end:function(t,n){n.didDrop()||e.OnRemoved(e.MachineInstance.Id)},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(B.a)(t,2)[1],a=e.MachineInstance.Channels.map(function(t,n){return i.a.createElement("div",{key:n},i.a.createElement(U,{OnChanged:function(t){return function(t,n){var a={Cell:e.MachineInstance.Cell,MachineId:e.MachineInstance.MachineId,Channels:e.MachineInstance.Channels.map(function(e,a){return a===n?t:e}),InputChannels:e.MachineInstance.InputChannels,Id:e.MachineInstance.Id};e.OnChanged(a)}(t,n)},ChannelMap:t}))}),r={height:A.CellSize-2,width:A.CellSize-2,margin:1},o=k.GetStore().GetMachineType(e.MachineInstance.MachineId);return i.a.createElement("div",{ref:n,style:r},i.a.createElement("div",{style:{position:"absolute"}},i.a.createElement(K,{Machine:o})),a)},W=function(e){var t;if(""===e)t="<Empty>";else{t=e;for(var n=0;-1!==(n=t.indexOf("<",n));){var a=t.indexOf(">",n);t=t.substring(0,n)+"?"+t.substring(a+1)}}return t},H=function(e){var t,n=Object(u.d)({accept:[z,F],drop:function(t,n){switch(t.type){case z:e.OnMovedMachine(n.getItem().id,e.location);break;case F:var a=n.getItem();e.OnNewMachine(a.id,e.location)}}}),a=Object(B.a)(n,2)[1],r={height:A.CellSize,width:A.CellSize,border:"1px solid #999",float:"left",marginTop:-1,marginRight:-1,position:"relative"};return void 0!==e.message&&(t=W(e.message.Content)),i.a.createElement("div",{style:r,ref:a},void 0!==t&&t,void 0!==e.machineInstance?i.a.createElement(J,{MachineInstance:e.machineInstance,OnChanged:e.OnChanged,OnRemoved:e.OnMachineRemoved}):"")},Y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).store=void 0,n.ChannelChanged=n.ChannelChanged.bind(Object(C.a)(n)),n.MachineMoved=n.MachineMoved.bind(Object(C.a)(n)),n.MachineAdded=n.MachineAdded.bind(Object(C.a)(n)),n.MachineRemoved=n.MachineRemoved.bind(Object(C.a)(n)),n.store=k.GetStore(),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.GridSetup.NumberOfRows;t++){for(var n=[],a=0;a<this.props.GridSetup.NumberOfColumns;a++){var r=void 0,o=void 0,s=!0,u=!1,l=void 0;try{for(var c,h=this.props.GridSetup.MachineInstances[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var p=c.value;p.Cell.Column===a&&p.Cell.Row===t&&(r=p)}}catch(y){u=!0,l=y}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}var d=!0,C=!1,f=void 0;try{for(var m,v=this.props.Messages[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var g=m.value;g.Cell.Column===a&&g.Cell.Row===t&&(o=g)}}catch(y){C=!0,f=y}finally{try{d||null==v.return||v.return()}finally{if(C)throw f}}n.push(i.a.createElement(H,{key:a,machineInstance:r,message:o,OnChanged:this.ChannelChanged,OnMovedMachine:this.MachineMoved,OnNewMachine:this.MachineAdded,OnMachineRemoved:this.MachineRemoved,location:{Row:t,Column:a}}))}e.push(i.a.createElement("div",{key:t},n))}return i.a.createElement("div",null,e)}},{key:"ChannelChanged",value:function(e){var t={NumberOfColumns:this.props.GridSetup.NumberOfColumns,NumberOfRows:this.props.GridSetup.NumberOfRows,MachineInstances:this.props.GridSetup.MachineInstances.map(function(t){return t.Cell.Column===e.Cell.Column&&t.Cell.Row===e.Cell.Row?e:t})};this.props.OnChanged(t)}},{key:"MachineMoved",value:function(e,t){var n=this.props.GridSetup.MachineInstances.findIndex(function(t){return t.Id===e});this.props.GridSetup.MachineInstances[n].Cell=t,this.props.OnChanged(this.props.GridSetup)}},{key:"MachineRemoved",value:function(e){this.props.GridSetup.MachineInstances=this.props.GridSetup.MachineInstances.filter(function(t){return t.Id!==e}),this.props.OnChanged(this.props.GridSetup)}},{key:"MachineAdded",value:function(e,t){var n=this.store.GetMachineType(e),a=[],r=m.Up,i=!0,o=!1,s=void 0;try{for(var u,l=n.OutputChannels[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;a.push({Channel:c,Direction:r}),r++}}catch(p){o=!0,s=p}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}var h={Cell:t,MachineId:e,Channels:a,InputChannels:[],Id:(0===this.props.GridSetup.MachineInstances.length?0:Math.max.apply(Math,Object(P.a)(this.props.GridSetup.MachineInstances.map(function(e){return e.Id}))))+1};this.props.GridSetup.MachineInstances.push(h),this.props.OnChanged(this.props.GridSetup)}}]),t}(i.a.Component);!function(e){e[e.NotChecked=0]="NotChecked",e[e.NotFullfilled=1]="NotFullfilled",e[e.Fullfilled=2]="Fullfilled",e[e.NotMatched=3]="NotMatched"}(x||(x={}));var Z=function(e){return i.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.AllowedInputColors.length>1?i.a.createElement("select",{value:e.Message.Channel,style:{backgroundColor:e.Message.Channel},onChange:function(t){e.MessageChanged({Content:e.Message.Content,Channel:t.target.value})}},e.AllowedInputColors.map(function(e,t){return i.a.createElement("option",{value:e,key:t,style:{backgroundColor:e}})})):i.a.createElement("div",{style:{backgroundColor:e.Message.Channel,width:10}}),i.a.createElement("input",{value:e.Message.Content,onChange:function(t){e.MessageChanged({Content:t.target.value,Channel:e.Message.Channel})}}))},V=function(e){var t={display:"flex",flexFlow:"row",justifyContent:e.Input?"flex-start":"flex-end",marginBottom:1},n={backgroundColor:e.Message.Channel,width:8,marginLeft:5,marginRight:5},a={display:"flex",flexFlow:"row"};switch(e.Status){case x.Fullfilled:a.backgroundColor="#d9ffb3";break;case x.NotMatched:a.border="solid red",a.backgroundColor="#ffb3b3"}return i.a.createElement("div",{style:t},i.a.createElement("div",{style:a},e.Input&&i.a.createElement("div",{style:n}),i.a.createElement("label",null,W(e.Message.Content)),!e.Input&&i.a.createElement("div",{style:n})))},q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).InputChanged=n.InputChanged.bind(Object(C.a)(n)),n.AddInput=n.AddInput.bind(Object(C.a)(n)),n.DeleteInput=n.DeleteInput.bind(Object(C.a)(n)),n.Play=n.Play.bind(Object(C.a)(n)),n.state={Inputs:[{Content:"",Channel:a.Green}],Outputs:[]},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"InputChanged",value:function(e,t){var n=this.state.Inputs;n[e]=t,this.setState({Inputs:n})}},{key:"AddInput",value:function(){var e={Channel:a.Green,Content:""},t=this.state.Inputs;t.push(e),this.setState({Inputs:t})}},{key:"DeleteInput",value:function(e){var t=this.state.Inputs;t.splice(e,1),this.setState({Inputs:t})}},{key:"Play",value:function(){var e=this;this.props.PlayTest(this.state.Inputs).then(function(t){e.setState({Outputs:t})})}},{key:"render",value:function(){for(var e=this,t=[],n=0,a=function(a){t.push(i.a.createElement("div",{key:n++},i.a.createElement(Z,{Message:e.state.Inputs[a],AllowedInputColors:e.props.AllowedInputColors,MessageChanged:function(t){return e.InputChanged(a,t)}}),e.state.Inputs.length>1&&i.a.createElement("button",{onClick:function(){return e.DeleteInput(a)}},"Delete")));var r;r=e.state.Outputs.filter(function(e){return e.Order===a}).map(function(e,t){return i.a.createElement(V,{Message:e,Input:!1,key:n++,Status:x.NotChecked})}),t=t.concat(r)},r=0;r<this.state.Inputs.length;r++)a(r);return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.Play},"Play"),i.a.createElement("div",null,t,this.props.MultipleInputs&&i.a.createElement("button",{onClick:this.AddInput},"Add input")))}}]),t}(i.a.Component),Q=function(e){for(var t=e.Test.inputs,n=e.Test.outputs,a=[],r=0,o=function(o){a.push(i.a.createElement(V,{Message:t[o],Input:!0,key:r++,Status:x.NotChecked}));var s=n.filter(function(e){return e.Order===o}),u=void 0;void 0!==e.ActualOutputs&&(u=e.ActualOutputs.filter(function(e){return e.Order===o}));for(var l=function(e){var t=s[e],n=x.NotChecked;if(void 0!==u){var o=u.findIndex(function(e){return e.Channel===t.Channel&&e.Content===t.Content});o>-1?(n=x.Fullfilled,u.splice(o,1)):n=x.NotFullfilled}a=a.concat(i.a.createElement(V,{Message:s[e],Input:!1,key:r++,Status:n}))},c=0;c<s.length;c++)l(c);void 0!==u&&(a=a.concat(u.map(function(e){return i.a.createElement(V,{Message:e,Input:!1,key:r++,Status:x.NotMatched})})))},s=0;s<t.length;s++)o(s);return i.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:0,borderBottom:"solid 0.5px",margin:5}},i.a.createElement("button",{onClick:function(){e.OnPlay(e.Test)}},"Play"),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},a))},X=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).testStarted=n.testStarted.bind(Object(C.a)(n)),n.state={ActualOutputs:[]},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"testStarted",value:function(e,t){var n=this;this.props.PlayTest(e.inputs).then(function(e){var a=n.state.ActualOutputs;a[t]=e,n.setState({ActualOutputs:a})}).catch(function(){n.setState({ActualOutputs:[]})})}},{key:"render",value:function(){var e=this,t=this.props.Level.Tests.map(function(t,n){return i.a.createElement(Q,{Test:t,OnPlay:function(t){return e.testStarted(t,n)},key:n,ActualOutputs:e.state.ActualOutputs[n]})});return i.a.createElement("div",{style:{padding:10}},i.a.createElement("b",null,this.props.Level.Name),i.a.createElement("br",null),i.a.createElement("i",null,this.props.Level.Description),0===this.props.Level.Tests.length&&i.a.createElement(q,{PlayTest:this.props.PlayTest,AllowedInputColors:this.props.AllowedInputs,MultipleInputs:this.props.MultipleInputsAllowed}),t)}}]),t}(i.a.Component),$=function(e){return i.a.createElement("div",{onClick:function(){return e.LevelClicked(e.Level)}},i.a.createElement("label",{title:e.Level.Description},e.Level.Name))},_={AllowedMachines:[1,5,6,7,8,9,10,11,12],Description:"The machine should append the length of the input string to the string",Name:"AppendLength",Tests:[{inputs:[{Channel:a.Green,Content:"four"}],outputs:[{Order:0,Channel:a.Green,Content:"four4"}]},{inputs:[{Channel:a.Green,Content:"aabccd"}],outputs:[{Order:0,Channel:a.Green,Content:"aabccd6"}]},{inputs:[{Channel:a.Green,Content:"1"}],outputs:[{Order:0,Channel:a.Green,Content:"11"}]},{inputs:[{Channel:a.Green,Content:""}],outputs:[{Order:0,Channel:a.Green,Content:"0"}]},{inputs:[{Channel:a.Green,Content:"This is hard"}],outputs:[{Order:0,Channel:a.Green,Content:"This is hard12"}]},{inputs:[{Channel:a.Green,Content:"This might even be harder"}],outputs:[{Order:0,Channel:a.Green,Content:"This might even be harder25"}]}]},ee={AllowedMachines:[1,5,6,7,8,9,10,11,12],Description:"The machine should return the length of the input string",Name:"GetLength",Tests:[{inputs:[{Channel:a.Green,Content:"four"}],outputs:[{Order:0,Channel:a.Green,Content:"4"}]},{inputs:[{Channel:a.Green,Content:"aabccd"}],outputs:[{Order:0,Channel:a.Green,Content:"6"}]},{inputs:[{Channel:a.Green,Content:"1"}],outputs:[{Order:0,Channel:a.Green,Content:"1"}]},{inputs:[{Channel:a.Green,Content:""}],outputs:[{Order:0,Channel:a.Green,Content:"0"}]},{inputs:[{Channel:a.Green,Content:"This is hard"}],outputs:[{Order:0,Channel:a.Green,Content:"12"}]},{inputs:[{Channel:a.Green,Content:"This might even be harder"}],outputs:[{Order:0,Channel:a.Green,Content:"25"}]}]},te={AllowedMachines:[1,5,6,7,8,9,10,11,12],Description:"The machine should exit green is the first character is a number, exit red if it is a letter and exit blue otherwise",Name:"GetType",Tests:[{inputs:[{Channel:a.Green,Content:"42"}],outputs:[{Order:0,Channel:a.Green,Content:"42"}]},{inputs:[{Channel:a.Green,Content:"this starts with a letter"}],outputs:[{Order:0,Channel:a.Red,Content:"this starts with a letter"}]},{inputs:[{Channel:a.Green,Content:",#@%!"}],outputs:[{Order:0,Channel:a.Blue,Content:",#@%!"}]},{inputs:[{Channel:a.Green,Content:""}],outputs:[{Order:0,Channel:a.Blue,Content:""}]}]},ne={AllowedMachines:[1,5,6,7,8,9,10],Description:"The machine should exit green if the message is empty, otherwise exit red",Name:"IsEmpty",Tests:[{inputs:[{Channel:a.Green,Content:""}],outputs:[{Order:0,Channel:a.Green,Content:""}]},{inputs:[{Channel:a.Green,Content:"abc"}],outputs:[{Order:0,Channel:a.Red,Content:"abc"}]}]},ae={AllowedMachines:[1,5,6,7,8,9,10,11,12],Description:"The machine should keep all numbers in the input string, and remove all other characters",Name:"KeepNumbers",Tests:[{inputs:[{Channel:a.Green,Content:"42"}],outputs:[{Order:0,Channel:a.Green,Content:"42"}]},{inputs:[{Channel:a.Green,Content:"fortytwo"}],outputs:[{Order:0,Channel:a.Green,Content:""}]},{inputs:[{Channel:a.Green,Content:""}],outputs:[{Order:0,Channel:a.Green,Content:""}]},{inputs:[{Channel:a.Green,Content:"1 and 1 is"}],outputs:[{Order:0,Channel:a.Blue,Content:"11"}]}]},re={AllowedMachines:[1,5,6,7,8,9,10,11,12],Description:"The machine should increase the input number by 1. Input only contains digits",Name:"PlusOne",Tests:[{inputs:[{Channel:a.Green,Content:"4"}],outputs:[{Order:0,Channel:a.Green,Content:"5"}]},{inputs:[{Channel:a.Green,Content:"0"}],outputs:[{Order:0,Channel:a.Green,Content:"1"}]},{inputs:[{Channel:a.Green,Content:"42"}],outputs:[{Order:0,Channel:a.Green,Content:"43"}]},{inputs:[{Channel:a.Green,Content:"9"}],outputs:[{Order:0,Channel:a.Blue,Content:"10"}]},{inputs:[{Channel:a.Green,Content:"39"}],outputs:[{Order:0,Channel:a.Blue,Content:"40"}]},{inputs:[{Channel:a.Green,Content:"23999999"}],outputs:[{Order:0,Channel:a.Blue,Content:"24000000"}]}]},ie={AllowedMachines:[1,5,6,7,8,9,10],Description:"The machine should remove all repeating characters from the input string",Name:"RemoveAllRepeats",Tests:[{inputs:[{Channel:a.Green,Content:"aabc"}],outputs:[{Order:0,Channel:a.Green,Content:"abc"}]},{inputs:[{Channel:a.Green,Content:"aaaabccc"}],outputs:[{Order:0,Channel:a.Green,Content:"abc"}]},{inputs:[{Channel:a.Green,Content:""}],outputs:[{Order:0,Channel:a.Green,Content:""}]},{inputs:[{Channel:a.Green,Content:"a"}],outputs:[{Order:0,Channel:a.Green,Content:"a"}]},{inputs:[{Channel:a.Green,Content:"hhhhhhhhhiiiii wwwworllllldddddddd"}],outputs:[{Order:0,Channel:a.Green,Content:"hi world"}]}]},oe={AllowedMachines:[1,5,6,7,8,9,10,11,12],Description:"The machine should put the last character in front of the string",Name:"RotateBackwards",Tests:[{inputs:[{Channel:a.Green,Content:"abc"}],outputs:[{Order:0,Channel:a.Green,Content:"cab"}]},{inputs:[{Channel:a.Green,Content:"otater"}],outputs:[{Order:0,Channel:a.Green,Content:"rotate"}]},{inputs:[{Channel:a.Green,Content:"a"}],outputs:[{Order:0,Channel:a.Green,Content:"a"}]},{inputs:[{Channel:a.Green,Content:""}],outputs:[{Order:0,Channel:a.Green,Content:""}]},{inputs:[{Channel:a.Green,Content:"ello world!H"}],outputs:[{Order:0,Channel:a.Green,Content:"ello world!H"}]}]},se=function(){function e(){Object(c.a)(this,e),this.levels=void 0,this.levels=[],this.init()}return Object(h.a)(e,[{key:"init",value:function(){this.levels.push(D),this.levels.push(ne),this.levels.push(ie),this.levels.push(te),this.levels.push(ae),this.levels.push(ee),this.levels.push(_),this.levels.push(oe),this.levels.push(re)}},{key:"GetAllLevels",value:function(){return this.levels}}],[{key:"GetStore",value:function(){return void 0===e.levelStore&&(e.levelStore=new e),e.levelStore}}]),e}();se.levelStore=void 0;var ue=function(e){var t=se.GetStore().GetAllLevels().map(function(t,n){return i.a.createElement($,{Level:t,LevelClicked:e.OnLevelClicked,key:n})});return i.a.createElement("div",null,i.a.createElement("b",null,"Challenges:"),t)},le=function(e){var t=Object(u.c)({item:{type:F,id:e.machine.Id},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(B.a)(t,2)[1],a=e.machine.GetType(),r=[],o=m.Up,s=!0,l=!1,c=void 0;try{for(var h,p=a.OutputChannels[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var d=h.value;r.push({Channel:d,Direction:o}),o++}}catch(v){l=!0,c=v}finally{try{s||null==p.return||p.return()}finally{if(l)throw c}}var C=r.map(function(e,t){return i.a.createElement(U,{key:t,ChannelMap:e})}),f={position:"absolute",left:A.CellSize/3};return i.a.createElement("div",{ref:n,title:a.Description},i.a.createElement("div",{style:f},i.a.createElement(K,{Machine:e.machine.GetType()})),i.a.createElement("div",{style:f},C),i.a.createElement("label",{style:{position:"absolute"}},a.Name))},ce=function(e){var t=k.GetStore().GetAllMachine(),n={position:"relative",height:A.CellSize,width:A.CellSize},a=t.filter(function(t){return!e.disallowedMachines.some(function(e){return e.Id===t.Id.Id&&e.Type===t.Id.Type})}).map(function(e,t){return i.a.createElement("div",{style:n,key:t},i.a.createElement(le,{machine:e}))});return i.a.createElement("div",{style:{marginLeft:50}},a)},he=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).showItem=n.showItem.bind(Object(C.a)(n)),n.state={Showing:!1},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"showItem",value:function(){this.setState({Showing:!this.state.Showing})}},{key:"render",value:function(){return i.a.createElement("div",{style:{marginLeft:10}},i.a.createElement("button",{onClick:this.showItem},this.state.Showing?"Hide "+this.props.ItemName:"Show "+this.props.ItemName),this.state.Showing&&i.a.createElement("div",{style:{borderLeft:"solid 0.5px",marginLeft:10,padding:10}},this.props.children))}}]),t}(i.a.Component),pe=function(e){return i.a.createElement("div",null,i.a.createElement("label",null,"Rows:"),i.a.createElement(R,{value:e.Setup.NumberOfRows,valueChanged:function(t){var n={NumberOfColumns:e.Setup.NumberOfColumns,NumberOfRows:t,MachineInstances:e.Setup.MachineInstances};e.OnSetupChanged(n)}}),i.a.createElement("label",null,"Columns:"),i.a.createElement(R,{value:e.Setup.NumberOfColumns,valueChanged:function(t){var n={NumberOfColumns:t,NumberOfRows:e.Setup.NumberOfRows,MachineInstances:e.Setup.MachineInstances};e.OnSetupChanged(n)}}))},de=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).ShowSetupString=n.ShowSetupString.bind(Object(C.a)(n)),n.LoadSetup=n.LoadSetup.bind(Object(C.a)(n)),n.SetupStringChanged=n.SetupStringChanged.bind(Object(C.a)(n)),n.state={SetupString:"",NewSetupString:""},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e={display:"flex",flexDirection:"column"};return i.a.createElement("div",{style:{display:"flex",flexFlow:"column wrap"}},i.a.createElement("div",{style:e},i.a.createElement("button",{title:"Show setup string, copy it so you can later restore your setup",onClick:this.ShowSetupString},"Show setup string"),this.props.ShowSetup&&i.a.createElement("input",{value:this.state.SetupString})),i.a.createElement("div",{style:e},i.a.createElement("label",null,"Load Setup"),i.a.createElement("input",{value:this.state.NewSetupString,onChange:this.SetupStringChanged}),""!==this.state.NewSetupString&&i.a.createElement("button",{title:"Load Setup, after having pasted a setup above, click to load this setup",onClick:this.LoadSetup},"Load setup")))}},{key:"SetupStringChanged",value:function(e){this.setState({NewSetupString:e.target.value})}},{key:"ShowSetupString",value:function(){this.setState({SetupString:JSON.stringify(this.props.Setup)}),this.props.OnShowingSetup()}},{key:"LoadSetup",value:function(){var e=JSON.parse(this.state.NewSetupString);void 0!==e&&(this.props.OnSetupChanged(e),this.setState({NewSetupString:""}))}}]),t}(i.a.Component),Ce=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(de,{Setup:this.props.Setup,OnSetupChanged:this.props.OnSetupChanged,OnShowingSetup:this.props.OnShowingSetup,ShowSetup:this.props.ShowSetup}),i.a.createElement(pe,{Setup:this.props.Setup,OnSetupChanged:this.props.OnSetupChanged})))}}]),t}(i.a.Component),fe=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).computer=void 0,n.inputs=[],n.outputs=[],n.cancelComputation=void 0,n.inputChanged=n.inputChanged.bind(Object(C.a)(n)),n.startComputation=n.startComputation.bind(Object(C.a)(n)),n.CalculateNextMessages=n.CalculateNextMessages.bind(Object(C.a)(n)),n.GridSetupChanged=n.GridSetupChanged.bind(Object(C.a)(n)),n.LoadSetup=n.LoadSetup.bind(Object(C.a)(n)),n.StepTimeChanged=n.StepTimeChanged.bind(Object(C.a)(n)),n.OnShowingSetup=n.OnShowingSetup.bind(Object(C.a)(n)),n.stopComputation=n.stopComputation.bind(Object(C.a)(n)),n.handleKeyPress=n.handleKeyPress.bind(Object(C.a)(n)),n.LevelSelected=n.LevelSelected.bind(Object(C.a)(n)),n.PlayTest=n.PlayTest.bind(Object(C.a)(n));var a=T();return n.computer=new j(a),n.state={Computing:!1,Messages:[],GridSetup:a,CustomInput:"",StepTime:6,ShowingSetup:!1,SelectedLevel:D},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"inputChanged",value:function(e){var t=e.target.value;t=(t=(t=t.replace("*","")).replace("<","")).replace(">",""),this.setState({CustomInput:t})}},{key:"startComputation",value:function(){return this.stopComputation(),this.outputs=[],this.handleNextInput(0)}},{key:"handleNextInput",value:function(e){var t=this;if(this.inputs.length<=e)return this.setState({Computing:!1}),new Promise(function(e){e(t.outputs),t.cancelComputation=void 0});var n=this.state.Messages.concat(this.computer.StartComputation(this.inputs[e]));return this.setState({Computing:!0,Messages:n}),this.SetDelay(this.CalculateNextMessages,e)}},{key:"SetDelay",value:function(e,t){var n=this;return new Promise(function(a,r){var i=window.setTimeout(function(){return e(t).then(a).catch(r)},100*n.state.StepTime);n.cancelComputation=function(){clearTimeout(i),r("Cancelled")}})}},{key:"stopComputation",value:function(){this.cancelComputation&&(this.cancelComputation(),this.cancelComputation=void 0),this.setState({Messages:[],Computing:!1})}},{key:"CalculateNextMessages",value:function(e){var t=this.computer.GetNextMessages(this.state.Messages),n=t.filter(function(e){return void 0===e.Cell}),r=[],i=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;switch(c.Direction){case m.Up:r.push({Content:c.Content,Channel:a.Green,Order:e});break;case m.Down:r.push({Content:c.Content,Channel:a.Red,Order:e});break;case m.Right:r.push({Content:c.Content,Channel:a.Blue,Order:e});break;case m.Left:r.push({Content:c.Content,Channel:a.Yellow,Order:e})}}}catch(d){o=!0,s=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}if(n.length>0){var h=this.outputs.concat(r);this.outputs=h}var p=t.filter(function(e){return void 0!==e.Cell});return this.setState({Messages:p}),p.length>0?this.SetDelay(this.CalculateNextMessages,e):this.handleNextInput(e+1)}},{key:"LoadSetup",value:function(e){var t=JSON.parse(e.target.value);void 0!==t&&this.GridSetupChanged(t)}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",function(t){return e.handleKeyPress(t)},!1)}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("keyup",function(t){return e.handleKeyPress(t)},!1)}},{key:"render",value:function(){var e=this.computer.GetStartMachines().map(function(e){return e.MachineId});e.push({Id:1,Type:"Default"});var t=[a.Green],n={display:"flex",height:this.state.GridSetup.NumberOfRows*(A.CellSize+1),width:this.state.GridSetup.NumberOfColumns*(A.CellSize+1),borderStyle:"solid",borderColor:"green blue red yellow",borderWidth:5};return i.a.createElement("div",{style:{display:"flex",flexFlow:"column wrap"}},i.a.createElement("div",null,i.a.createElement("h2",{style:{textAlign:"center"}},"LogicBoxes")),i.a.createElement("div",{style:{display:"flex",flexFlow:"row wrap"}},i.a.createElement("div",{style:{flex:"1 1 200px"}},i.a.createElement(he,{ItemName:"Settings"},i.a.createElement(Ce,{Setup:this.state.GridSetup,OnSetupChanged:this.GridSetupChanged,ShowSetup:this.state.ShowingSetup,OnShowingSetup:this.OnShowingSetup})),i.a.createElement(he,{ItemName:"Challenges"},i.a.createElement(ue,{OnLevelClicked:this.LevelSelected})),i.a.createElement(X,{Level:this.state.SelectedLevel,PlayTest:this.PlayTest,MultipleInputsAllowed:!1,AllowedInputs:t})),i.a.createElement("div",{style:{display:"flex",flex:"4 1 400px",flexFlow:"column",alignItems:"center"}},i.a.createElement("div",{style:n},i.a.createElement(Y,{GridSetup:this.state.GridSetup,Computing:this.state.Computing,Messages:this.state.Messages,OnChanged:this.GridSetupChanged})),i.a.createElement("div",null,i.a.createElement(L,{StepTime:this.state.StepTime,OnStepTimeChanged:this.StepTimeChanged}))),i.a.createElement("div",{style:{flex:"1 1 200px"}},i.a.createElement(ce,{disallowedMachines:e}))))}},{key:"PlayTest",value:function(e){return this.inputs=e,this.startComputation()}},{key:"GridSetupChanged",value:function(e){this.computer.NewSetup(e),this.setState({GridSetup:e,ShowingSetup:!1})}},{key:"StepTimeChanged",value:function(e){this.setState({StepTime:e})}},{key:"OnShowingSetup",value:function(){this.setState({ShowingSetup:!0})}},{key:"LevelSelected",value:function(e){this.setState({SelectedLevel:e})}},{key:"handleKeyPress",value:function(e){switch(e.key){case"Enter":this.startComputation();break;case" ":this.stopComputation()}}}]),t}(i.a.Component),me=function(){return i.a.createElement(u.b,{backend:l.a},i.a.createElement(fe,null))};n(31);s.a.render(i.a.createElement(me,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.a4b11cc2.chunk.js.map