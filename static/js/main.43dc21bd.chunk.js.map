{"version":3,"sources":["Models/DirectionEnum.ts","Models/ChannelColorsEnum.ts","Computing/Setup.ts","Components/Constants.ts","Components/Machine/Machine.tsx","Components/Channel/Channel.tsx","Components/DragItemTypes.ts","MachineStore/DefaultMachines/MoveMachine.ts","MachineStore/DefaultMachines/StartMachine.ts","MachineStore/DefaultMachines/CopyMachine.ts","MachineStore/DefaultMachines/DeleteMachine.ts","MachineStore/DefaultMachines/RotateMachine.ts","MachineStore/DefaultMachines/CompareMachine.ts","MachineStore/DefaultMachines/AddStarMachine.ts","MachineStore/MachineStore.ts","Components/MachineInstance/MachineInstance.tsx","Components/Cell/Cell.tsx","Components/Grid/Grid.tsx","Components/StoredMachine/StoredMachine.tsx","Components/MachineStore/MachineStore.tsx","Computing/Computer.ts","Components/Settings/Settings.tsx","Components/Game/Game.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["DirectionEnum","ChannelColorEnum","Setup","GridSetup","this","LoadSetup","undefined","Error","NumberOfColumns","NumberOfRows","MachineInstances","Cell","Row","Column","MachineId","Id","Type","Channels","Direction","Right","Channel","Green","InputChannels","Constants","CellSize","Machine","machineSize","borderSize","machineStyle","height","width","backgroundColor","props","Color","borderStyle","borderColor","BorderColor","borderWidth","borderRadius","marginLeft","marginTop","style","React","Component","onClicked","bind","cellSize","channelStyle","position","ChannelMap","border","pointerEvents","rotate","Down","Left","Up","rotation","transform","onClick","event","newDirection","OnChanged","DragItemTypes","MoveMachine","actor","Act","message","returnValue","push","Content","NumberOfOutputs","NumberOfInputs","Name","Description","StartMachine","CopyMachine","content","length","DeleteMachine","slice","RotateMachine","CompareMachine","channel","Red","AddStarMachine","MachineStore","machines","init","id","machine","find","m","FindMachine","GetActor","GetType","machineStore","MachineInstance","useDrag","item","type","end","dropResult","monitor","didDrop","OnRemoved","collect","isDragging","drag","channels","map","c","index","key","channelMap","machineInstance","i","OnChannelChanged","margin","machineType","GetStore","GetMachineType","ref","useDrop","accept","drop","OnMovedMachine","getItem","location","itemProps","OnNewMachine","float","marginRight","Message","OnMachineRemoved","Grid","store","ChannelChanged","MachineMoved","MachineAdded","MachineRemoved","rows","rowIndex","row","columnIndex","foundMachineInstance","foundMessage","Messages","newGridSetup","mi","findIndex","filter","Blue","Yellow","Math","max","StoredMachine","channelComponents","cm","absoluteStyle","left","title","Store","GetAllMachine","relativeStyle","storedMachines","disallowedMachines","some","Computer","setup","GetMachines","startMachines","Input","messageLocations","GetStartMachines","messageLocation","messages","nextMessages","messageCell","Move","nextContents","nextContent","cell","direction","Settings","StepTimeChanged","ShowSetupString","SetupStringChanged","state","SetupString","setupString","ShowSetup","display","flexWrap","flexDirection","justifyContent","alignItems","value","StepTime","onChange","setState","target","stringValue","numValue","Number","OnStepTimeChanged","JSON","stringify","OnShowingSetup","setupModel","parse","OnSetupChanged","Game","computer","runningComputation","inputChanged","startComputation","CalculateNextMessages","GridSetupChanged","stopComputation","handleKeyPress","gridSetup","LoadGridSetup","Computing","Output","ShowingSetup","e","StartComputation","setTimeout","clearTimeout","GetNextMessages","doneMessages","mm","newSetup","document","addEventListener","removeEventListener","disallowedStartMachines","gridSizeStyle","verticalFlex","className","NewSetup","newStepTime","App","backend","HTML5Backend","Boolean","window","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.43dc21bd.chunk.js","sourcesContent":["export enum DirectionEnum {\r\n    Up = \"UP\",\r\n    Down = \"DOWN\",\r\n    Left = \"LEFT\",\r\n    Right = \"RIGHT\",\r\n}","export enum ChannelColorEnum {\r\n    Green = \"green\",\r\n    Red = \"red\",\r\n    Blue = \"blue\",\r\n    Yellow = \"yellow\",\r\n}","import { GridSetupModel } from \"../Models/GridSetupModel\";\r\nimport { DirectionEnum } from \"../Models/DirectionEnum\";\r\nimport { ChannelColorEnum } from \"../Models/ChannelColorsEnum\";\r\n\r\nexport class Setup {\r\n\r\n    private GridSetup: GridSetupModel | undefined;\r\n    constructor() {\r\n        this.LoadSetup();\r\n    }\r\n\r\n    public LoadGridSetup(): GridSetupModel {\r\n        if (this.GridSetup === undefined) {\r\n            throw new Error(\"Setup not loaded\");\r\n        }\r\n\r\n        return this.GridSetup;\r\n    }\r\n\r\n    LoadSetup(): void {\r\n        this.GridSetup = {\r\n            NumberOfColumns: 6,\r\n            NumberOfRows: 5,\r\n            MachineInstances: [{\r\n                Cell: { Row: 2, Column: 0 },\r\n                MachineId: { Id: 1, Type: \"Default\" },\r\n                Channels: [{ Direction: DirectionEnum.Right, Channel: ChannelColorEnum.Green }],\r\n                InputChannels: [], Id: 1\r\n            }]\r\n        }\r\n    };\r\n\r\n\r\n}\r\n","export class Constants {\r\n    public static CellSize = 100;\r\n}","import React from \"react\";\r\nimport { Props } from \"./Props\";\r\nimport { Constants } from \"../Constants\";\r\n\r\nexport class Machine extends React.Component<Props>\r\n{\r\n    public render() {\r\n        const machineSize = Constants.CellSize / 5 * 3\r\n        const borderSize = machineSize/10;\r\n\r\n        const machineStyle: React.CSSProperties = {\r\n            // position: \"absolute\",\r\n            height: machineSize,\r\n            width: machineSize,\r\n            backgroundColor: this.props.Machine.Color,\r\n            borderStyle: \"solid\",\r\n            borderColor: this.props.Machine.BorderColor,\r\n            borderWidth: borderSize,\r\n            borderRadius: \"50%\",\r\n            marginLeft: ((Constants.CellSize - machineSize)/2 - borderSize),\r\n            marginTop: ((Constants.CellSize - machineSize)/2 - borderSize)\r\n        };\r\n\r\n        return (\r\n            <div style={machineStyle}>               \r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { Props } from \"./Props\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { Constants } from \"../Constants\";\r\n\r\nexport class Channel extends React.Component<Props>{\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.onClicked = this.onClicked.bind(this);\r\n    }\r\n    public render() {\r\n\r\n        const cellSize = Constants.CellSize -2;\r\n        const width = 19;\r\n        const height = 4;\r\n        const border = 1\r\n        const channelStyle: React.CSSProperties = {\r\n            position: \"absolute\",\r\n            height: cellSize / 50 * height,\r\n            width: cellSize / 50 * width,\r\n            marginLeft: cellSize / 50 * (25 + (height + border) / 2),\r\n            marginTop: cellSize / 50 * (25 - (height + border) / 2),\r\n            backgroundColor: this.props.ChannelMap.Channel,\r\n            borderStyle: \"solid\",\r\n            borderWidth: border + \"px\",\r\n            pointerEvents: \"visible\"\r\n        }\r\n\r\n        let rotate: string = \"\";\r\n        switch (this.props.ChannelMap.Direction) {\r\n            case DirectionEnum.Down:\r\n                rotate = \"rotate(90deg)\";\r\n                break;\r\n            case DirectionEnum.Left:\r\n                rotate = \"rotate(180deg)\";\r\n                break;\r\n            case DirectionEnum.Up:\r\n                rotate = \"rotate(270deg)\";\r\n                break;\r\n            case DirectionEnum.Right:\r\n                rotate = \"rotate(0deg)\";\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n        const rotation: React.CSSProperties = {\r\n            transform: rotate,\r\n            height: cellSize,\r\n            width: cellSize,\r\n            position: \"absolute\",\r\n            pointerEvents: \"none\"\r\n        }\r\n\r\n        return (\r\n            <div style={rotation}>\r\n                <div style={channelStyle} onClick={this.onClicked}></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    public onClicked(event: React.MouseEvent<HTMLDivElement, MouseEvent>): void {\r\n        let newDirection: DirectionEnum = DirectionEnum.Left;\r\n        switch (this.props.ChannelMap.Direction) {\r\n            case DirectionEnum.Down:\r\n                newDirection = DirectionEnum.Left;\r\n                break;\r\n            case DirectionEnum.Left:\r\n                newDirection = DirectionEnum.Up;\r\n                break;\r\n            case DirectionEnum.Up:\r\n                newDirection = DirectionEnum.Right;\r\n                break;\r\n            case DirectionEnum.Right:\r\n                newDirection = DirectionEnum.Down;\r\n                break;\r\n        }\r\n       \r\n        this.props.OnChanged({ Direction: newDirection, Channel: this.props.ChannelMap.Channel });\r\n    }\r\n}","export const DragItemTypes = {\r\n    MachineInstance: \"MachineInstance\",\r\n    NewMachine: \"NewMachine\"\r\n  }","import { IMachine } from \"../IMachine\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MachineId } from \"../MachineId\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class MoveMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            returnValue.push({ Content: message.Content, Channel: ChannelColorEnum.Green });\r\n            return returnValue;\r\n        }\r\n    }\r\n    GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    GetType(): IMachineType {\r\n        return {\r\n            Color: \"green\",\r\n            BorderColor: \"lightgreen\",\r\n            NumberOfOutputs: 1,\r\n            NumberOfInputs: 1,\r\n            Name: \"Move\",\r\n            Description: \"Does nothing with the string, only used to get the message to the right place\"\r\n        }\r\n    }\r\n    public readonly Id: MachineId = { Id: 5, Type: \"Default\" };\r\n}","import { IMachine } from \"../IMachine\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { MachineId } from \"../MachineId\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachineType } from \"../IMachineType\";\r\n\r\nexport class StartMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            returnValue.push({ Content: message.Content, Channel: ChannelColorEnum.Green });\r\n            return returnValue;\r\n        }\r\n    }\r\n    GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    GetType(): IMachineType {\r\n        return {\r\n            Color: \"white\",\r\n            BorderColor: \"red\",\r\n            NumberOfOutputs: 1,\r\n            NumberOfInputs: 1,\r\n            Name: \"Start\",\r\n            Description: \"Starting point of the computation. Acts as a move machine for all other purposes\"\r\n        }\r\n    }\r\n    public readonly Id: MachineId = { Id: 1, Type: \"Default\" };    \r\n}","import { IMachine } from \"../IMachine\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachineType } from \"../IMachineType\";\r\nimport { MachineId } from \"../MachineId\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\n\r\nexport class CopyMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            const content = message.Content.length > 0 ? message.Content[0] + message.Content : \"\";\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return returnValue;\r\n        }\r\n    }\r\n    GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    GetType(): IMachineType {\r\n        return {\r\n            BorderColor: \"green\",\r\n            Color: \"yellow\",\r\n            Name: \"Copy\",\r\n            NumberOfInputs: 1,\r\n            NumberOfOutputs: 1,\r\n            Description: \"Copies the first character of the string and puts it in front of the string\"\r\n        }\r\n    }\r\n    Id: MachineId = {\r\n        Id: 6,\r\n        Type: \"Default\"\r\n    }\r\n}\r\n\r\n","import { IMachine } from \"../IMachine\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachineType } from \"../IMachineType\";\r\nimport { MachineId } from \"../MachineId\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\n\r\nexport class DeleteMachine implements IMachine {\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            const content = message.Content.length > 0 ? message.Content.slice(1): \"\";\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return returnValue;\r\n        }\r\n    }\r\n    GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    GetType(): IMachineType {\r\n        return {\r\n            BorderColor: \"red\",\r\n            Color: \"red\",\r\n            Name: \"Delete\",\r\n            NumberOfInputs: 1,\r\n            NumberOfOutputs: 1,\r\n            Description: \"Deletes the first character of the string\"\r\n        }\r\n    }\r\n    Id: MachineId = {\r\n        Id: 7,\r\n        Type: \"Default\"\r\n    }\r\n}\r\n\r\n","import { IMachine } from \"../IMachine\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachineType } from \"../IMachineType\";\r\nimport { MachineId } from \"../MachineId\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\n\r\nexport class RotateMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            let content: string;\r\n            if ( message.Content.length > 1){\r\n                content = message.Content.slice(1) + message.Content.slice(0,1);\r\n            }\r\n            else{\r\n                content = message.Content;\r\n            }\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return returnValue;\r\n        }\r\n    }\r\n    GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    GetType(): IMachineType {\r\n        return {\r\n            BorderColor: \"blue\",\r\n            Color: \"cyan\",\r\n            Name: \"Rotate\",\r\n            NumberOfInputs: 1,\r\n            NumberOfOutputs: 1,\r\n            Description: \"Removes the first character of the string, and adds it to the end of the string\"\r\n        }\r\n    }\r\n    Id: MachineId = {\r\n        Id: 8,\r\n        Type: \"Default\"\r\n    }\r\n}\r\n\r\n","import { IMachine } from \"../IMachine\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachineType } from \"../IMachineType\";\r\nimport { MachineId } from \"../MachineId\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\n\r\nexport class CompareMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            const channel: ChannelColorEnum = message.Content.length > 1 && message.Content[0] === message.Content[1] ? ChannelColorEnum.Green : ChannelColorEnum.Red;\r\n\r\n            returnValue.push({ Content: message.Content, Channel: channel });\r\n            return returnValue;\r\n        }\r\n    }\r\n    GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    GetType(): IMachineType {\r\n        return {\r\n            BorderColor: \"red\",\r\n            Color: \"green\",\r\n            Name: \"Compare\",\r\n            NumberOfInputs: 1,\r\n            NumberOfOutputs: 2,\r\n            Description: \"Compares the first two characters in the string. If they are the same, exits green. If they are different exits red\"\r\n        }\r\n    }\r\n    Id: MachineId = {\r\n        Id: 9,\r\n        Type: \"Default\"\r\n    }\r\n}\r\n\r\n","import { IMachine } from \"../IMachine\";\r\nimport { IActor } from \"../IActor\";\r\nimport { IMachineType } from \"../IMachineType\";\r\nimport { MachineId } from \"../MachineId\";\r\nimport { MessageModel } from \"../../Models/MessageModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\n\r\nexport class AddStarMachine implements IMachine {\r\n\r\n    private actor: IActor = {\r\n        Act: (message) => {\r\n            const returnValue: MessageModel[] = [];\r\n            const content = \"*\" + message.Content;\r\n\r\n            returnValue.push({ Content: content, Channel: ChannelColorEnum.Green });\r\n            return returnValue;\r\n        }\r\n    }\r\n    GetActor(): IActor {\r\n        return this.actor;\r\n    }\r\n    GetType(): IMachineType {\r\n        return {\r\n            BorderColor: \"blue\",\r\n            Color: \"grey\",\r\n            Name: \"Add *\",\r\n            NumberOfInputs: 1,\r\n            NumberOfOutputs: 1,\r\n            Description: \"Puts a star in front of the string. There is guaranteed not to be a star in the input\"\r\n        }\r\n    }\r\n    Id: MachineId = {\r\n        Id: 10,\r\n        Type: \"Default\"\r\n    }\r\n}\r\n\r\n","import { MoveMachine } from \"./DefaultMachines/MoveMachine\";\r\nimport { IMachine } from \"./IMachine\";\r\nimport { StartMachine } from \"./DefaultMachines/StartMachine\";\r\nimport { MachineId } from \"./MachineId\";\r\nimport { IMachineType } from \"./IMachineType\";\r\nimport { IActor } from \"./IActor\";\r\nimport { CopyMachine } from \"./DefaultMachines/CopyMachine\";\r\nimport { DeleteMachine } from \"./DefaultMachines/DeleteMachine\";\r\nimport { RotateMachine } from \"./DefaultMachines/RotateMachine\";\r\nimport { CompareMachine } from \"./DefaultMachines/CompareMachine\";\r\nimport { AddStarMachine } from \"./DefaultMachines/AddStarMachine\";\r\n\r\nexport class MachineStore {\r\n    private static machineStore: MachineStore;\r\n    private machines: IMachine[];\r\n\r\n    private constructor() {\r\n        this.machines = [];\r\n        this.init();\r\n    }\r\n\r\n    public static GetStore(): MachineStore{\r\n        if (MachineStore.machineStore === undefined)        {\r\n            MachineStore.machineStore = new MachineStore();\r\n        }\r\n\r\n        return MachineStore.machineStore;\r\n    }\r\n\r\n    private init(): void {\r\n        this.machines = [];\r\n        this.machines.push(new StartMachine());\r\n        this.machines.push(new MoveMachine());\r\n        this.machines.push(new CopyMachine());\r\n        this.machines.push(new DeleteMachine());\r\n        this.machines.push(new RotateMachine());\r\n        this.machines.push(new CompareMachine());\r\n        this.machines.push(new AddStarMachine());\r\n\r\n    }\r\n\r\n    private FindMachine(id: MachineId): IMachine {\r\n        const machine = this.machines.find(m => m.Id.Id === id.Id && m.Id.Type === id.Type);\r\n        if (machine === undefined){\r\n            throw new Error(\"No machine found with id \" + id.Id + \" and type \" + id.Type);\r\n        }\r\n\r\n        return machine;\r\n    }\r\n\r\n    public GetActor(id: MachineId): IActor {\r\n        return this.FindMachine(id).GetActor();\r\n    }\r\n\r\n    public GetMachineType(id: MachineId): IMachineType {\r\n        return this.FindMachine(id).GetType();       \r\n    }\r\n\r\n    public GetAllMachine(): IMachine[] {\r\n        return this.machines;\r\n    }\r\n}","import React from \"react\";\r\nimport { Props } from \"./Props\";\r\nimport { Machine } from \"../Machine/Machine\";\r\nimport { Channel } from \"../Channel/Channel\";\r\nimport { ChannelModel } from \"../../Models/ChannelMapModel\";\r\nimport { MachineInstanceModel } from \"../../Models/MachineInstanceModel\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { DragItemTypes } from \"../DragItemTypes\";\r\nimport { MachineStore } from \"../../MachineStore/MachineStore\";\r\nimport { Constants } from \"../Constants\";\r\n\r\nconst MachineInstance: React.FC<Props> = (props) => {\r\n    const [, drag] = useDrag({\r\n        item: { type: DragItemTypes.MachineInstance, id: props.MachineInstance.Id },\r\n        end: (dropResult, monitor) => {\r\n            if (!monitor.didDrop()) {\r\n                props.OnRemoved(props.MachineInstance.Id);\r\n            }\r\n        },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging(),\r\n        }),\r\n    })\r\n\r\n    const OnChannelChanged = (channel: ChannelModel, index: Number) => {\r\n        const machineInstance: MachineInstanceModel = {\r\n            Cell: props.MachineInstance.Cell,\r\n            MachineId: props.MachineInstance.MachineId,\r\n            Channels: props.MachineInstance.Channels.map((c, i) => (i === index) ? channel : c),\r\n            InputChannels: props.MachineInstance.InputChannels,\r\n            Id: props.MachineInstance.Id\r\n        }\r\n\r\n        props.OnChanged(machineInstance);\r\n    }\r\n\r\n    const channels = props.MachineInstance.Channels.map((c, index) => <div key={index}><Channel OnChanged={(channelMap) => OnChannelChanged(channelMap, index)} ChannelMap={c} /></div>);\r\n    const absoluteStyle: React.CSSProperties = {\r\n        position: \"absolute\",\r\n    };\r\n    const machineSize: React.CSSProperties = { height: Constants.CellSize - 2, width: Constants.CellSize - 2, margin: 1 }\r\n\r\n    const machineType = MachineStore.GetStore().GetMachineType(props.MachineInstance.MachineId);\r\n    return (\r\n        <div ref={drag} style={machineSize}>\r\n            <div style={absoluteStyle}>\r\n                <Machine Machine={machineType} />\r\n            </div>\r\n            {channels}\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default MachineInstance;\r\n\r\n","import React from \"react\";\r\nimport { Props } from \"./Props\";\r\nimport \"../../App.css\";\r\nimport MachineInstance from \"../MachineInstance/MachineInstance\";\r\nimport { Constants } from \"../Constants\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { DragItemTypes } from \"../DragItemTypes\";\r\nimport { MachineId } from \"../../MachineStore/MachineId\";\r\n\r\nconst Cell: React.FC<Props> = (props) => {\r\n\r\n    const [, drop] = useDrop({\r\n        accept: [DragItemTypes.MachineInstance, DragItemTypes.NewMachine],\r\n        drop: (item, monitor) => {\r\n            switch (item.type) {\r\n                case DragItemTypes.MachineInstance:\r\n                    props.OnMovedMachine(monitor.getItem().id, props.location);\r\n                    break;\r\n                case DragItemTypes.NewMachine: \r\n                    const itemProps = monitor.getItem() as {id: MachineId};                  \r\n                    props.OnNewMachine(itemProps.id, props.location);\r\n                    break;\r\n            }\r\n        },\r\n    })\r\n\r\n    const style: React.CSSProperties = {\r\n        height: Constants.CellSize,\r\n        width: Constants.CellSize,\r\n        border: \"1px solid #999\",\r\n        float: \"left\",\r\n        marginTop: -1,\r\n        marginRight: -1,\r\n        position: \"relative\"\r\n    }\r\n\r\n    return (\r\n        <div style={style} ref={drop}>\r\n            {props.message !== undefined ? props.message.Message : \"\"}\r\n            {props.machineInstance !== undefined ? <MachineInstance MachineInstance={props.machineInstance} OnChanged={props.OnChanged} OnRemoved={props.OnMachineRemoved}/> : \"\"}\r\n\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Cell;","import React from 'react';\r\nimport '../../App.css';\r\nimport { GridProps } from './Props';\r\nimport Cell from '../Cell/Cell';\r\nimport { MachineInstanceModel } from '../../Models/MachineInstanceModel';\r\nimport { MessageLocationModel } from '../../Models/MessageLocationModel';\r\nimport { GridSetupModel } from '../../Models/GridSetupModel';\r\nimport { CellModel } from '../../Models/CellModel';\r\nimport { ChannelModel } from '../../Models/ChannelMapModel';\r\nimport { ChannelColorEnum } from '../../Models/ChannelColorsEnum';\r\nimport { DirectionEnum } from '../../Models/DirectionEnum';\r\nimport { MachineId } from '../../MachineStore/MachineId';\r\nimport { MachineStore } from '../../MachineStore/MachineStore';\r\n\r\nexport class Grid extends React.Component<GridProps>{\r\n\r\n    private store: MachineStore;\r\n    constructor(props: GridProps) {\r\n        super(props);\r\n        this.ChannelChanged = this.ChannelChanged.bind(this);\r\n        this.MachineMoved = this.MachineMoved.bind(this);\r\n        this.MachineAdded = this.MachineAdded.bind(this);\r\n        this.MachineRemoved = this.MachineRemoved.bind(this);\r\n        this.store = MachineStore.GetStore();\r\n    }\r\n\r\n    public render() {\r\n        var rows = [];\r\n        for (var rowIndex = 0; rowIndex < this.props.GridSetup.NumberOfRows; rowIndex++) {\r\n            var row = [];\r\n            for (var columnIndex = 0; columnIndex < this.props.GridSetup.NumberOfColumns; columnIndex++) {\r\n                let foundMachineInstance: MachineInstanceModel | undefined = undefined;\r\n                let foundMessage: MessageLocationModel | undefined = undefined;\r\n\r\n                for (const machineInstance of this.props.GridSetup.MachineInstances) {\r\n                    if (machineInstance.Cell.Column === columnIndex && machineInstance.Cell.Row === rowIndex) {\r\n                        foundMachineInstance = machineInstance;\r\n                    }\r\n                }\r\n\r\n                for (const message of this.props.Messages) {\r\n                    if (message.Cell!.Column === columnIndex && message.Cell!.Row === rowIndex) {\r\n                        foundMessage = message;\r\n                    }\r\n                }\r\n\r\n                row.push(<Cell \r\n                    key={columnIndex} \r\n                    machineInstance={foundMachineInstance} \r\n                    message={foundMessage} \r\n                    OnChanged={this.ChannelChanged} \r\n                    OnMovedMachine={this.MachineMoved} \r\n                    OnNewMachine={this.MachineAdded} \r\n                    OnMachineRemoved={this.MachineRemoved}\r\n                    location={{ Row: rowIndex, Column: columnIndex }} />);\r\n            }\r\n            rows.push(<div key={rowIndex}>{row}</div>);\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {rows}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private ChannelChanged(machineInstance: MachineInstanceModel) {\r\n        const newGridSetup: GridSetupModel = {\r\n            NumberOfColumns: this.props.GridSetup.NumberOfColumns,\r\n            NumberOfRows: this.props.GridSetup.NumberOfRows,\r\n            MachineInstances: this.props.GridSetup.MachineInstances.map((mi) =>\r\n                (mi.Cell.Column === machineInstance.Cell.Column && mi.Cell.Row === machineInstance.Cell.Row) ?\r\n                    machineInstance\r\n                    :\r\n                    mi)\r\n        };\r\n\r\n        this.props.OnChanged(newGridSetup);\r\n    }\r\n\r\n    private MachineMoved(id: number, location: CellModel): void {\r\n        const index = this.props.GridSetup.MachineInstances.findIndex((mi) => mi.Id === id);\r\n        this.props.GridSetup.MachineInstances[index].Cell = location;\r\n        this.props.OnChanged(this.props.GridSetup);\r\n    }\r\n    private MachineRemoved(id: number): void {\r\n        this.props.GridSetup.MachineInstances = this.props.GridSetup.MachineInstances.filter((mi) => mi.Id !== id);\r\n        this.props.OnChanged(this.props.GridSetup);\r\n    }\r\n    private MachineAdded(id: MachineId,location: CellModel): void {\r\n        const machine = this.store.GetMachineType(id);\r\n        const channels: ChannelModel[] = [];\r\n        if (machine.NumberOfOutputs > 0) {\r\n            channels.push({ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Up });\r\n        }\r\n        if (machine.NumberOfOutputs > 1) {\r\n            channels.push({ Channel: ChannelColorEnum.Red, Direction: DirectionEnum.Down });\r\n        }\r\n        if (machine.NumberOfOutputs > 2) {\r\n            channels.push({ Channel: ChannelColorEnum.Blue, Direction: DirectionEnum.Right });\r\n        }\r\n        if (machine.NumberOfOutputs > 3) {\r\n            channels.push({ Channel: ChannelColorEnum.Yellow, Direction: DirectionEnum.Left });\r\n        }\r\n\r\n        const maxId =  (this.props.GridSetup.MachineInstances.length===0)? 0 : Math.max(...this.props.GridSetup.MachineInstances.map(mi => mi.Id));\r\n        \r\n        const machineInstance: MachineInstanceModel = {\r\n            Cell: location,\r\n            MachineId: id,\r\n            Channels: channels,\r\n            InputChannels: [],\r\n            Id: maxId + 1\r\n        }\r\n        this.props.GridSetup.MachineInstances.push(machineInstance);\r\n        this.props.OnChanged(this.props.GridSetup);\r\n    }\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport { Props } from \"./Props\";\r\nimport { Machine } from \"../Machine/Machine\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { DragItemTypes } from \"../DragItemTypes\";\r\nimport { ChannelModel } from \"../../Models/ChannelMapModel\";\r\nimport { ChannelColorEnum } from \"../../Models/ChannelColorsEnum\";\r\nimport { DirectionEnum } from \"../../Models/DirectionEnum\";\r\nimport { Channel } from \"../Channel/Channel\";\r\nimport { Constants } from \"../Constants\";\r\n\r\nconst StoredMachine: React.FC<Props> = (props) => {\r\n    const [, drag] = useDrag({\r\n        item: { type: DragItemTypes.NewMachine, id: props.machine.Id },\r\n        collect: monitor => ({\r\n            isDragging: !!monitor.isDragging(),\r\n        }),\r\n    })\r\n\r\n    const machineType = props.machine.GetType();\r\n    const channels: ChannelModel[] = [];\r\n    if (machineType.NumberOfOutputs > 0) {\r\n        channels.push({ Channel: ChannelColorEnum.Green, Direction: DirectionEnum.Up });\r\n    }\r\n    if (machineType.NumberOfOutputs > 1) {\r\n        channels.push({ Channel: ChannelColorEnum.Red, Direction: DirectionEnum.Down });\r\n    }\r\n    if (machineType.NumberOfOutputs > 2) {\r\n        channels.push({ Channel: ChannelColorEnum.Blue, Direction: DirectionEnum.Right });\r\n    }\r\n    if (machineType.NumberOfOutputs > 3) {\r\n        channels.push({ Channel: ChannelColorEnum.Yellow, Direction: DirectionEnum.Left });\r\n    }\r\n\r\n    const channelComponents = channels.map((c, index) => <Channel key={index} ChannelMap={c} OnChanged={(cm) => { }} />);\r\n    const absoluteStyle: React.CSSProperties = {\r\n        position: \"absolute\",\r\n        \r\n        left: Constants.CellSize / 3\r\n    };\r\n    const labelStyle: React.CSSProperties ={\r\n        position: \"absolute\"       \r\n    }\r\n    return (\r\n        <div ref={drag} title={machineType.Description}>\r\n      \r\n            <div style={absoluteStyle}>\r\n                <Machine Machine={props.machine.GetType()} />\r\n            </div>\r\n            <div style={absoluteStyle}>\r\n                {channelComponents}\r\n            </div>\r\n            <label style={labelStyle}>{machineType.Name}</label>\r\n        </div>)\r\n}\r\n\r\nexport default StoredMachine","import { Props } from \"./Props\";\r\nimport React from \"react\";\r\nimport StoredMachine from \"../StoredMachine/StoredMachine\";\r\nimport {MachineStore as Store} from \"../../MachineStore/MachineStore\";\r\nimport { Constants } from \"../Constants\";\r\n\r\nconst MachineStore: React.FC<Props> = (props) => {\r\n\r\n    const machines = Store.GetStore().GetAllMachine();\r\n    const relativeStyle: React.CSSProperties = {\r\n        position: \"relative\",\r\n        height: Constants.CellSize,\r\n        width: Constants.CellSize\r\n    };\r\n\r\n    const filteredMachines= machines.filter((m) => !props.disallowedMachines.some((mi) => mi.Id === m.Id.Id && mi.Type === m.Id.Type));\r\n    const storedMachines = filteredMachines.map((m, index) => <div style={relativeStyle} key={index}><StoredMachine machine={m} /></div>);\r\n\r\n    return (\r\n        <div>\r\n            {storedMachines}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MachineStore","import { GridSetupModel } from \"../Models/GridSetupModel\";\r\nimport { MachineInstanceModel } from \"../Models/MachineInstanceModel\";\r\nimport { MessageLocationModel } from \"../Models/MessageLocationModel\";\r\nimport { CellModel } from \"../Models/CellModel\";\r\nimport { ChannelColorEnum } from \"../Models/ChannelColorsEnum\";\r\nimport { MachineStore } from \"../MachineStore/MachineStore\";\r\nimport { IActor } from \"../MachineStore/IActor\";\r\nimport { DirectionEnum } from \"../Models/DirectionEnum\";\r\n\r\nexport class Computer {\r\n    private setup: GridSetupModel;\r\n    private machines: { id: number, actor: IActor }[] = [];\r\n    private store: MachineStore;\r\n\r\n    constructor(setup: GridSetupModel) {\r\n        this.setup = setup;\r\n        this.store = MachineStore.GetStore();\r\n        this.GetMachines()\r\n    }\r\n\r\n    public NewSetup(setup: GridSetupModel){\r\n        this.setup = setup;\r\n        this.GetMachines();\r\n    }\r\n\r\n    private GetMachines(): void {\r\n        this.machines = this.setup.MachineInstances.map(mi => { return { id: mi.Id, actor: this.store.GetActor(mi.MachineId) }; });\r\n    }\r\n\r\n    public GetStartMachines() {\r\n        const startMachines: MachineInstanceModel[] = [];\r\n        for (const machineInstance of this.setup.MachineInstances) {\r\n            if (machineInstance.MachineId.Id < 4 && machineInstance.MachineId.Type === \"Default\") {\r\n                startMachines.push(machineInstance);\r\n            }\r\n        }\r\n\r\n        return startMachines;\r\n    }\r\n\r\n    public StartComputation(Input: string): MessageLocationModel[] {\r\n        const messageLocations: MessageLocationModel[] = [];\r\n        for (const machineInstance of this.GetStartMachines()) {\r\n            const direction = machineInstance.Channels[0].Direction;\r\n            const messageLocation: MessageLocationModel = { Message: Input, Direction: direction, Cell: machineInstance.Cell };\r\n            messageLocations.push(messageLocation);\r\n        }\r\n\r\n        return messageLocations;\r\n    }\r\n\r\n    public GetNextMessages(messages: MessageLocationModel[]): MessageLocationModel[]{\r\n        const nextMessages: MessageLocationModel[] = [];\r\n        for (const message of messages) {\r\n            let machine: MachineInstanceModel | undefined;\r\n            let messageCell: CellModel | undefined = message.Cell;\r\n\r\n            while (machine === undefined) {\r\n                messageCell = this.Move(messageCell!, message.Direction);\r\n                if (messageCell === undefined){\r\n                    break;\r\n                }\r\n\r\n                machine = this.setup.MachineInstances.find((mi) => mi.Cell.Column === messageCell!.Column && mi.Cell.Row === messageCell!.Row);\r\n            }\r\n\r\n            if (messageCell === undefined) {\r\n                nextMessages.push({ Cell: messageCell, Direction: message.Direction, Message: message.Message })\r\n                break;\r\n            }\r\n\r\n            let channel = ChannelColorEnum.Green;\r\n\r\n            const actor = this.machines.find((m) => m.id === machine!.Id)!.actor;\r\n            const nextContents = actor.Act({ Content: message.Message, Channel: channel });\r\n            for (const nextContent of nextContents) {\r\n                const channelMap = machine!.Channels.find((cm) => cm.Channel === nextContent.Channel);\r\n                if (channelMap === undefined) {\r\n                    throw Error(\"Channelmap \" + nextContent.Channel + \"undefined\");\r\n                }\r\n\r\n                const messageLocation: MessageLocationModel = { Cell: machine!.Cell, Message: nextContent.Content, Direction: channelMap.Direction }\r\n                nextMessages.push(messageLocation);\r\n            }\r\n        }\r\n\r\n        return nextMessages;\r\n    }\r\n\r\n    private Move(cell: CellModel, direction: DirectionEnum): CellModel | undefined {\r\n        switch (direction) {\r\n            case DirectionEnum.Down:\r\n                if (cell.Row === this.setup.NumberOfRows - 1) {\r\n                    return;\r\n                }\r\n                return { Column: cell.Column, Row: cell.Row + 1 };\r\n            case DirectionEnum.Up:\r\n                if (cell.Row === 0) {\r\n                    return;\r\n                }\r\n                return { Column: cell.Column, Row: cell.Row - 1 };\r\n            case DirectionEnum.Right:\r\n                if (cell.Column === this.setup.NumberOfColumns - 1) {\r\n                    return;\r\n                }\r\n                return { Column: cell.Column + 1, Row: cell.Row };\r\n            case DirectionEnum.Left:\r\n                if (cell.Column === 0) {\r\n                    return;\r\n                }\r\n                return { Column: cell.Column - 1, Row: cell.Row };\r\n        }\r\n    }\r\n\r\n}","import React from \"react\";\r\nimport { Props } from \"./Props\";\r\nimport { State } from \"./State\";\r\nimport { GridSetupModel } from \"../../Models/GridSetupModel\";\r\n\r\nexport class Settings extends React.Component<Props, State>{\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.StepTimeChanged = this.StepTimeChanged.bind(this);\r\n        this.ShowSetupString = this.ShowSetupString.bind(this);\r\n        this.LoadSetup = this.LoadSetup.bind(this);\r\n        this.SetupStringChanged = this.SetupStringChanged.bind(this);\r\n\r\n        this.state = { SetupString: \"\" }\r\n    }\r\n    public render() {\r\n        const verticalFlex: React.CSSProperties = { display: \"flex\", flexWrap: \"wrap\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }\r\n        const setupString = this.props.ShowSetup ? this.state.SetupString : \"\";\r\n        return (\r\n            <div style={verticalFlex}>\r\n                <label>Step Time</label>\r\n                <input value={this.props.StepTime} title=\"Step time in tenths of seconds, lower for faster animations\" onChange={this.StepTimeChanged} />\r\n                <button title={\"Show setup string, copy it so you can later restore your setup\"} onClick={this.ShowSetupString}>Show setup string</button>\r\n                <input value={setupString} onChange={this.SetupStringChanged} />\r\n                <button title={\"Load Setup, after having pasted a setup above, click to load this setup\"} onClick={this.LoadSetup}>Load setup</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    private SetupStringChanged(event: React.ChangeEvent<HTMLInputElement>): void {\r\n        this.setState({ SetupString: event.target.value });\r\n    }\r\n\r\n    private StepTimeChanged(event: React.ChangeEvent<HTMLInputElement>): void {\r\n        const stringValue = event.target.value;\r\n        const numValue = Number(stringValue);\r\n        this.props.OnStepTimeChanged(numValue);\r\n    }\r\n\r\n    private ShowSetupString(): void {\r\n        this.setState({ SetupString: JSON.stringify(this.props.Setup) });\r\n        this.props.OnShowingSetup();\r\n    }\r\n\r\n    private LoadSetup(): void {\r\n        const setupModel = JSON.parse(this.state.SetupString) as GridSetupModel;\r\n        if (setupModel !== undefined) {\r\n            this.props.OnSetupChanged(setupModel);\r\n        }\r\n    }\r\n}\r\n","import { Props } from \"./Props\";\r\nimport React from \"react\";\r\nimport { Setup } from \"../../Computing/Setup\";\r\nimport { Grid } from \"../Grid/Grid\";\r\nimport { State } from \"./State\";\r\nimport { MessageLocationModel } from \"../../Models/MessageLocationModel\";\r\nimport { Constants } from \"../Constants\";\r\nimport { GridSetupModel } from \"../../Models/GridSetupModel\";\r\nimport MachineStore from \"../MachineStore/MachineStore\";\r\nimport { Computer } from \"../../Computing/Computer\";\r\nimport { Settings } from \"../Settings/Settings\";\r\n\r\nexport class Game extends React.Component<Props, State>{\r\n    private computer: Computer;\r\n    private runningComputation: NodeJS.Timeout | undefined;\r\n    startMachines: any;\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.inputChanged = this.inputChanged.bind(this);\r\n        this.startComputation = this.startComputation.bind(this);\r\n        this.CalculateNextMessages = this.CalculateNextMessages.bind(this);\r\n        this.GridSetupChanged = this.GridSetupChanged.bind(this);\r\n        this.LoadSetup = this.LoadSetup.bind(this);\r\n        this.StepTimeChanged = this.StepTimeChanged.bind(this);\r\n        this.OnShowingSetup = this.OnShowingSetup.bind(this);\r\n        this.stopComputation = this.stopComputation.bind(this);\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n\r\n\r\n        const setup = new Setup();\r\n        const gridSetup = setup.LoadGridSetup();\r\n        this.computer = new Computer(gridSetup);\r\n        this.state = { Computing: false, Messages: [], GridSetup: gridSetup, Input: \"\", Output: \"\", StepTime: 6, ShowingSetup: false };\r\n    }\r\n    private inputChanged(e: React.ChangeEvent<HTMLInputElement>): void {\r\n        this.setState({ Input: e.target.value });\r\n    }\r\n    private startComputation(): void {\r\n        this.stopComputation();\r\n        const messageLocations: MessageLocationModel[] = this.computer.StartComputation(this.state.Input);\r\n\r\n        this.setState({ Computing: true, Messages: messageLocations });\r\n        this.runningComputation = setTimeout(this.CalculateNextMessages, this.state.StepTime * 100);\r\n    }\r\n\r\n    private stopComputation(): void {\r\n        if (this.runningComputation){\r\n            clearTimeout(this.runningComputation);\r\n            this.runningComputation = undefined;\r\n            this.setState({Messages: [], Computing: false});\r\n        }\r\n    }\r\n\r\n    private CalculateNextMessages(): void {\r\n        const messages = this.computer.GetNextMessages(this.state.Messages);\r\n\r\n        const doneMessages = messages.filter(mm => mm.Cell === undefined);\r\n        if (doneMessages.length > 0) {\r\n            this.setState({ Output: doneMessages[0].Message });\r\n        }\r\n\r\n        const nextMessages = messages.filter(mm => mm.Cell !== undefined);\r\n        this.setState({ Messages: nextMessages });\r\n        if (nextMessages.length > 0) {\r\n            this.runningComputation = setTimeout(this.CalculateNextMessages, this.state.StepTime * 100);\r\n        } else {\r\n            this.setState({ Computing: false });\r\n        }\r\n    }\r\n\r\n    private LoadSetup(event: React.ChangeEvent<HTMLInputElement>): void {\r\n        const newValue = JSON.parse(event.target.value);\r\n        const newSetup = newValue as GridSetupModel;\r\n        if (newSetup !== undefined) {\r\n            this.GridSetupChanged(newSetup);\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        document.addEventListener(\"keydown\", (event) => this.handleKeyPress(event), false);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.removeEventListener(\"keydown\", (event) => this.handleKeyPress(event), false);\r\n    }\r\n\r\n     public render() {\r\n        const startMachines = this.computer.GetStartMachines();\r\n\r\n        const disallowedStartMachines = startMachines.map((m) => m.MachineId);\r\n        const height = this.state.GridSetup.NumberOfRows * (Constants.CellSize + 2);\r\n        const width = this.state.GridSetup.NumberOfColumns * (Constants.CellSize + 2);\r\n        const gridSizeStyle: React.CSSProperties = { height: height, width: width };\r\n        const verticalFlex: React.CSSProperties = { display: \"flex\", flexWrap: \"wrap\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }\r\n        const horizontalFlex: React.CSSProperties = { display: \"flex\", flexWrap: \"wrap\", flexDirection: \"row\", justifyContent: \"space-between\" }\r\n\r\n        return (\r\n            <div style={verticalFlex}>\r\n                <h2>LogicBoxes</h2>\r\n                <div style={horizontalFlex}>\r\n                    <div>\r\n                        <Settings\r\n                            Setup={this.state.GridSetup}\r\n                            OnSetupChanged={this.GridSetupChanged}\r\n                            StepTime={this.state.StepTime}\r\n                            OnStepTimeChanged={this.StepTimeChanged}\r\n                            ShowSetup={this.state.ShowingSetup}\r\n                            OnShowingSetup={this.OnShowingSetup} />\r\n                    </div>\r\n                    <div style={verticalFlex}>\r\n                        <div className=\"App\" style={gridSizeStyle}>\r\n                            <Grid\r\n                                GridSetup={this.state.GridSetup}\r\n                                Computing={this.state.Computing}\r\n                                Messages={this.state.Messages}\r\n                                OnChanged={this.GridSetupChanged} />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                value={this.state.Input}\r\n                                onChange={this.inputChanged} />\r\n                            <button onClick={this.startComputation} title={\"Start computation ([Enter])\"}>{this.state.Computing ? \"Restart\" : \"Start\"}</button>\r\n                            {this.state.Computing && <button onClick={this.stopComputation} title={\"Stop computation ([Space])\"}>Stop</button>}                           \r\n                        </div>\r\n                        <label>Output: {this.state.Output}</label>\r\n                    </div>\r\n                    <div>\r\n                        <MachineStore disallowedMachines={disallowedStartMachines} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n    private GridSetupChanged(newGridSetup: GridSetupModel): void {\r\n        this.computer.NewSetup(newGridSetup);\r\n        this.setState({ GridSetup: newGridSetup, ShowingSetup: false });\r\n    }\r\n\r\n    private StepTimeChanged(newStepTime: number): void {\r\n        this.setState({ StepTime: newStepTime });\r\n    }\r\n\r\n    private OnShowingSetup() {\r\n        this.setState({ ShowingSetup: true });\r\n    }\r\n\r\n    private handleKeyPress(event: KeyboardEvent): void {\r\n        switch (event.key) {\r\n            case \"Enter\":\r\n                this.startComputation();\r\n                break;\r\n            case \" \":\r\n                this.stopComputation();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport { Game } from './Components/Game/Game';\r\nimport { DndProvider } from 'react-dnd'\r\nimport HTML5Backend from 'react-dnd-html5-backend'\r\n\r\nconst App: React.FC = () => {\r\n  \r\n  return (\r\n    <DndProvider backend={HTML5Backend}><Game/></DndProvider>\r\n    \r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}